"use strict";(self.webpackChunk_antv_s2_site=self.webpackChunk_antv_s2_site||[]).push([[2643],{4200:function(n,e,t){t.r(e),t.d(e,{default:function(){return i}});t(62435);var o=t(85956),s=t(76959),a=t(86074);function i(){var n=(0,o.pC)();return(0,a.jsx)(s.w.Provider,{value:{meta:{exampleTopics:[{id:"case",title:{zh:"场景案例",en:"Show Case"},icon:"star-single-line",examples:[{demos:[{id:"group-drill-down",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/RYy4GI8Y8d/demo.gif",source:"import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport { isUpDataValue } from '@antv/s2';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/ff31b171-17a7-4d29-b20a-0b90a810d2de.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const GridSheet = () => {\n      const [s2DataConfig, setS2DataConfig] = useState(data.dataCfg);\n      const [drillDownField, setDrillDownField] = useState('');\n      const s2Options = {\n        width: 800,\n        height: 600,\n        tooltip: {\n          showTooltip: false,\n        },\n        style: {\n          layoutWidthType: 'colAdaptive',\n          cellCfg: {\n            width: 400,\n            height: 100,\n            valuesCfg: {\n              widthPercent: [40, 20, 20, 20],\n            },\n          },\n        },\n        conditions: {\n          text: [\n            {\n              mapping: (value, cellInfo) => {\n                // 添加文本颜色映射逻辑\n                const { colIndex } = cellInfo;\n                if (colIndex <= 1) {\n                  // 主指标为黑色\n                  return {\n                    fill: '#000',\n                  };\n                }\n                return {\n                  fill: isUpDataValue(value) ? '#FF4D4F' : '#29A294', // 同环比红张绿跌\n                };\n              },\n            },\n          ],\n        },\n      };\n\n      const Breadcrumb = () => {\n        if (!drillDownField) {\n          return null;\n        }\n        return (\n          <div className=\"antv-s2-breadcrumb\">\n            <span\n              className=\"antv-s2-breadcrumb-all\"\n              onClick={() => {\n                setS2DataConfig(data.dataCfg);\n                setDrillDownField('');\n              }}\n            >\n              全部\n            </span>\n            <span> / {drillDownField}</span>\n          </div>\n        );\n      };\n\n      const dataCellTooltip = (viewMeta) => {\n        const { spreadsheet, fieldValue } = viewMeta;\n        return (\n          <div>\n            <div className=\"antv-s2-tooltip-operator\">\n              <div\n                className=\"antv-s2-tooltip-action\"\n                onClick={() => {\n                  setS2DataConfig(data.drillDownDataCfg);\n                  setDrillDownField(fieldValue.label);\n                }}\n              >\n                下钻\n              </div>\n              <div\n                className=\"antv-s2-tooltip-action\"\n                onClick={() => {\n                  spreadsheet.interaction.mergeCells();\n                }}\n              >\n                合并\n              </div>\n            </div>\n            <div className=\"antv-s2-tooltip-divider\"></div>\n            <div className=\"antv-s2-tooltip-head-info-list\">\n              {fieldValue.label}\n            </div>\n            <div className=\"antv-s2-tooltip-detail-list\">\n              {fieldValue.values.map((item, key) => (\n                <div key={key} className=\"antv-s2-tooltip-detail-item\">\n                  <span className=\"antv-s2-tooltip-detail-item-key\">\n                    {item[0]}\n                  </span>\n                  <span className=\"antv-s2-tooltip-detail-item-val antv-s2-tooltip-highlight\">\n                    {`${item[1]} | 环比率：${item[2]} | 环比差值：${item[3]}`}\n                  </span>\n                </div>\n              ))}\n            </div>\n            <div className=\"antv-s2-tooltip-infos\">\n              按住 Shift 多选单元格进行人群合并\n            </div>\n          </div>\n        );\n      };\n\n      const onDataCellMouseUp = (value) => {\n        const viewMeta = value?.viewMeta;\n        if (!viewMeta) {\n          return;\n        }\n\n        const position = {\n          x: value.event.clientX,\n          y: value.event.clientY,\n        };\n        viewMeta.spreadsheet.tooltip.show({\n          position,\n          content: dataCellTooltip(viewMeta),\n        });\n      };\n      return (\n        <SheetComponent\n          dataCfg={s2DataConfig}\n          options={s2Options}\n          sheetType=\"gridAnalysis\"\n          header={{\n            title: '人群网络分析',\n            advancedSortCfg: { open: true },\n            extra: [<Breadcrumb />],\n          }}\n          onDataCellMouseUp={onDataCellMouseUp}\n        />\n      );\n    };\n\n    ReactDOM.render(<GridSheet />, document.getElementById('container'));\n  });\n\ninsertCss(`\n  .antv-s2-tooltip-operator {\n    display: flex\n  }\n  .antv-s2-tooltip-action {\n    width: 50%;\n    text-align: center;\n  }\n  .antv-s2-breadcrumb {\n  position: absolute;\n    left: 130px;\n    top: 11px;\n  }\n  .antv-s2-breadcrumb-all {\n     color: #706f6f;\n  }\n  .antv-s2-breadcrumb-all:hover {\n    color: #873bf4;\n    cursor: pointer;\n  }\n  .antv-s2-advanced-sort {\n    display: none;\n  }\n  .s2-header {\n    margin:0px !important;\n  }\n`);\n",title:{zh:"分群下钻表",en:"Group drill down sheet"},filename:"group-drill-down.tsx",isNew:!1},{id:"single-population-proportion",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/clsZ0BSxpR/c315b0f0-03df-46e6-b470-7894c7fa5b17.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport insertCss from 'insert-css';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\nimport { S2Options } from '@antv/s2';\n\nconst PALETTE_COLORS = [\n  {\n    limit: 10,\n    background: '#b8e1ff',\n  },\n  {\n    limit: 20,\n    background: '#b4d3fb',\n  },\n  {\n    limit: 30,\n    background: '#7daaff',\n  },\n  {\n    limit: 40,\n    background: '#5b8ff9',\n  },\n  {\n    limit: 50,\n    background: '#3d76dd',\n  },\n  {\n    limit: 60,\n    background: '#085ec0',\n  },\n  {\n    limit: 70,\n    background: '#085ec0cc',\n  },\n  {\n    limit: 80,\n    background: '#0047a5',\n  },\n  {\n    limit: 90,\n    background: '#00318a',\n  },\n  {\n    limit: 100,\n    background: '#001d70',\n  },\n];\n\nconst getTargetColor = (value) => {\n  if (isNaN(Number(value))) {\n    return PALETTE_COLORS[0].background;\n  }\n  return PALETTE_COLORS[Math.floor(Number(value) / 10)].background;\n};\n\nconst PaletteLegend = () => {\n  return (\n    <div className=\"palette-legend\">\n      <div className=\"palette-limit\">0%</div>\n      {PALETTE_COLORS.map((color) => (\n        <span\n          key={color.background}\n          className=\"palette-color\"\n          style={{ background: color.background }}\n        />\n      ))}\n      <div className=\"palette-limit\">100%</div>\n    </div>\n  );\n};\n\nfetch('https://assets.antv.antgroup.com/s2/single-population-proportion.json')\n  .then((res) => res.json())\n  .then(({ data }) => {\n    const s2DataConfig = {\n      fields: {\n        rows: ['type', 'job'],\n        columns: ['age', 'city'],\n        values: ['count'],\n        valueInCols: true,\n      },\n      meta: [\n        {\n          field: 'type',\n          name: '类别',\n        },\n        {\n          field: 'job',\n          name: '职业',\n        },\n        {\n          field: 'age',\n          name: '年龄分布',\n        },\n        {\n          field: 'city',\n          name: '所在城市',\n        },\n        {\n          field: 'count',\n          name: '数值',\n        },\n      ],\n      data,\n    };\n    const s2Options = {\n      width: 800,\n      height: 600,\n      tooltip: {\n        showTooltip: true,\n        operation: {\n          hiddenColumns: true,\n        },\n      },\n      interaction: {\n        selectedCellsSpotlight: true,\n        hoverHighlight: false,\n      },\n      style: {\n        layoutWidthType: 'colAdaptive',\n        colCfg: {\n          hideMeasureColumn: true,\n        },\n        cellCfg: {\n          width: 100,\n        },\n      },\n      conditions: {\n        text: [\n          {\n            field: 'count',\n            mapping(value) {\n              return {\n                fill: value >= 50 ? '#fff' : '#282b32',\n              };\n            },\n          },\n        ],\n        background: [\n          {\n            field: 'count',\n            mapping(value) {\n              const backgroundColor = getTargetColor(value);\n              return {\n                fill: backgroundColor,\n              };\n            },\n          },\n        ],\n      },\n    };\n\n    ReactDOM.render(\n      <div className=\"root\">\n        <SheetComponent\n          dataCfg={s2DataConfig}\n          options={s2Options as S2Options}\n          sheetType=\"pivot\"\n          adaptive={false}\n          header={{\n            title: '单人群占比表',\n            extra: [<PaletteLegend />],\n          }}\n        />\n      </div>,\n      document.getElementById('container'),\n    );\n  });\n\ninsertCss(`\n  .root{\n    display: inline-block;\n  }\n\n  .palette-legend {\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    margin-bottom: 8px;\n  }\n\n .palette-color {\n    width: 12px;\n    height: 12px;\n  }\n\n  .palette-limit{\n    font-size: 12px;\n    color: rgb(94,94,94);\n  }\n\n  .palette-color + .palette-limit {\n    margin-left: 5px;\n  }\n\n  .palette-limit + .palette-color {\n    margin-left: 5px;\n  }\n\n  .s2-header {\n    margin:0px !important;\n  }\n`);\n",title:{zh:"单人群占比表",en:"Single population proportion Sheet"},filename:"single-population-proportion.tsx",isNew:!1}],icon:"",id:"proportion",title:{en:"Proportion sheet",zh:"占比表"},childrenKey:"demos",order:0},{demos:[{id:"measure-comparison",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/Hp592db5za/60960a3d-f405-4474-a412-95721a21654d.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  ColCell,\n  DataCell,\n  CornerCell,\n  Frame,\n  ID_SEPARATOR,\n  measureTextWidth,\n} from '@antv/s2';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nconst UP_COLOR = '#F46649';\nconst DOWN_COLOR = '#2AA491';\nconst TAG_HEIGHT = 20; // 指标高度\nconst TAG_WIDTH = 80; // 指标宽度\n\nclass CustomColCell extends ColCell {\n  lineConfig = {};\n\n  lineConfigStyle = {};\n\n  initCell() {\n    super.initCell();\n    this.drawLeftBorder();\n  }\n\n  handleRestOptions(...[headerConfig, lineConfig, lineConfigStyle]) {\n    this.headerConfig = headerConfig;\n    this.lineConfig = lineConfig || {};\n    this.lineConfigStyle = lineConfigStyle || {};\n  }\n\n  getCellArea() {\n    const { x, y, height, width, parent } = this.meta;\n    if (parent?.id === 'root') {\n      return {\n        x,\n        y: y + (height - TAG_HEIGHT),\n        height: TAG_HEIGHT,\n        width: TAG_WIDTH,\n      };\n    }\n    return { x, y, height, width };\n  }\n\n  // 绘制背景\n  drawBackgroundShape() {\n    const { parent } = this.meta;\n    if (parent?.id === 'root' && this.lineConfigStyle.stroke) {\n      this.backgroundShape = this.addShape('rect', {\n        attrs: {\n          ...this.getCellArea(),\n          fill: this.lineConfigStyle.stroke,\n        },\n      });\n    } else {\n      super.drawBackgroundShape();\n    }\n  }\n\n  // 交互显示\n  drawInteractiveBgShape() {\n    const { parent } = this.meta;\n    if (parent?.id === 'root') {\n      return;\n    }\n    super.drawInteractiveBgShape();\n  }\n\n  // 绘制文本\n  drawTextShape() {\n    const { value, parent } = this.meta;\n    if (parent?.id === 'root') {\n      const position = this.getTextPosition();\n      const textStyle = this.getTextStyle();\n      this.textShape = this.addShape('text', {\n        attrs: {\n          x: position.x,\n          y: position.y,\n          text: value,\n          fill: this.lineConfigStyle.stroke ? '#FFF' : textStyle.fill,\n          textAlign: 'center',\n          textBaseline: 'middle',\n        },\n      });\n    } else {\n      super.drawTextShape();\n    }\n  }\n\n  drawLeftBorder() {\n    const { x, y, children, parent, colIndex, value, height } = this.meta;\n    const groupCache = this?.spreadsheet?.store?.get('groupCache') || {};\n    const indexCache = this?.spreadsheet?.store?.get('indexCache') || {};\n    const {\n      horizontalBorderColor,\n      horizontalBorderWidth,\n      verticalBorderColorOpacity,\n    } = this.getStyle().cell;\n    if (parent?.id === 'root') {\n      this.addShape('line', {\n        attrs: {\n          x1: x,\n          y1: y + height - TAG_HEIGHT,\n          x2: x,\n          y2: y + height,\n          stroke: this.lineConfigStyle.stroke || horizontalBorderColor,\n          lineWidth: this.lineConfigStyle.lineWidth || horizontalBorderWidth,\n        },\n      });\n      groupCache[children?.[0]?.value] = 1;\n      this?.spreadsheet?.store?.set('groupCache', groupCache);\n    } else if (groupCache[value]) {\n      this.addShape('line', {\n        attrs: {\n          x1: x,\n          y1: y,\n          x2: x,\n          y2: y + height,\n          stroke: this.lineConfigStyle.stroke || horizontalBorderColor,\n          lineWidth: this.lineConfigStyle.lineWidth || horizontalBorderWidth,\n        },\n      });\n    }\n    if (parent?.parent?.id === 'root') {\n      if (this.lineConfig[value]) {\n        indexCache[colIndex + 1] = 1;\n        this.spreadsheet?.store?.set('indexCache', indexCache);\n      }\n      if (indexCache[colIndex]) {\n        this.addShape('line', {\n          attrs: {\n            x1: x,\n            y1: y,\n            x2: x,\n            y2: y + height,\n            stroke: this.lineConfigStyle.stroke || horizontalBorderColor,\n            lineWidth: this.lineConfigStyle.lineWidth || horizontalBorderWidth,\n            opacity: this.lineConfigStyle.opacity || verticalBorderColorOpacity,\n          },\n        });\n      }\n    }\n  }\n}\n\nclass CustomDataCell extends DataCell {\n  lineConfig = {};\n\n  lineConfigStyle = {};\n\n  customConditions = {};\n\n  textConfig = {};\n\n  initCell() {\n    super.initCell();\n    this.drawLeftBorder();\n    this.drawRightBorder();\n  }\n\n  handleRestOptions(options) {\n    const { lineConfig, lineConfigStyle, conditions, textConfig } = options;\n    this.lineConfig = lineConfig;\n    this.lineConfigStyle = lineConfigStyle;\n    this.customConditions = conditions;\n    this.textConfig = textConfig;\n  }\n\n  // 自定义icon显示\n  getIconStyle() {\n    const tagName = Object.keys(this.customConditions).find((item) =>\n      this.meta.colId?.includes(`root${ID_SEPARATOR}${item}${ID_SEPARATOR}`),\n    );\n    if (tagName) {\n      this.conditions = {\n        ...this.conditions,\n        ...(this.customConditions?.[tagName] || []),\n      };\n    }\n    return super.getIconStyle();\n  }\n\n  drawTextShape() {\n    const { fieldValue } = this.meta;\n    const tagName = Object.keys(this.textConfig).find((item) =>\n      this.meta.colId?.includes(`root${ID_SEPARATOR}${item}${ID_SEPARATOR}`),\n    );\n\n    if (tagName) {\n      const { getCustomFormattedValue, getCustomTextStyle } =\n        this.textConfig[tagName] || {};\n      const { formattedValue: defaultFormattedValue } =\n        this.getFormattedFieldValue();\n      let formattedValue = defaultFormattedValue;\n      if (getCustomFormattedValue) {\n        formattedValue = getCustomFormattedValue(fieldValue);\n      }\n      const textStyle = this.getTextStyle();\n      this.actualTextWidth = measureTextWidth(formattedValue, textStyle);\n      const position = this.getTextPosition();\n\n      this.textShape = this.addShape('text', {\n        attrs: {\n          x: position.x,\n          y: position.y,\n          text: formattedValue,\n          ...textStyle,\n          ...(getCustomTextStyle(fieldValue, textStyle) || {}),\n        },\n      });\n    } else {\n      super.drawTextShape();\n    }\n  }\n\n  drawLeftBorder() {\n    const { x, y, colIndex, valueField, height } = this.meta;\n    const indexCache = this.spreadsheet.store.get('dataIndexCache') || {};\n    const valueLength = this.spreadsheet.dataCfg.fields.values.length;\n    const currentConfig = this.lineConfig[valueField];\n    const {\n      horizontalBorderColor,\n      horizontalBorderWidth,\n      verticalBorderColorOpacity,\n    } = this.getStyle().cell;\n\n    if (colIndex % valueLength === 0) {\n      this.addShape('line', {\n        attrs: {\n          x1: x,\n          y1: y,\n          x2: x,\n          y2: y + height,\n          stroke: this.lineConfigStyle.stroke || horizontalBorderColor,\n          lineWidth: this.lineConfigStyle.lineWidth || horizontalBorderWidth,\n        },\n      });\n    }\n    if (indexCache[colIndex]) {\n      this.addShape('line', {\n        attrs: {\n          x1: x,\n          y1: y,\n          x2: x,\n          y2: y + height,\n          stroke: this.lineConfigStyle.stroke || horizontalBorderColor,\n          lineWidth: this.lineConfigStyle.lineWidth || horizontalBorderWidth,\n          opacity: this.lineConfigStyle.opacity || verticalBorderColorOpacity,\n        },\n      });\n    }\n    if (currentConfig) {\n      indexCache[colIndex + 1] = 1;\n      this.spreadsheet?.store?.set('dataIndexCache', indexCache);\n    }\n  }\n\n  drawRightBorder() {\n    const { x, y, width, valueField, colIndex, height, spreadsheet } =\n      this.meta;\n    const valueLength = spreadsheet.dataCfg.fields.values.length;\n    const currentConfig = this.lineConfig[valueField];\n    const {\n      horizontalBorderColor,\n      horizontalBorderWidth,\n      verticalBorderColorOpacity,\n    } = this.getStyle().cell;\n    if (currentConfig) {\n      this.addShape('line', {\n        attrs: {\n          x1: x + width,\n          y1: y,\n          x2: x + width,\n          y2: y + height,\n          stroke: this.lineConfigStyle.stroke || horizontalBorderColor,\n          lineWidth: this.lineConfigStyle.lineWidth || horizontalBorderWidth,\n          opacity: this.lineConfigStyle.opacity || verticalBorderColorOpacity,\n        },\n      });\n    }\n    const tagLength = [...(spreadsheet.dataSet.colPivotMeta || [])].length;\n    const shouldAddRightLine =\n      (colIndex + 1) % valueLength === 0 &&\n      colIndex + 1 !== tagLength * valueLength; // 除了表格最后一列,每个 tag 最后一个子列加 right line\n    if (shouldAddRightLine) {\n      this.addShape('line', {\n        attrs: {\n          x1: x + width,\n          y1: y,\n          x2: x + width,\n          y2: y + height,\n          stroke: this.lineConfigStyle.stroke || horizontalBorderColor,\n          lineWidth: this.lineConfigStyle.lineWidth || horizontalBorderWidth,\n        },\n      });\n    }\n  }\n}\n\nclass CustomFrame extends Frame {\n  layout() {\n    super.layout();\n    // corner右边的竖线条\n    this.addCornerRightBorder();\n  }\n\n  addCornerRightBorder() {\n    const {\n      width,\n      height,\n      viewportHeight,\n      position,\n      spreadsheet,\n      lineConfigStyle,\n    } = this.cfg;\n    const {\n      verticalBorderColor,\n      verticalBorderWidth,\n      verticalBorderColorOpacity,\n    } = spreadsheet.theme?.splitLine || {};\n    const x = position.x + width;\n    const y1 = position.y;\n    const y2 = position.y + height + viewportHeight;\n    if (spreadsheet.store.get('scrollX') > 0) {\n      // 滚动时使用默认的颜色\n      this.addShape('line', {\n        attrs: {\n          x1: x,\n          y1: y1 + height / 2 - TAG_HEIGHT,\n          x2: x,\n          y2,\n          stroke: verticalBorderColor,\n          lineWidth: verticalBorderWidth,\n          opacity: verticalBorderColorOpacity,\n        },\n      });\n    } else {\n      this.addShape('line', {\n        attrs: {\n          x1: x,\n          y1: y1 + height / 2 - TAG_HEIGHT,\n          x2: x,\n          y2,\n          stroke: lineConfigStyle?.stroke || verticalBorderColor,\n          lineWidth: lineConfigStyle?.lineWidth || verticalBorderWidth,\n        },\n      });\n    }\n  }\n\n  addSplitLineRightShadow() {\n    const {\n      width,\n      height,\n      viewportHeight,\n      position,\n      isPivotMode,\n      spreadsheet,\n      showViewPortRightShadow,\n    } = this.cfg;\n    if (!isPivotMode || spreadsheet.store.get('scrollX') === 0) {\n      return;\n    }\n    // 滚动时使用默认的颜色\n    const { showRightShadow, shadowWidth, shadowColors } =\n      spreadsheet.theme?.splitLine || {};\n    if (\n      showRightShadow &&\n      showViewPortRightShadow &&\n      spreadsheet.isFrozenRowHeader()\n    ) {\n      const x = position.x + width;\n      const y = position.y;\n      this.addShape('rect', {\n        attrs: {\n          x,\n          y: y + height / 2,\n          width: shadowWidth,\n          height: viewportHeight + height - height / 2,\n          fill: `l (0) 0:${shadowColors?.left} 1:${shadowColors?.right}`,\n        },\n      });\n    }\n  }\n}\n\nclass CustomCornelCell extends CornerCell {\n  drawTextShape() {\n    if (this.meta.cornerType === 'col') {\n      return;\n    }\n    super.drawTextShape();\n  }\n\n  drawBackgroundShape() {\n    const { backgroundColorOpacity, backgroundColor } = this.getStyle().cell;\n    const attrs = {\n      ...this.getCellArea(),\n      fill: this.meta.cornerType === 'col' ? '#FFF' : backgroundColor,\n      opacity: backgroundColorOpacity,\n    };\n    this.backgroundShape = this.addShape('rect', {\n      attrs,\n    });\n  }\n  drawBorderShape() {}\n}\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/index-comparison.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const s2DataConfig = {\n      fields: {\n        rows: ['type'],\n        columns: ['tag'],\n        values: ['price', 'uv', 'pv', 'click_uv'],\n      },\n      meta: [\n        {\n          field: 'type',\n          name: '服装服饰',\n        },\n        {\n          field: 'price',\n          name: '销售量',\n        },\n        {\n          field: 'uv',\n          name: '搜索uv',\n        },\n        {\n          field: 'pv',\n          name: '搜索pv',\n        },\n        {\n          field: 'click_uv',\n          name: '点击uv',\n        },\n      ],\n      data,\n    };\n    const getIcon = (fieldValue) => {\n      return parseFloat(fieldValue) > 0\n        ? 'CellUp'\n        : fieldValue < 0\n        ? 'CellDown'\n        : '';\n    };\n    const conditionsIcon = [\n      {\n        field: 'price',\n        mapping(fieldValue) {\n          return {\n            icon: getIcon(fieldValue),\n          };\n        },\n      },\n      {\n        field: 'uv',\n        mapping(fieldValue) {\n          return {\n            icon: getIcon(fieldValue),\n          };\n        },\n      },\n      {\n        field: 'click_uv',\n        mapping(fieldValue) {\n          return {\n            icon: getIcon(fieldValue),\n          };\n        },\n      },\n    ];\n    // 自定义文字样式\n    const getCustomTextStyle = (value, textStyle) => {\n      return {\n        fill:\n          parseFloat(value) > 0\n            ? UP_COLOR\n            : parseFloat(value) < 0\n            ? DOWN_COLOR\n            : textStyle?.fill,\n      };\n    };\n    // 列分组竖线样式配置\n    const lineConfigStyle = {\n      stroke: '#3471F9',\n      lineWidth: 1,\n      opacity: 0.5,\n    };\n    // 列分组配置\n    const lineConfig = {\n      price: 1,\n      pv: 1,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      showDefaultHeaderActionIcon: false,\n      tooltip: {\n        showTooltip: false,\n      },\n      colCell: (node, spreadsheet, ...restOptions) => {\n        return new CustomColCell(\n          node,\n          spreadsheet,\n          ...restOptions,\n          lineConfig,\n          lineConfigStyle,\n        );\n      },\n      dataCell: (viewMeta) => {\n        return new CustomDataCell(viewMeta, viewMeta.spreadsheet, {\n          lineConfig,\n          lineConfigStyle,\n          conditions: {\n            周环比差值: {\n              icon: conditionsIcon,\n            },\n            周环比率: {\n              icon: conditionsIcon,\n            },\n          },\n          textConfig: {\n            周环比差值: {\n              // 自定义文字样式\n              getCustomTextStyle,\n            },\n            周环比率: {\n              // 自定义文字formatted\n              getCustomFormattedValue: (value) => {\n                return `${parseFloat(value)?.toFixed(4) * 100}%`;\n              },\n              // 自定义文字样式\n              getCustomTextStyle,\n            },\n          },\n        });\n      },\n      cornerCell: (node, s2, headConfig) => {\n        return new CustomCornelCell(node, s2, headConfig);\n      },\n      frame: (cfg) => {\n        return new CustomFrame({ ...cfg, lineConfigStyle });\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={s2DataConfig}\n        options={s2Options}\n        sheetType=\"pivot\"\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"指标对比表",en:"Measure Comparison Sheet"},filename:"measure-comparison.tsx",isNew:!1},{id:"multiple-people-comparison",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/GVz3yaFf5O/b57857b9-a307-474a-a418-c97f627311a1.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport insertCss from 'insert-css';\nimport { ColCell } from '@antv/s2';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nconst PALETTE_COLORS = [\n  {\n    limit: -50,\n    background: 'rgb(62,144,109)',\n    color: 'black',\n  },\n  {\n    limit: -35,\n    background: 'rgb(74,181,120)',\n    color: 'black',\n  },\n  {\n    limit: -20,\n    background: 'rgb(112,196,121)',\n    color: 'black',\n  },\n  {\n    limit: -5,\n    background: 'rgb(150,212,164)',\n    color: 'black',\n  },\n  {\n    limit: 10,\n    background: 'rgb(190,226,188)',\n    color: 'black',\n  },\n  {\n    limit: 25,\n    background: 'rgb(238,229,229)',\n    color: 'black',\n  },\n  {\n    limit: 40,\n    background: 'rgb(243,187,161)',\n    color: 'white',\n  },\n  {\n    limit: 55,\n    background: 'rgb(238,154,119)',\n    color: 'white',\n  },\n  {\n    limit: 70,\n    background: 'rgb(235,123,85)',\n    color: 'white',\n  },\n  {\n    limit: 85,\n    background: 'rgb(230,91,55)',\n    color: 'white',\n  },\n  {\n    limit: 100,\n    background: 'rgb(214,61,33)',\n    color: 'white',\n  },\n];\n\nconst GROUP_COLOR = {\n  'people-group-a': 'rgb(99,133,241)',\n  'people-group-b': 'rgb(116,213,157)',\n};\n\nconst GROUP_SEPARATOR_WIDTH = 4;\n\nconst getFormatter =\n  (enablePrefix = false) =>\n  (value) => {\n    const prefix = enablePrefix && value > 0 ? '+' : '';\n    const suffix = value !== 0 ? '%' : '';\n    return `${prefix}${value}${suffix}`;\n  };\n\nconst getTargetColor = (value) =>\n  PALETTE_COLORS.find((color) => color.limit >= value) ??\n  PALETTE_COLORS[PALETTE_COLORS.length - 1];\n\nclass CustomColCell extends ColCell {\n  initCell() {\n    super.initCell();\n    this.renderGroupSeparator();\n  }\n\n  renderGroupSeparator() {\n    const { label, isLeaf } = this.meta;\n    // 只需要为 A B 群组绘制标识\n    if (!isLeaf || label === 'people-group-delta') {\n      return;\n    }\n\n    const fill = GROUP_COLOR[label];\n    const { x, y, height } = this.textShape.getBBox();\n    this.addShape('rect', {\n      attrs: {\n        x: x - GROUP_SEPARATOR_WIDTH * 1.5,\n        y,\n        height,\n        width: GROUP_SEPARATOR_WIDTH,\n        fill,\n      },\n    });\n  }\n}\n\nconst PaletteLegend = () => {\n  return (\n    <div className=\"palette-legend\">\n      <div className=\"palette-limit\">-56%</div>\n      {PALETTE_COLORS.map((color) => (\n        <span\n          key={color.background}\n          className=\"palette-color\"\n          style={{ background: color.background }}\n        />\n      ))}\n      <div className=\"palette-limit\">96.32%</div>\n    </div>\n  );\n};\n\nfetch('https://assets.antv.antgroup.com/s2/multiple-people-comparison.json')\n  .then((res) => res.json())\n  .then(({ data }) => {\n    const s2DataConfig = {\n      fields: {\n        rows: ['type', 'job'],\n        columns: ['age', 'city'],\n        values: ['people-group-a', 'people-group-b', 'people-group-delta'],\n        valueInCols: true,\n      },\n      meta: [\n        {\n          field: 'type',\n          name: '类别',\n        },\n        {\n          field: 'job',\n          name: '职业',\n        },\n        {\n          field: 'age',\n          name: '年龄分布',\n        },\n        {\n          field: 'city',\n          name: '所在城市',\n        },\n        {\n          field: 'people-group-a',\n          name: 'A人群',\n          formatter: getFormatter(),\n        },\n        {\n          field: 'people-group-b',\n          name: 'B人群',\n          formatter: getFormatter(),\n        },\n        {\n          field: 'people-group-delta',\n          name: '差值',\n          formatter: getFormatter(true),\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      tooltip: {\n        operation: {\n          trend: true,\n          hiddenColumns: true,\n        },\n      },\n      interaction: {\n        selectedCellsSpotlight: true,\n        hoverHighlight: false,\n      },\n      style: {\n        layoutWidthType: 'colAdaptive',\n        cellCfg: {\n          width: 100,\n        },\n      },\n      conditions: {\n        text: [\n          {\n            field: 'people-group-delta',\n            mapping(value) {\n              const { color } = getTargetColor(value);\n              return {\n                fill: color,\n              };\n            },\n          },\n        ],\n        background: [\n          {\n            field: 'people-group-delta',\n            mapping(value) {\n              const { background } = getTargetColor(value);\n              return {\n                fill: background,\n              };\n            },\n          },\n        ],\n      },\n      colCell(viewMeta, spreadsheet, headerConfig) {\n        return new CustomColCell(viewMeta, spreadsheet, headerConfig);\n      },\n    };\n\n    const theme = {\n      dataCell: {\n        // 父节点\n        bolderText: {\n          fill: 'rgb(84,84,84)',\n        },\n        // 子节点\n        text: {\n          fill: 'rgb(84,84,84)',\n        },\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={s2DataConfig}\n        options={s2Options}\n        sheetType=\"pivot\"\n        themeCfg={{ theme }}\n        header={{\n          title: '多人群对比表',\n          extra: [<PaletteLegend />],\n        }}\n      />,\n      document.getElementById('container'),\n    );\n  });\n\ninsertCss(`\n\n  .ant-page-header {\n    margin: 0 !important;\n    padding: 0 !important;\n  }\n\n  .palette-legend {\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    margin-top: 8px;\n  }\n\n  .palette-color {\n    width: 12px;\n    height: 12px;\n  }\n\n  .palette-limit{\n    font-size: 12px;\n    color: rgb(94,94,94);\n  }\n\n  .palette-color + .palette-limit {\n    margin-left: 5px;\n  }\n\n  .palette-limit + .palette-color {\n    margin-left: 5px;\n  }\n`);\n",title:{zh:"多人群对比表",en:"Multiple People Comparison Sheet"},filename:"multiple-people-comparison.tsx",isNew:!1},{id:"time-spend",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/dTESDSdF%262/a364a2c2-c4e1-4b01-a616-927bf41d7a86.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport insertCss from 'insert-css';\nimport { SheetComponent } from '@antv/s2-react';\nimport { DataCell, Frame } from '@antv/s2';\nimport '@antv/s2-react/dist/style.min.css';\n\nconst paletteLegendMap = [\n  {\n    text: '睡觉',\n    color: '#6974EF',\n  },\n  {\n    text: '工作',\n    color: '#18E7CF',\n  },\n\n  {\n    text: '上学',\n    color: '#89E48A',\n  },\n  {\n    text: '吃饭',\n    color: '#FAE232',\n  },\n  {\n    text: '学习',\n    color: '#FAA140',\n  },\n  {\n    text: '娱乐',\n    color: '#E491BA',\n  },\n  {\n    text: '运动',\n    color: '#61AEFE',\n  },\n  {\n    text: '其他',\n    color: '#FAD5BB',\n  },\n];\n\n// 自定义单元格\nclass CustomDataCell extends DataCell {\n  initCell() {\n    this.drawInteractiveBgShape();\n    this.drawCircle();\n    this.drawBorderShape();\n    if (JSON.stringify(this.meta.colQuery).includes('合计')) {\n      this.drawTextShape();\n    }\n    this.update();\n  }\n  drawCircle() {\n    const radius = 12;\n    const { x, y, height, width, fieldValue, colQuery } = this.meta;\n    const positionX = x + width / 2;\n    const positionY = y + height / 2;\n\n    let fill;\n    let opacity = 1;\n    if (!isNaN(fieldValue)) {\n      fill =\n        paletteLegendMap.find((v) => v.text === colQuery['时刻'])?.color ??\n        '#FAD5BB';\n      opacity = 0.5;\n    } else {\n      fill =\n        paletteLegendMap.find((v) => v.text === fieldValue)?.color ?? '#FAD5BB';\n    }\n    this.backgroundShape = this.addShape('circle', {\n      attrs: {\n        x: positionX,\n        y: positionY,\n        width,\n        height,\n        fill,\n        opacity,\n        r: radius,\n      },\n    });\n  }\n}\n\n// 自定义分割线\nclass CustomFrame extends Frame {\n  layout() {\n    super.layout();\n    // 水平二级分割线\n    this.addHorizontalSplitLine();\n    // 垂直二级分割线\n    this.addVerticalSplitLine();\n  }\n  addHorizontalSplitLine() {\n    const cfg = this.cfg;\n    const {\n      width,\n      height,\n      viewportWidth,\n      position,\n      scrollX,\n      scrollContainsRowHeader,\n      spreadsheet,\n    } = cfg;\n    const splitLine = spreadsheet.theme?.splitLine;\n    const { rowsHierarchy } = spreadsheet.facet.layoutResult;\n    const rootNodes = rowsHierarchy.getNodesLessThanLevel(0);\n    rootNodes.forEach((node, key) => {\n      if (key < rootNodes.length - 1) {\n        const { children } = node;\n        const lastChild = children[children.length - 1];\n        const x1 = position.x;\n        const x2 =\n          x1 + width + viewportWidth + (scrollContainsRowHeader ? scrollX : 0);\n        const y = position.y + height + lastChild.y + lastChild.height;\n        this.addShape('line', {\n          attrs: {\n            x1,\n            y1: y,\n            x2,\n            y2: y,\n            stroke: splitLine.verticalBorderColor,\n            lineWidth: 1,\n            opacity: splitLine.verticalBorderColorOpacity,\n          },\n        });\n      }\n    });\n  }\n\n  addVerticalSplitLine() {\n    const cfg = this.cfg;\n    const { height, viewportHeight, position, width, spreadsheet } = cfg;\n    const splitLine = spreadsheet.theme?.splitLine;\n    const { colsHierarchy } = spreadsheet.facet.layoutResult;\n    const rootNodes = colsHierarchy.getNodesLessThanLevel(0);\n    rootNodes.forEach((node, key) => {\n      if (key < rootNodes.length - 1) {\n        const { children } = node;\n        const lastChild = children[children.length - 1];\n        const x = lastChild.x + lastChild.width + width;\n        const y1 = position.y;\n        const y2 = position.y + height + viewportHeight;\n        this.addShape('line', {\n          attrs: {\n            x1: x,\n            y1,\n            x2: x,\n            y2,\n            stroke: splitLine.verticalBorderColor,\n            lineWidth: 1,\n            opacity: splitLine.verticalBorderColorOpacity,\n          },\n        });\n      }\n    });\n  }\n}\n\nfetch('https://assets.antv.antgroup.com/s2/time-spend.json')\n  .then((res) => res.json())\n  .then((s2DataConfig) => {\n    const s2Palette = {\n      basicColors: [\n        '#FFFFFF',\n        '#020138',\n        'rgba(255,255,255,0.18)',\n        '#020138',\n        'rgba(255,255,255,0.18)',\n        '#7232CF',\n        '#7232CF',\n        '#AB76F7',\n        '#020138',\n        'rgba(255,255,255,0)',\n        'rgba(255,255,255,0)',\n        '#FFFFFF',\n        '#FFFFFF',\n        '#FFFFFF',\n        '#FFFFFF',\n      ],\n      // ---------- semantic colors ----------\n      semanticColors: {\n        red: '#FF4D4F',\n        green: '#29A294',\n      },\n    };\n    const s2Theme = {\n      colCell: {\n        bolderText: {\n          fontSize: 12,\n          textAlign: 'center',\n          fontWeight: 'normal',\n        },\n\n        cell: {\n          horizontalBorderColorOpacity: 0.3,\n          verticalBorderColorOpacity: 0.3,\n        },\n      },\n      rowCell: {\n        text: {\n          textAlign: 'right',\n        },\n        cell: {\n          horizontalBorderColorOpacity: 0.3,\n          verticalBorderColorOpacity: 0.3,\n        },\n      },\n      dataCell: {\n        text: {\n          textAlign: 'center',\n        },\n        cell: {\n          horizontalBorderColorOpacity: 0.3,\n          verticalBorderColorOpacity: 0.3,\n        },\n      },\n      cornerCell: {\n        bolderText: {\n          textAlign: 'right',\n        },\n        cell: {\n          horizontalBorderColorOpacity: 0.3,\n          verticalBorderColorOpacity: 0.3,\n        },\n      },\n      splitLine: {\n        horizontalBorderColorOpacity: 0.3,\n        horizontalBorderWidth: 2,\n\n        shadowColors: {\n          left: 'rgba(255,255,255, 0.3)',\n          right: 'rgba(255,255,255, 0.01)',\n        },\n      },\n    };\n\n    const s2Options = {\n      width: 1150,\n      height: 420,\n      showDefaultHeaderActionIcon: false,\n      dataCell: (viewMeta) => {\n        return new CustomDataCell(viewMeta, viewMeta?.spreadsheet);\n      },\n      frame: (cfg) => {\n        return new CustomFrame(cfg);\n      },\n      style: {\n        layoutWidthType: 'compact',\n        colCfg: {\n          hideMeasureColumn: true,\n        },\n        cellCfg: {\n          width: 40,\n          height: 40,\n        },\n      },\n    };\n    const PaletteLegend = () => (\n      <div className=\"palette\">\n        {paletteLegendMap.map((value, key) => (\n          <div key={key} className=\"palette-group\">\n            <span\n              className=\"palette-color\"\n              style={{ background: value.color }}\n            />\n            <span className=\"palette-text\">{value.text}</span>\n          </div>\n        ))}\n      </div>\n    );\n    ReactDOM.render(\n      <div className=\"sheet-wrapper\">\n        <PaletteLegend />\n        <SheetComponent\n          dataCfg={s2DataConfig}\n          options={s2Options}\n          sheetType=\"pivot\"\n          themeCfg={{ theme: s2Theme, palette: s2Palette }}\n        />\n      </div>,\n      document.getElementById('container'),\n    );\n  });\n\ninsertCss(`\n  .sheet-wrapper {\n    background: #010138;\n    padding: 16px;\n  }\n  .palette {\n    display: flex;\n    width: 100%;\n    overflow: hidden;\n    margin-bottom: 16px;\n  }\n  .palette-group {\n    display: flex;\n  }\n  .palette-color {\n    width: 16px;\n    height: 16px;\n    border-radius: 50%;\n    \n  }\n  .palette-text {\n    color: #FFF;\n    width: 50px;\n    font-size: 12px;\n    padding-left: 8px;\n  }\n`);\n",title:{zh:"想如何度过一天",en:"How to spend the day"},filename:"time-spend.tsx",isNew:!1},{id:"philosophers",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/lnIo05mgw%26/1e369f72-be9b-4be8-804d-33445bf72d41.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { max, min, replace } from 'lodash';\nimport insertCss from 'insert-css';\n\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nconst PALETTE_COLORS = [\n  '#B8E1FF',\n  '#9AC5FF',\n  '#7DAAFF',\n  '#5B8FF9',\n  '#3D76DD',\n  '#085EC0',\n  '#0047A5',\n  '#00318A',\n  '#001D70',\n];\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/24cac0f7-70f0-4131-be61-df11da3ca921.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const weights = data.map((item) => item.weight);\n    const maxWeight = max(weights);\n    const minWeight = min(weights);\n    const weightSpan = maxWeight - minWeight;\n\n    const PaletteLegend = () => (\n      <div className=\"legend\">\n        <div className=\"legend-limit\">{minWeight.toFixed(2)}</div>\n        {PALETTE_COLORS.map((color, index) => (\n          <span\n            key={index}\n            className=\"legend-color\"\n            style={{ background: color }}\n          />\n        ))}\n        <div className=\"legend-limit\">{maxWeight.toFixed(2)}</div>\n      </div>\n    );\n\n    const getFormatter = (val) => {\n      if (val < 0) {\n        return `公元前${replace(val, '-', '')}年`;\n      } else {\n        return `${val}年`;\n      }\n    };\n\n    const s2DataConfig = {\n      fields: {\n        rows: ['country', 'name', 'start', 'end', 'points', 'word'],\n        columns: [],\n        values: ['weight'],\n      },\n      meta: [\n        {\n          field: 'word',\n          name: '关键词',\n        },\n        {\n          field: 'points',\n          name: '观点',\n        },\n        {\n          field: 'name',\n          name: '姓名',\n        },\n        {\n          field: 'country',\n          name: '国家',\n        },\n        {\n          field: 'start',\n          name: '出生',\n          formatter: getFormatter,\n        },\n        {\n          field: 'end',\n          name: '逝世',\n          formatter: getFormatter,\n        },\n        {\n          field: 'weight',\n          name: '权重',\n          formatter: (val) => val.toFixed(2),\n        },\n      ],\n      data,\n    };\n    const TooltipContent = (props) => {\n      const { rowQuery, fieldValue } = props;\n      const { name, country, start, end, points } = rowQuery;\n      const ponitsLines = points.split('&');\n      return (\n        <div className=\"antv-s2-tooltip-container\">\n          <div className=\"antv-s2-tooltip-head-info-list\">\n            <div>姓名：{name}</div>\n            <div>国家：{country}</div>\n            <div>出生：{getFormatter(start)}</div>\n            <div>逝世：{getFormatter(end)}</div>\n            {ponitsLines.length > 1 ? (\n              <div>\n                观点:\n                {ponitsLines.map((point, index) => (\n                  <div>\n                    {index + 1}: {point}\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div>观点: {ponitsLines[0]}</div>\n            )}\n          </div>\n          <div className=\"antv-s2-tooltip-divider\"></div>\n          <div className=\"antv-s2-tooltip-detail-list\">\n            <div className=\"antv-s2-tooltip-detail-item\">\n              <span className=\"antv-s2-tooltip-detail-item-key\">权重</span>\n              <span className=\"antv-s2-tooltip-detail-item-val\">\n                {fieldValue}\n              </span>\n            </div>\n          </div>\n        </div>\n      );\n    };\n    const s2Options = {\n      width: '',\n      height: 400,\n      conditions: {\n        text: [\n          {\n            field: 'weight',\n            mapping(value) {\n              if (value >= 20) {\n                return {\n                  fill: '#fff',\n                };\n              }\n            },\n          },\n        ],\n        background: [\n          {\n            field: 'weight',\n            mapping(value) {\n              let backgroundColor;\n              const colorIndex =\n                Math.floor(\n                  (((value - minWeight) / weightSpan) * 100) /\n                    PALETTE_COLORS.length,\n                ) - 1;\n              if (colorIndex <= 0) {\n                backgroundColor = PALETTE_COLORS[0];\n              } else if (colorIndex >= PALETTE_COLORS.length) {\n                backgroundColor = PALETTE_COLORS[PALETTE_COLORS.length - 1];\n              } else {\n                backgroundColor = PALETTE_COLORS[colorIndex];\n              }\n\n              return {\n                fill: backgroundColor,\n              };\n            },\n          },\n        ],\n      },\n      interaction: {\n        selectedCellsSpotlight: false,\n        hoverHighlight: false,\n      },\n    };\n\n    const onDataCellMouseUp = (value) => {\n      const viewMeta = value?.viewMeta;\n      if (!viewMeta) {\n        return;\n      }\n\n      const position = {\n        x: value.event.clientX,\n        y: value.event.clientY,\n      };\n      viewMeta.spreadsheet.tooltip.show({\n        position,\n        content: TooltipContent(viewMeta),\n      });\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={s2DataConfig}\n        options={s2Options}\n        adaptive={true}\n        header={{\n          title: '哲学家的观点',\n          extra: [<PaletteLegend />],\n        }}\n        onDataCellMouseUp={onDataCellMouseUp}\n      />,\n\n      document.getElementById('container'),\n    );\n  });\n\ninsertCss(`\n  .ant-page-header-compact {\n    width: 100% ;\n  }\n  .legend {\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    margin-bottom: 8px;\n  }\n  .legend-color {\n    width: 12px;\n    height: 12px;\n  }\n\n  .legend-limit{\n    font-size: 12px;\n    color: rgb(94,94,94);\n  }\n\n  .legend-color + .legend-limit {\n    margin-left: 5px;\n  }\n\n  .legend-limit + .legend-color {\n    margin-left: 5px;\n  }\n  .s2-header {\n    margin:0px !important;\n  }\n`);\n",title:{zh:"哲学家的观点",en:"Points of Philosophers"},filename:"philosophers.tsx",isNew:!1}],icon:"",id:"comparison",title:{en:"Comparison Sheet",zh:"对比表"},childrenKey:"demos",order:1},{demos:[{id:"basic",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/BLitStN%24sR/196f5853-98cf-414f-af83-16b9c594c377.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { merge } from 'lodash';\nimport { DataCell, measureTextWidth } from '@antv/s2';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\n// 进度条\nconst PROGRESS_BAR = {\n  width: 80,\n  height: 10,\n  innerHeight: 6,\n};\n\n// 期望线\nconst EXPECTED_LINE = {\n  width: 1,\n  height: 12,\n  color: '#000',\n};\n\n// 当前进度状态颜色\nconst STATUS_COLOR = {\n  healthy: '#30BF78',\n  late: '#FAAD14',\n  danger: '#F4664A',\n};\n\nconst DERIVE_COLOR = {\n  up: '#F4664A',\n  down: '#30BF78',\n};\n\n// 间距\nconst PADDING = 10;\n\nfunction getStatusColorByProgress(realProgress, expectedProgress) {\n  const leftWorker = expectedProgress - realProgress;\n  if (leftWorker <= 0.1) {\n    return STATUS_COLOR.healthy;\n  }\n  if (leftWorker > 0.1 && leftWorker <= 0.3) {\n    return STATUS_COLOR.late;\n  }\n  return STATUS_COLOR.danger;\n}\n\nconst CONTAINER_COLOR = '#E9E9E9';\n\nclass KpiStrategyDataCell extends DataCell {\n  // 重写数值单元格\n  initCell() {\n    super.initCell();\n    // 在绘制完原本的单元格后, 再绘制进度条和衍生指标\n    this.renderProgressBar();\n    this.renderDeriveValue();\n  }\n\n  // 如果是进度, 格式化为百分比 (只做 demo 示例, 请根据实际情况使用)\n  getFormattedFieldValue() {\n    const { data } = this.meta;\n    if (!data || !data.isProgress) {\n      return super.getFormattedFieldValue();\n    }\n    const formattedValue = `${data.value * 100} %`;\n    return { formattedValue, value: data.value };\n  }\n\n  // 绘制衍生指标\n  renderDeriveValue() {\n    // 通过 this.meta 拿到当前单元格的有效信息\n    const { x, width, data } = this.meta;\n    if (!data || data.isExtra) {\n      return;\n    }\n    const value = data?.compare ?? '';\n    const isDown = value.startsWith('-');\n    const color = isDown ? DERIVE_COLOR.down : DERIVE_COLOR.up;\n    const displayValue = value.replace('-', '');\n    const text = isDown ? `↓${displayValue}` : `↑${displayValue}`;\n    const textStyle = {\n      fill: color,\n      fontSize: 12,\n    };\n    // 获取当前文本坐标\n    const { maxY } = this.textShape.getBBox();\n    // 获取当前文本宽度\n    const textWidth = measureTextWidth(text, textStyle);\n    // 衍生指标靠右显示\n    const textX = x + width - textWidth - PADDING;\n    // 衍生指标和数值对齐显示\n    const textY = maxY;\n\n    this.addShape('text', {\n      attrs: {\n        x: textX,\n        y: textY,\n        text,\n        ...textStyle,\n      },\n    });\n  }\n\n  // 绘制子弹进度条\n\n  renderProgressBar() {\n    const { x, y, width, height, data } = this.meta;\n    if (!data || !data.isProgress) {\n      return;\n    }\n    const currentProgress = data.value;\n    const expectedProgress = data.expectedValue;\n\n    const currentProgressWidth = Math.min(\n      PROGRESS_BAR.width * currentProgress,\n      PROGRESS_BAR.width,\n    );\n\n    // 总进度条\n    this.addShape('rect', {\n      attrs: {\n        x: x + width - PROGRESS_BAR.width - PADDING,\n        y: y + (height - PROGRESS_BAR.height) / 2,\n        width: PROGRESS_BAR.width,\n        height: PROGRESS_BAR.height,\n        fill: CONTAINER_COLOR,\n      },\n    });\n    // 当前进度条\n    this.addShape('rect', {\n      attrs: {\n        x: x + width - PROGRESS_BAR.width - PADDING,\n        y: y + (height - PROGRESS_BAR.innerHeight) / 2,\n        width: currentProgressWidth,\n        height: PROGRESS_BAR.innerHeight,\n        fill: getStatusColorByProgress(currentProgress, expectedProgress),\n      },\n    });\n    // 期望线\n    this.addShape('line', {\n      attrs: {\n        x1:\n          x +\n          width -\n          PROGRESS_BAR.width +\n          PROGRESS_BAR.width * expectedProgress,\n        y1: y + (height - EXPECTED_LINE.height) / 2,\n        x2:\n          x +\n          width -\n          PROGRESS_BAR.width +\n          PROGRESS_BAR.width * expectedProgress,\n        y2: y + (height - EXPECTED_LINE.height) / 2 + EXPECTED_LINE.height,\n        stroke: EXPECTED_LINE.color,\n        lineWidth: EXPECTED_LINE.width,\n        opacity: 0.25,\n      },\n    });\n  }\n}\n\nfetch('https://assets.antv.antgroup.com/s2/kpi-strategy.json')\n  .then((res) => res.json())\n  .then(({ data }) => {\n    const s2DataConfig = {\n      fields: {\n        rows: ['type', 'subType'],\n        columns: ['name'],\n        values: ['value'],\n        valueInCols: true,\n      },\n      meta: [\n        {\n          field: 'type',\n          name: '指标',\n        },\n        {\n          field: 'name',\n          name: '日期',\n          formatter: (value) => value ?? '-',\n        },\n        {\n          field: 'subType',\n          name: '子类别',\n        },\n        {\n          field: 'value',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      hierarchyType: 'tree',\n      tooltip: {\n        operation: {\n          trend: true,\n          hiddenColumns: true,\n        },\n      },\n      totals: {\n        row: {\n          showSubTotals: true,\n        },\n      },\n      interaction: {\n        selectedCellsSpotlight: true,\n        hoverHighlight: true,\n      },\n      // 默认数值挂列头, 会同时显示列头和数值, 隐藏数值列, 使其列头只展示日期, 更美观\n      style: {\n        colCfg: {\n          hideMeasureColumn: true,\n        },\n        cellCfg: {\n          width: 150,\n        },\n      },\n      // 自定义角头文本\n      cornerText: '指标',\n      // 覆盖默认数值单元格, 额外绘制衍生指标和子弹图\n      dataCell: (viewMeta) =>\n        new KpiStrategyDataCell(viewMeta, viewMeta.spreadsheet),\n    };\n\n    // 覆盖默认主题, 让单元格文字靠左显示\n    const theme = {\n      dataCell: {\n        // 父节点\n        bolderText: {\n          textAlign: 'left',\n        },\n        // 子节点\n        text: {\n          textAlign: 'left',\n        },\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={s2DataConfig}\n        options={s2Options}\n        sheetType=\"pivot\"\n        themeCfg={{\n          theme: merge({}, theme),\n        }}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"KPI 趋势表",en:"KPI StrategySheet"},filename:"basic.tsx",isNew:!1},{id:"covid-trend",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/xv%2685cV97/2022-09-15%25252022.43.09.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { isNil } from 'lodash';\nimport { isUpDataValue } from '@antv/s2';\nimport { SheetComponent, SheetComponentOptions } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\n// 数据来源：https://voice.baidu.com/act/newpneumonia/newpneumonia/?from=osari_pc_1&city=%E5%9B%9B%E5%B7%9D-%E5%9B%9B%E5%B7%9D\nfetch(\n  'https://gw.alipayobjects.com/os/antfincdn/AaxWQTWBO/sichuan-covid-trend.json',\n)\n  .then((res) => res.json())\n  .then((s2DataCfg) => {\n    const s2Options: SheetComponentOptions = {\n      width: 1200,\n      height: 600,\n      placeholder: '',\n      style: {\n        cellCfg: {\n          height: 60,\n        },\n        colCfg: {\n          widthByFieldValue: { 近14日趋势图: 300 },\n        },\n      },\n      conditions: {\n        text: [\n          {\n            mapping: (value, cellInfo) => {\n              const { colIndex } = cellInfo;\n              const isNilValue = isNil(value) || value === '';\n\n              if (colIndex === 0 || isNilValue) {\n                return {\n                  fill: '#000',\n                };\n              }\n              return {\n                fill: isUpDataValue(value) ? '#FF4D4F' : '#29A294',\n              };\n            },\n          },\n        ],\n        icon: [\n          {\n            position: 'right',\n            mapping(value, cellInfo) {\n              const { colIndex } = cellInfo;\n              const isNilValue = isNil(value) || value === '';\n\n              if (colIndex === 0 || isNilValue) {\n                return null;\n              }\n              return isUpDataValue(value)\n                ? {\n                    // icon 用于指定图标条件格式所使用的 icon 类型\n                    icon: 'CellUp',\n                    fill: '#FF4D4F',\n                  }\n                : {\n                    icon: 'CellDown',\n                    fill: '#29A294',\n                  };\n            },\n          },\n        ],\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={s2DataCfg}\n        options={s2Options}\n        sheetType=\"strategy\"\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"四川疫情趋势表",en:"Covid StrategySheet"},filename:"covid-trend.tsx",isNew:!1}],icon:"",id:"kpi-strategy",title:{en:"KPI Strategy",zh:"KPI 趋势表"},childrenKey:"demos",order:3},{demos:[{id:"index",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/nVlBvKDBjT/search.gif",source:'import React, { useState, useEffect, useRef } from \'react\';\nimport ReactDOM from \'react-dom\';\nimport insertCss from \'insert-css\';\nimport {\n  TableColCell,\n  GuiIcon,\n  TableCornerCell,\n  S2Event,\n  InteractionStateName,\n  CellTypes,\n} from \'@antv/s2\';\nimport { SheetComponent } from \'@antv/s2-react\';\nimport {\n  Input,\n  Divider,\n  Space,\n  Button,\n  Modal,\n  Radio,\n  Form,\n  Popover,\n  Checkbox,\n  message,\n} from \'antd\';\nimport { get, uniq } from \'lodash\';\nimport \'@antv/s2-react/dist/style.min.css\';\nimport \'antd/es/checkbox/style/index.css\';\n\nconst { Search } = Input;\n\nconst ShowList = ({ columns, setColumns, allChecked }) => {\n  return (\n    <Popover\n      trigger="click"\n      placement="bottomRight"\n      title={\n        <div>\n          <Checkbox\n            checked={allChecked}\n            onChange={() =>\n              allChecked ? setColumns([]) : setColumns([...initColumns])\n            }\n          >\n            全选 {columns.length} / {initColumns.length}\n          </Checkbox>\n        </div>\n      }\n      content={initColumns.map((e, i) => (\n        <div key={e}>\n          <Checkbox\n            checked={columns.includes(e)}\n            onChange={() =>\n              columns.includes(e)\n                ? setColumns((fields) => fields.filter((item) => e !== item))\n                : setColumns((fields) => [...fields, e])\n            }\n          >\n            {e}\n          </Checkbox>\n        </div>\n      ))}\n    >\n      <Button>隐藏列</Button>\n    </Popover>\n  );\n};\n\nclass CustomCornerCell extends TableCornerCell {\n  drawBackgroundShape() {\n    super.drawBackgroundShape();\n  }\n\n  drawInteractiveBgShape() {\n    super.drawInteractiveBgShape();\n  }\n\n  drawTextShape() {\n    const { x, y, width: cellWidth, height: cellHeight, key } = this.meta;\n    const padding = 4;\n    this.textShape = this.addShape(\'polygon\', {\n      zIndex: 4,\n      attrs: {\n        fill: \'rgba(0,0,0,0.1)\',\n        points: [\n          [x + cellWidth - padding + 2, y + padding],\n          [x + cellWidth - padding + 2, y + cellHeight - padding],\n          [\n            x + cellWidth - padding - cellHeight + padding * 2,\n            y + cellHeight - padding,\n          ],\n        ],\n      },\n    });\n  }\n}\n\nclass CustomTableColCell extends TableColCell {\n  onIconClick;\n\n  constructor(meta, spreadsheet, headerConfig, callback) {\n    super(meta, spreadsheet, headerConfig);\n    this.onIconClick = callback;\n  }\n\n  drawTextShape() {\n    super.drawTextShape();\n\n    const { x, y, width: cellWidth, height: cellHeight } = this.meta;\n    const style = this.getStyle();\n    const iconSize = get(style, \'icon.size\');\n    const iconMargin = get(style, \'icon.margin\');\n\n    const iconX = x + cellWidth - iconSize - iconMargin?.right;\n    const iconY = y + cellHeight / 2 - iconSize / 2;\n\n    this.renderFilterIcon({\n      x: iconX,\n      y: iconY,\n      width: iconSize,\n      height: iconSize,\n    });\n  }\n\n  renderFilterIcon(position) {\n    const sortMethod = getCurrentSortMethod(\n      this.meta.value,\n      this.spreadsheet.dataCfg.sortParams,\n    );\n    /**\n     * 有值说明有加filter\n     */\n\n    const isFiltered = !!getCurrentFilterParams(\n      this.meta.value,\n      this.spreadsheet.dataCfg.filterParams,\n    ).length;\n\n    const { x, y, width, height } = position;\n    const icon = new GuiIcon({\n      name: iconMap[sortMethod.toLowerCase()],\n      x,\n      y,\n      width,\n      height,\n      fill: isFiltered ? \'#873bf4\' : \'rgb(67, 72, 91)\',\n    });\n    this.add(icon);\n\n    icon.on(\'click\', () => {\n      this.onIconClick?.({\n        meta: this.meta,\n      });\n    });\n  }\n}\n\nconst iconMap = {\n  none: \'Filter\',\n  asc: \'SortUp\',\n  desc: \'SortDown\',\n};\n\nexport const filterIcon =\n  \'<svg t="1633848048963" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="85936" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M0 0h1024L724.676923 488.369231V1024l-425.353846-141.784615v-393.846154L0 0z m196.923077 102.4l204.8 354.461538v362.338462l228.430769 63.015385V456.861538l212.676923-354.461538H196.923077z" opacity=".4" p-id="85937"></path></svg>\';\nexport const sortUp =\n  \'<svg t="1634734477742" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2208" width="200" height="200"><path d="M569.508769 653.352619l151.594419 0 0 108.819221-151.594419 0L569.508769 653.352619zM569.508769 65.693452l385.479045 0 0 108.828814L569.508569 174.522266 569.508769 65.693452 569.508769 65.693452zM569.508769 261.583239l307.513506 0 0 108.819021L569.508769 370.402259 569.508769 261.583239 569.508769 261.583239zM569.508769 457.463032l229.552363 0 0 108.821019-229.552363 0C569.508769 566.284051 569.508769 457.463032 569.508769 457.463032zM569.508769 849.232612l73.62868 0 0 108.826815-73.62868 0L569.508769 849.232612zM354.693414 427.846912l0 530.212516L203.94622 958.059428 203.94622 427.846912 62.754748 427.846912 279.308125 65.187795 495.87849 427.846912 354.693414 427.846912z" p-id="2209"></path></svg>\';\nexport const sortDown =\n  \'<svg t="1634734501800" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2875" width="200" height="200"><path d="M279.15323 958.059228l217.110799-363.160177-141.539436 0L354.724593 63.957829l-151.123938 0 0 530.943021L62.057421 594.900849 279.15323 958.059228 279.15323 958.059228zM570.078783 64.464885l386.443791 0 0 108.976114L570.078583 173.440999 570.078783 64.464885 570.078783 64.464885zM570.078783 369.594007 878.364965 369.594007l0-108.974515L570.078783 260.619492 570.078783 369.594007zM570.078783 565.747016l230.128573 0 0-108.976114L570.078783 456.770901 570.078783 565.747016 570.078783 565.747016zM570.078783 761.904621l151.972163 0L722.050945 652.930305l-151.972163 0L570.078783 761.904621zM570.078783 958.059228l73.813355 0 0-108.974315-73.813355 0L570.078783 958.059228z" p-id="2876"></path></svg>\';\n\nconst getSearchResult = (searchKey, data, columns) => {\n  if (!searchKey) {\n    return [];\n  }\n  const results = [];\n  data.forEach((row, rowId) => {\n    columns.forEach((col, colId) => {\n      if (\n        (`${row[col]}` || \'\').toLowerCase().includes(searchKey.toLowerCase())\n      ) {\n        results.push({\n          col: colId,\n          row: rowId,\n        });\n      }\n    });\n  });\n\n  return results;\n};\n\nconst initColumns = [\'province\', \'city\', \'type\', \'price\'];\n\nconst scrollToCell = (rowIndex, colIndex, options, facet, interaction) => {\n  const { frozenRowCount } = options;\n  const colsNodes = facet.layoutResult.colLeafNodes;\n\n  let offsetX = 0;\n  let offsetY = 0;\n\n  offsetY = facet.viewCellHeights.getCellOffsetY(rowIndex - 1);\n  offsetX = facet.layoutResult.colLeafNodes.find(\n    (item) => item.colIndex === colIndex,\n  )?.x;\n  if (frozenRowCount > 0 && rowIndex > frozenRowCount - 1) {\n    offsetY -= facet.getTotalHeightForRange(0, frozenRowCount - 1);\n  }\n\n  if (offsetY < 0) {\n    offsetY = 0;\n  }\n\n  facet.scrollWithAnimation({\n    offsetX: {\n      value: offsetX,\n    },\n    offsetY: {\n      value: offsetY,\n    },\n  });\n\n  interaction.changeState({\n    stateName: InteractionStateName.SELECTED,\n    cells: [\n      {\n        colIndex,\n        rowIndex,\n        id: `${String(rowIndex)}-${colsNodes[colIndex + 1].id}`,\n        type: CellTypes.DATA_CELL,\n      },\n    ],\n  });\n};\n\nconst App = ({ data }) => {\n  const onIconClick = ({ meta }) => {\n    setInteractedCol(meta.value);\n    setColModalVisible(!colModalVisible);\n  };\n  const s2Ref = useRef(null);\n  const [columns, setColumns] = React.useState(initColumns);\n\n  const [interactedCol, setInteractedCol] = useState(\'\');\n  const modalCallbackRef = useRef((e) => {});\n\n  const [options, setOptions] = useState({\n    width: 600,\n    height: 400,\n    showSeriesNumber: true,\n    interaction: {\n      enableCopy: true,\n      autoResetSheetStyle: false,\n      hoverFocus: false,\n    },\n    colCell: (item, spreadsheet, headerConfig) => {\n      if (item.colIndex === 0) {\n        return new CustomCornerCell(item, spreadsheet, headerConfig);\n      }\n      return new CustomTableColCell(\n        item,\n        spreadsheet,\n        headerConfig,\n        onIconClick,\n      );\n    },\n    customSVGIcons: [\n      {\n        name: \'Filter\',\n        svg: filterIcon,\n      },\n      {\n        name: \'SortUp\',\n        svg: sortUp,\n      },\n      {\n        name: \'SortDown\',\n        svg: sortDown,\n      },\n    ],\n    tooltip: {\n      operation: {\n        hiddenColumns: true,\n      },\n    },\n    showDefaultHeaderActionIcon: false,\n  });\n  const [dataCfg, setDataCfg] = useState({\n    fields: {\n      columns,\n    },\n    data,\n    sortParams: [],\n    filterParams: [],\n  });\n\n  useEffect(() => {\n    setDataCfg((cfg) => ({\n      ...cfg,\n      fields: { columns },\n    }));\n    s2Ref.current.render(true);\n  }, [columns.length]);\n\n  const [searchKey, setSearchKey] = useState(\'\');\n  const [searchResult, setSearchResult] = useState([]);\n  const [colModalVisible, setColModalVisible] = useState(false);\n  const [searchResultActiveIndex, setSearchResultActiveIndex] = useState(-1);\n  const [form] = Form.useForm();\n\n  const allChecked = columns.length === initColumns.length;\n\n  const focusNext = (results, currentIndex) => {\n    const length = results.length;\n    let nextIndex = currentIndex + 1;\n    if (nextIndex >= length) {\n      nextIndex = 0;\n    }\n    setSearchResultActiveIndex(nextIndex);\n    const current = results[nextIndex];\n    scrollToCell(\n      current.row,\n      current.col,\n      s2Ref.current.options,\n      s2Ref.current.facet,\n      s2Ref.current.interaction,\n    );\n  };\n\n  const focusPrev = (results) => {\n    const length = results.length;\n    let nextIndex = searchResultActiveIndex - 1;\n    if (nextIndex < 0) {\n      nextIndex = length - 1;\n    }\n    setSearchResultActiveIndex(nextIndex);\n    const current = results[nextIndex];\n    scrollToCell(\n      current.row,\n      current.col,\n      s2Ref.current.options,\n      s2Ref.current.facet,\n      s2Ref.current.interaction,\n    );\n  };\n\n  const search = (key) => {\n    let searchData = [];\n    if (s2Ref.current) {\n      searchData = s2Ref.current.dataSet.getDisplayDataSet();\n    }\n    const results = getSearchResult(key, searchData, columns);\n    setSearchResult(results);\n    setSearchResultActiveIndex(-1);\n    if (results.length > 0) {\n      focusNext(results, -1);\n    }\n  };\n\n  return (\n    <div>\n      <Space>\n        <ShowList\n          columns={columns}\n          allChecked={allChecked}\n          setColumns={setColumns}\n        />\n        <Search\n          placeholder="输入关键词搜索"\n          allowClear\n          enterButton="Search"\n          value={searchKey}\n          onChange={(e) => {\n            setSearchKey(e.target.value);\n          }}\n          onSearch={(key) => {\n            search(key);\n          }}\n        />\n\n        {searchResult.length ? (\n          <>\n            <div>{`${searchResultActiveIndex + 1}/${\n              searchResult.length + 1\n            }`}</div>\n            <Button\n              shape="circle"\n              icon={<antdIcons.ArrowLeftOutlined />}\n              onClick={() => {\n                if (searchResult.length > 0) {\n                  focusPrev(searchResult, searchResultActiveIndex);\n                }\n              }}\n            />\n            <Button\n              shape="circle"\n              icon={<antdIcons.ArrowRightOutlined />}\n              onClick={() => {\n                if (searchResult.length > 0) {\n                  focusNext(searchResult, searchResultActiveIndex);\n                }\n              }}\n            />\n          </>\n        ) : null}\n      </Space>\n\n      <Divider />\n      <SheetComponent\n        ref={s2Ref}\n        dataCfg={dataCfg}\n        options={options}\n        sheetType="table"\n        onColCellClick={(e) => {\n          // 最左侧列的格子点击后全选\n          if (e.viewMeta.colIndex === 0) {\n            s2Ref.current?.interaction.selectAll();\n          }\n        }}\n        onCopied={() => {\n          message.success(\'复制成功\');\n        }}\n      />\n      <Modal\n        title="列设置"\n        visible={colModalVisible}\n        className="antv-s2-data-preview-demo-modal"\n        onCancel={() => {\n          setColModalVisible(false);\n          form.resetFields();\n        }}\n        onOk={() => {\n          modalCallbackRef.current();\n          setColModalVisible(false);\n        }}\n      >\n        <SortPopover\n          spreadsheet={s2Ref.current}\n          fieldName={interactedCol}\n          modalCallbackRef={modalCallbackRef}\n        />\n      </Modal>\n    </div>\n  );\n};\n\nconst convertToObject = (values) => {\n  const initData = {};\n\n  values.forEach((val) => {\n    initData[val] = true;\n  });\n\n  return initData;\n};\n\n/**\n * 返回当前sortMethod  默认为NONE\n * @param fieldName\n * @param sortParams\n * @returns\n */\n\nexport const getCurrentSortMethod = (fieldName, sortParams) => {\n  return (\n    get(\n      (sortParams || []).filter((param) => param.sortFieldId === fieldName),\n      \'[0].sortMethod\',\n      \'NONE\',\n    ) || \'NONE\'\n  );\n};\n\n/**\n *\n * @param fieldName\n * @param filterParams\n * @returns\n */\nexport const getCurrentFilterParams = (fieldName, filterParams) => {\n  const filtered = get(\n    (filterParams || []).filter((param) => param.filterKey === fieldName),\n    \'[0].filteredValues\',\n    [],\n  );\n\n  return filtered;\n};\n\nconst SortPopover = ({ fieldName, spreadsheet, modalCallbackRef }) => {\n  const fieldData = React.useMemo(\n    () =>\n      uniq(\n        // slice掉第一行  （第一行是column名）\n        spreadsheet.dataSet.originData.slice(1).map((item) => item[fieldName]),\n      ),\n    [spreadsheet.dataSet.originData, fieldName],\n  );\n\n  const { sortParams, filterParams } = spreadsheet.dataCfg;\n  const [sort, setsort] = React.useState(\n    getCurrentSortMethod(fieldName, sortParams),\n  );\n  const [filtered, setfiltered] = React.useState(\n    convertToObject(getCurrentFilterParams(fieldName, filterParams)),\n  );\n  const [changed, setchanged] = React.useState({\n    sort: false,\n    filter: false,\n  });\n  const [searchKeyword, setsearchKeyword] = React.useState(\'\');\n\n  const searchedFieldData = React.useMemo(\n    () =>\n      fieldData.filter((data) => {\n        if (searchKeyword) {\n          if (typeof data === \'string\') {\n            return data.search(searchKeyword) !== -1;\n          }\n          return false;\n        }\n        return true;\n      }),\n    [searchKeyword, fieldData],\n  );\n\n  const onKeywordChange = (keyword) => {\n    // 关键词变化时将不在关键词内的值过滤\n    setsearchKeyword(keyword);\n    setchanged((old) => ({ ...old, filter: true }));\n    const newFilter = {};\n    fieldData\n      .filter(\n        (data) =>\n          !fieldData\n            .filter((field) => {\n              if (keyword) {\n                if (typeof field === \'string\') {\n                  return field.search(keyword) !== -1;\n                }\n                return false;\n              }\n              return true;\n            })\n            .includes(data),\n      )\n      .forEach((data) => {\n        newFilter[data] = true;\n      });\n    setfiltered(newFilter);\n  };\n\n  modalCallbackRef.current = () => {\n    if (changed.sort) {\n      spreadsheet.emit(S2Event.RANGE_SORT, [\n        {\n          sortFieldId: fieldName,\n          sortMethod: sort,\n        },\n      ]);\n    }\n    if (changed.filter) {\n      spreadsheet.emit(S2Event.RANGE_FILTER, {\n        filterKey: fieldName,\n        // 将Object还原成数组\n        filteredValues: Object.entries(filtered)\n          .map(([fieldValue, isFiltered]) => {\n            if (isFiltered) return fieldValue;\n          })\n          .filter(Boolean),\n      });\n    }\n    setchanged({ filter: false, sort: false });\n  };\n\n  return (\n    <Form\n      style={{ padding: \'1em\' }}\n      labelCol={{ span: 6 }}\n      wrapperCol={{ span: 18 }}\n    >\n      <Form.Item label="数据排序: " className="sort-item">\n        <Radio.Group\n          onChange={(e) => {\n            setsort(e.target.value);\n            setchanged((val) => ({ ...val, sort: true }));\n          }}\n          value={sort}\n        >\n          <Radio value={\'NONE\'}>无</Radio>\n          <Radio value={\'ASC\'}>升序</Radio>\n          <Radio value={\'DESC\'}>降序</Radio>\n        </Radio.Group>\n        ,\n      </Form.Item>\n      <Form.Item label="数值筛选: " className="filter-item">\n        <div>\n          <Input.Search\n            value={searchKeyword}\n            onChange={(e) => onKeywordChange(e.target.value)}\n            placeholder="请输入搜索关键词"\n            className="search-box"\n          />\n          <div className="check-item-list">\n            <Checkbox\n              className="check-item"\n              checked={searchedFieldData.every(\n                (fieldValue) => !filtered[fieldValue],\n              )}\n              indeterminate={\n                searchedFieldData.some((fieldValue) => !filtered[fieldValue]) &&\n                !searchedFieldData.every((fieldValue) => !filtered[fieldValue])\n              }\n              onChange={(e) => {\n                const {\n                  target: { checked },\n                } = e;\n                setchanged((val) => ({ ...val, filter: true }));\n\n                if (checked) {\n                  setfiltered((old) => {\n                    const newValue = {};\n                    searchedFieldData.forEach((fieldValue) => {\n                      newValue[fieldValue] = false;\n                    });\n                    return newValue;\n                  });\n                } else {\n                  // 将全部过滤\n                  setfiltered((old) => {\n                    const newValue = {};\n                    searchedFieldData.forEach((fieldValue) => {\n                      newValue[fieldValue] = true;\n                    });\n\n                    return newValue;\n                  });\n                }\n              }}\n            >\n              {\'全选\'}\n            </Checkbox>\n\n            {searchedFieldData.map((item) => {\n              return (\n                <Checkbox\n                  className="check-item"\n                  checked={!filtered[item]}\n                  onChange={(e) => {\n                    setchanged((old) => ({ ...old, filter: true }));\n                    setfiltered((old) => ({\n                      ...old,\n                      [item]: !e.target.checked,\n                    }));\n                  }}\n                >\n                  {item}\n                </Checkbox>\n              );\n            })}\n          </div>\n        </div>\n      </Form.Item>\n    </Form>\n  );\n};\n\nfetch(\'https://assets.antv.antgroup.com/s2/basic-table-mode.json\')\n  .then((res) => res.json())\n  .then((res) => {\n    ReactDOM.render(<App data={res} />, document.getElementById(\'container\'));\n  });\n\ninsertCss(`\n  .antv-s2-data-preview-demo-modal .filter-item{\n    margin-top: 20px;\n  }\n  .antv-s2-data-preview-demo-modal .check-item-list{\n    display: flex;\n    flex-direction: column;\n  }\n  .ant-checkbox-wrapper.check-item {\n    margin-left: 0;\n  }\n  .antv-s2-data-preview-demo-modal .search-box{\n    margin-bottom: 5px\n  }\n`);\n',title:{zh:"数据预览表",en:"Data Preview Table"},filename:"index.tsx",isNew:!1},{id:"house",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/JgAFxd5G0/maifangfengmian1.gif",source:"import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Select, InputNumber, Space } from 'antd';\nimport {\n  every,\n  filter, isNil,\n  last,\n  map,\n  omit,\n} from 'lodash';\nimport { SheetComponent } from '@antv/s2-react';\nimport insertCss from 'insert-css';\n\nconst ID_SEPARATOR = '[&]';\nconst defaultHouseInfo = {\n  name: ['15#', '16#', '21#', '22#'],\n  unit: ['1单元', '2单元'],\n  building: [1, 2, 3, 4, 5],\n  nearStreet: [true, false],\n  property: ['公寓', '住宅'],\n  toward: ['东', '南', '西', '北'],\n  level: [\n    2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22,\n    23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 34, 35, 36, 37, 38, 39,\n  ],\n  area: [92, 111, 114, 119, 120, 123, 125, 135, 138],\n};\nconst s2Options = {\n  width: 700,\n  height: 580,\n  pagination: {\n    pageSize: 50,\n    current: 1,\n  },\n  conditions: {\n    // 背景 (background) 字段标记\n    background: [\n      {\n        field: 'area',\n        mapping(value) {\n          if (value === 123 || value === 119) {\n            return {\n              // fill 是背景字段标记下唯一必须的字段，用于指定文本颜色\n              fill: '#b8e1ff',\n            };\n          }\n          return {\n            fill: '#fff',\n          };\n        },\n      },\n    ],\n  },\n};\nconst defaultSortParams = [\n  {\n    sortFieldId: 'name',\n    sortMethod: 'ASC',\n  },\n  {\n    sortFieldId: 'unit',\n    sortMethod: 'ASC',\n  },\n  {\n    sortFieldId: 'level',\n    sortFunc: (params) => {\n      const { data } = params;\n      return data.sort((a, b) => {\n        const aNum = last(a.split(ID_SEPARATOR));\n        const bNum = last(b.split(ID_SEPARATOR));\n        return aNum - bNum;\n      });\n    },\n  },\n];\nconst dataConfig = {\n  data: [],\n  describe: '如何使用 S2 买房',\n  fields: {\n    rows: [\n      'name',\n      'unit',\n      'building',\n      'level',\n      'nearStreet',\n      'toward',\n      'property',\n    ],\n    columns: [],\n    values: ['area'],\n    valueInCols: true,\n  },\n  meta: [\n    {\n      field: 'name',\n      name: '楼栋',\n    },\n    {\n      field: 'unit',\n      name: '单元号',\n    },\n    {\n      field: 'building',\n      name: '房号',\n    },\n    {\n      field: 'level',\n      name: '楼层',\n    },\n    {\n      field: 'property',\n      name: '房屋类型',\n    },\n    {\n      field: 'nearStreet',\n      name: '是否临街',\n    },\n    {\n      field: 'toward',\n      name: '朝向',\n    },\n    {\n      field: 'area',\n      name: '面积',\n    },\n    {\n      field: 'note',\n      name: '备注',\n    },\n    {\n      field: 'score',\n      name: '评分',\n    },\n  ],\n  sortParams: defaultSortParams,\n};\n\nconst SelectItem = (props) => {\n  const { data, dataName, onChange } = props;\n\n  return (\n    <Select\n      allowClear={true}\n      placeholder=\"全部\"\n      style={{ width: '150px' }}\n      onChange={(value) => {\n        onChange({\n          key: dataName,\n          value: value,\n        });\n      }}\n    >\n      {map(data, (item) => (\n        <Select.Option key={`${item}`} value={item}>\n          {`${item}`}\n        </Select.Option>\n      ))}\n    </Select>\n  );\n};\n\nconst RangeSelect = (props) => {\n  const { data, dataName, onChange } = props;\n  const min = Math.min(...data);\n  const max = Math.max(...data);\n  const [info, setInfo] = useState({ min, max });\n  const handleChange = (value, key) => {\n    const tempInfo = Object.assign({}, info);\n    tempInfo[key] = value;\n    setInfo(tempInfo);\n\n    onChange({\n      key: dataName,\n      value: [tempInfo.min, tempInfo.max],\n    });\n  };\n\n  return (\n    <Space>\n      <InputNumber\n        placeholder={'最小值'}\n        min={min}\n        max={max}\n        defaultValue={min}\n        onChange={(e) => handleChange(e, 'min')}\n      />\n      <InputNumber\n        placeholder={'最大值'}\n        min={min}\n        max={max}\n        defaultValue={max}\n        onChange={(e) => handleChange(e, 'max')}\n      />\n    </Space>\n  );\n};\n\nconst SelectList = (props) => {\n  const { filterData } = props;\n  const [filterInfo, setFilterInfo] = useState({});\n\n  const onChange = ({ key, value }) => {\n    let tempHouseInfo = Object.assign({}, filterInfo);\n    if (isNil(value)) {\n      tempHouseInfo = omit(tempHouseInfo, key);\n    } else {\n      tempHouseInfo[key] = value;\n    }\n    setFilterInfo(tempHouseInfo);\n    filterData(tempHouseInfo);\n  };\n\n  return (\n    <div className=\"select-list\">\n      {map(defaultHouseInfo, (item, key) => {\n        return (\n          <Space className=\"select-item\" key={key}>\n            <span className=\"select-label\"> {key}</span>\n            {key === 'area' || key === 'level' ? (\n              <RangeSelect data={item} dataName={key} onChange={onChange} />\n            ) : (\n              <SelectItem data={item} dataName={key} onChange={onChange} />\n            )}\n          </Space>\n        );\n      })}\n    </div>\n  );\n};\n\nconst Sheet = ({ data }) => {\n  const [dataSource, setDataSource] = useState(data);\n\n  const filterData = (filterInfo) => {\n    const result = filter(data, (item) => {\n      return every(filterInfo, (value, key) => {\n        if (key === 'area') {\n          return value[0] <= item.area && value[1] >= item.area;\n        }\n        if (key === 'level') {\n          return value[0] <= item.level && value[1] >= item.level;\n        }\n        if(key === 'nearStreet') {\n          console.log(item.nearStreet, 'item.nearStreet',  value, 'value');\n          console.log(item.nearStreet === value, 'item.nearStreet === value');\n        }\n        return item[key] === value;\n      });\n    });\n    setDataSource(result);\n  };\n\n  return (\n    <div>\n      <SelectList filterData={filterData} />\n      <SheetComponent\n        sheetType={'pivot'}\n        dataCfg={{ ...dataConfig, data: dataSource }}\n        options={s2Options}\n        showPagination={true}\n      />\n    </div>\n  );\n};\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/6420f338-9169-4b1f-b0f0-35f1a8295e67.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    ReactDOM.render(\n      <Sheet data={data} />,\n      document.getElementById('container'),\n    );\n  });\n\n// We use 'insert-css' to insert custom styles\n// It is recommended to add the style to your own style sheet files\n// If you want to copy the code directly, please remember to install the npm package 'insert-css\ninsertCss(`\n  .select-item {\n      margin: 5px 16px 0 0;\n  }\n  .select-list {\n      display: flex;\n      flex-wrap: wrap;\n      margin-bottom: 20px;\n  }\n  .select-label {\n    display: inline-block;\n    width: 80px;\n  }\n`);\n",title:{zh:"如何用 S2 买房",en:"How to buy a house with S2"},filename:"house.tsx",isNew:!1},{id:"excel",screenshot:"https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*RF2ZQoZqI80AAAAAAAAAAAAAARQnAQ",source:"import React, { useState, useEffect, useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\nimport 'antd/es/checkbox/style/index.css';\n\n\n// 初始化配置\nconst s2Options = {\n  width: 600,\n  height: 400,\n  showSeriesNumber: true,\n  tooltip: { showTooltip: false },\n  interaction: { enableCopy: true, hoverHighlight: false },\n  showDefaultHeaderActionIcon: false,\n};\n\n// 初始化数据\nconst s2DataCfg = {\n  fields: { columns: ['province', 'city', 'type', 'price'] },\n  sortParams: [],\n};\n\nconst App = ({ data }) => {\n  const S2Ref = useRef(null);\n  const [options, setOptions] = useState(s2Options);\n  const [dataCfg, setDataCfg] = useState({ ...s2DataCfg, data });\n\n\n  return (\n    <div style={{ position: 'relative' }}>\n      <SheetComponent\n        ref={S2Ref}\n        dataCfg={dataCfg}\n        options={options}\n        sheetType=\"editable\"\n      />\n    </div>\n  );\n};\n\nfetch('https://assets.antv.antgroup.com/s2/basic-table-mode.json')\n  .then((res) => res.json())\n  .then((res) => {\n    ReactDOM.render(<App data={res} />, document.getElementById('container'));\n  });\n",title:{zh:"编辑模式",en:"Edit Mode"},filename:"excel.tsx",isNew:!1}],icon:"",id:"data-preview",title:{en:"Data Preview Table",zh:"数据预览表格"},childrenKey:"demos",order:5},{demos:[{id:"mosaic",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/CT6lTXeKB6/20690319-81f8-4847-9247-c1f7e7f2d9d1.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\n// more Info https://observablehq.com/@pearmini/mosaic-antv-s2\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/7f6ebbb4-ffeb-4f6c-a763-6faa8c0ccf7a.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 700,\n      height: 575,\n      frozenRowHeader: false,\n      conditions: {\n        background: [\n          {\n            field: 'color',\n            mapping: (fill) => ({ fill }),\n          },\n        ],\n      },\n      interaction: {\n        hoverHighlight: false,\n        hoverFocus: false,\n      },\n      style: {\n        layoutWidthType: 'compact',\n        colCfg: {\n          height: 0,\n          widthByFieldValue: {\n            color: 23,\n          },\n        },\n        cellCfg: {\n          height: 23,\n        },\n      },\n    };\n\n    const customTheme = {\n      rowCell: {\n        cell: {\n          backgroundColor: dataCfg.data[0].color,\n          horizontalBorderColorOpacity: 0,\n          verticalBorderColorOpacity: 0,\n        },\n      },\n      dataCell: {\n        text: {\n          opacity: 0,\n        },\n        cell: {\n          horizontalBorderColorOpacity: 0,\n          verticalBorderColorOpacity: 0,\n        },\n      },\n      splitLine: {\n        horizontalBorderColorOpacity: 0,\n        verticalBorderColorOpacity: 0,\n      },\n      background: {\n        color: dataCfg.data[0].color,\n      },\n      scrollBar: {\n        size: 0,\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={dataCfg}\n        options={s2Options}\n        themeCfg={{ theme: customTheme }}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"马赛克",en:"Mosaic"},filename:"mosaic.tsx",isNew:!1},{id:"time-spend-abstract",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/lN8USZvMEV/f6b5e06f-5def-4db8-a9c8-826e347d0fa1.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport insertCss from 'insert-css';\nimport { SheetComponent } from '@antv/s2-react';\nimport { DataCell } from '@antv/s2';\nimport '@antv/s2-react/dist/style.min.css';\n\nconst paletteLegendMap = [\n  {\n    text: '睡觉',\n    img: 'https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*zGyiSa2A8ZMAAAAAAAAAAAAAARQnAQ',\n  },\n  {\n    text: '工作',\n    img: 'https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*RdyWRpg3hRAAAAAAAAAAAAAAARQnAQ',\n  },\n\n  {\n    text: '上学',\n    img: 'https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*1p5iTYDCkKEAAAAAAAAAAAAAARQnAQ',\n  },\n  {\n    text: '吃饭',\n    img: 'https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*XHHcSZxmR7gAAAAAAAAAAAAAARQnAQ',\n  },\n  {\n    text: '学习',\n    img: 'https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*1p5iTYDCkKEAAAAAAAAAAAAAARQnAQ',\n  },\n  {\n    text: '娱乐',\n    img: 'https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*ZRaUT55QCaoAAAAAAAAAAAAAARQnAQ',\n  },\n  {\n    text: '运动',\n    img: 'https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*xpO5Sawk8YIAAAAAAAAAAAAAARQnAQ',\n  },\n  {\n    text: '其他',\n    img: 'https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*e5A3SKifw1EAAAAAAAAAAAAAARQnAQ',\n  },\n];\n// 自定义单元格\nclass CustomDataCell extends DataCell {\n  drawTextShape() {\n    const { fieldValue } = this.meta;\n    const url =\n      paletteLegendMap.find((v) => v.text === fieldValue)?.img ??\n      'https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*e5A3SKifw1EAAAAAAAAAAAAAARQnAQ';\n    const img = new Image();\n    img.src = url;\n    const { x, y, width, height } = this.meta;\n    img.onload = () => {\n      this.textShape = this.addShape('image', {\n        attrs: {\n          x: x + (width - img?.width) / 2,\n          y: y + (height - img?.height) / 2,\n          width: img?.width ?? width,\n          height: img?.height ?? height,\n          img: url,\n        },\n      });\n    };\n  }\n}\n\nfetch('https://assets.antv.antgroup.com/s2/time-spend.json')\n  .then((res) => res.json())\n  .then((s2DataConfig) => {\n    const s2Theme = {\n      colCell: {\n        text: {\n          opacity: 0,\n        },\n        bolderText: {\n          opacity: 0,\n        },\n        cell: {\n          backgroundColor: '#020138',\n        },\n      },\n      rowCell: {\n        text: {\n          opacity: 0,\n        },\n        bolderText: {\n          opacity: 0,\n        },\n        cell: {\n          horizontalBorderColorOpacity: 0,\n          verticalBorderColorOpacity: 0,\n          backgroundColor: '#020138',\n          interactionState: {\n            // -------------- hover -------------------\n            hover: {\n              backgroundColor: 'rgba(255,255,255,0.18)',\n            },\n            // -------------- selected -------------------\n            selected: {\n              backgroundColor: 'rgba(255,255,255,0.18)',\n            },\n          },\n        },\n      },\n      dataCell: {\n        cell: {\n          horizontalBorderColorOpacity: 0,\n          verticalBorderColorOpacity: 0,\n          crossBackgroundColor: '#020138',\n          backgroundColor: '#020138',\n          interactionState: {\n            // -------------- hover -------------------\n            hover: {\n              backgroundColor: 'rgba(255,255,255,0.18)',\n            },\n            // -------------- keep hover -------------------\n            hoverFocus: {\n              backgroundColor: 'rgba(255, 255, 255, 0.18)',\n              borderOpacity: 0,\n            },\n            // -------------- selected -------------------\n            selected: {\n              backgroundColor: 'rgba(255,255,255,0.18)',\n            },\n          },\n        },\n      },\n      cornerCell: {\n        bolderText: {\n          opacity: 0,\n        },\n        cell: {\n          horizontalBorderColorOpacity: 0,\n          verticalBorderColorOpacity: 0,\n          backgroundColor: '#020138',\n        },\n      },\n      splitLine: {\n        horizontalBorderColorOpacity: 0,\n        verticalBorderColorOpacity: 0,\n      },\n      background: {\n        color: '#020138',\n      },\n    };\n\n    const s2Options = {\n      width: 1150,\n      height: 720,\n      showDefaultHeaderActionIcon: false,\n      dataCell: (viewMeta) => {\n        return new CustomDataCell(viewMeta, viewMeta?.spreadsheet);\n      },\n      interaction: {\n        hoverHighlight: false,\n      },\n      style: {\n        layoutWidthType: 'compact',\n        colCfg: {\n          hideMeasureColumn: true,\n          height: 0,\n        },\n        cellCfg: {\n          height: 80,\n        },\n      },\n    };\n    const PaletteLegend = () => (\n      <div className=\"palette\">\n        {paletteLegendMap.map((value, key) => (\n          <div key={key} className=\"palette-group\">\n            <img className=\"palette-img\" src={value.img} />\n            <span className=\"palette-text\">{value.text}</span>\n          </div>\n        ))}\n      </div>\n    );\n    ReactDOM.render(\n      <div className=\"sheet-wrapper\">\n        <PaletteLegend />\n        <SheetComponent\n          dataCfg={s2DataConfig}\n          options={s2Options}\n          sheetType=\"pivot\"\n          themeCfg={{ theme: s2Theme }}\n        />\n      </div>,\n      document.getElementById('container'),\n    );\n  });\n\ninsertCss(`\n  .sheet-wrapper {\n    background: #010138;\n    padding: 16px;\n  }\n  .palette {\n    display: flex;\n    width: 100%;\n    overflow: hidden;\n    margin-bottom: 16px;\n    margin-left: 88px;\n  }\n  .palette-group {\n    display: flex;\n  }\n  .palette-img {\n    width: auto;\n    height: 20px;\n  }\n  .palette-text {\n    color: #FFF;\n    width: 50px;\n    font-size: 12px;\n    padding-left: 8px;\n  }\n`);\n",title:{zh:"想如何度过一天 (抽象版)",en:"How to spend the day"},filename:"time-spend-abstract.tsx",isNew:!1},{id:"lost-text",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*3WDCR7PZY6MAAAAAAAAAAAAADmJ7AQ/original",source:"/* eslint-disable max-classes-per-file */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport { Tag } from 'antd';\nimport {\n  BaseEvent,\n  CellTypes,\n  getTheme,\n  InterceptType,\n  S2Event,\n  CornerCell,\n} from '@antv/s2';\n\nimport '@antv/s2-react/dist/style.min.css';\n\nconst Theme = {\n  rowCell: {\n    text: {\n      opacity: 0,\n    },\n    bolderText: {\n      opacity: 0,\n    },\n    measureText: {\n      opacity: 0,\n    },\n  },\n  colCell: {\n    text: {\n      opacity: 0,\n    },\n    bolderText: {\n      opacity: 0,\n    },\n    measureText: {\n      opacity: 0,\n    },\n  },\n  dataCell: {\n    text: {\n      opacity: 0,\n    },\n  },\n};\n\nclass CustomCornerCell extends CornerCell {\n  drawBackgroundShape() {\n    this.addShape('rect', {\n      attrs: {\n        ...this.getCellArea(),\n        fill: '#E0E9FD',\n      },\n    });\n  }\n\n  getCornerText() {\n    return '👍🏻';\n  }\n}\n\nclass CustomInteraction extends BaseEvent {\n  timer = null;\n\n  count = 0;\n\n  changeCell(cellType: CellTypes) {\n    this.count++;\n\n    const defaultTheme = getTheme(null)?.[cellType];\n    this.spreadsheet.setTheme({\n      [cellType]: defaultTheme,\n    });\n    this.spreadsheet.render(false);\n\n    if (this.count >= 3) {\n      clearInterval(this.timer);\n      this.showSuccessTips();\n    }\n  }\n\n  resetCell() {\n    this.count = 0;\n    this.spreadsheet.setTheme(Theme);\n    this.spreadsheet.render(false);\n  }\n\n  showSuccessTips() {\n    const rect = this.spreadsheet.getCanvasElement().getBoundingClientRect();\n\n    this.spreadsheet.showTooltip({\n      position: {\n        x: rect.width / 2 + rect.left,\n        y: rect.height / 2 + rect.top,\n      },\n      content: (\n        <div\n          style={{\n            padding: 20,\n            textAlign: 'center',\n          }}\n        >\n          <h3>💐 通关啦 💐</h3>\n          <p>\n            S2\n            多维交叉分析表格是多维交叉分析领域的表格解决方案，数据驱动视图，提供底层核心库、基础组件库、业务场景库，具备自由扩展的能力，让开发者既能开箱即用，也能基于自身场景自由发挥。\n          </p>\n          <p>\n            <a href=\"https://s2.antv.antgroup.com\" target=\"__blank\">\n              前往官网 https://s2.antv.antgroup.com/\n            </a>\n          </p>\n        </div>\n      ),\n    });\n    this.spreadsheet.interaction.addIntercepts([InterceptType.HOVER]);\n  }\n\n  bindEvents() {\n    // 角头: 一键三连\n    this.addCornerCellInteraction();\n    // 行头: 多选全部偶数行\n    this.addRowCellInteraction();\n    // 列头: 调整列宽/刷选全部\n    this.addColCellInteraction();\n    // 数值: 键盘方向键移动端选中单元格到右下角\n    this.addDataCellInteraction();\n  }\n\n  addCornerCellInteraction() {\n    const countMap: Record<number, CellTypes> = {\n      0: CellTypes.ROW_CELL,\n      1: CellTypes.COL_CELL,\n      2: CellTypes.DATA_CELL,\n    };\n\n    this.spreadsheet.on(S2Event.CORNER_CELL_MOUSE_DOWN, () => {\n      clearInterval(this.timer);\n      this.resetCell();\n\n      this.timer = setInterval(() => {\n        this.changeCell(countMap[this.count]);\n      }, 1000);\n    });\n\n    this.spreadsheet.on(S2Event.CORNER_CELL_MOUSE_UP, () => {\n      clearInterval(this.timer);\n\n      if (this.count < 3) {\n        this.resetCell();\n      }\n    });\n  }\n\n  addDataCellInteraction() {\n    this.spreadsheet.on(S2Event.DATA_CELL_SELECT_MOVE, (cells) => {\n      const { colIndex, rowIndex } = cells[0];\n\n      const isLastCell = colIndex === 3 && rowIndex === 7;\n      if (isLastCell) {\n        this.changeCell(CellTypes.DATA_CELL);\n      }\n    });\n  }\n\n  addColCellInteraction() {\n    this.spreadsheet.on(S2Event.LAYOUT_RESIZE_COL_WIDTH, ({ info }) => {\n      const rules = [6, 66, 666];\n      if (rules.includes(info.resizedWidth)) {\n        this.changeCell(CellTypes.COL_CELL);\n      }\n    });\n\n    this.spreadsheet.on(S2Event.COL_CELL_BRUSH_SELECTION, (colCells) => {\n      const isAllSelected =\n        colCells.length === this.spreadsheet.getColumnNodes().length;\n      if (isAllSelected) {\n        this.changeCell(CellTypes.COL_CELL);\n      }\n    });\n  }\n\n  addRowCellInteraction() {\n    this.spreadsheet.on(S2Event.GLOBAL_SELECTED, (cells) => {\n      const selectedOddRowCells = cells.filter((cell) => {\n        const meta = cell.getMeta();\n        return cell.cellType === CellTypes.ROW_CELL && meta.rowIndex % 2 !== 0;\n      });\n\n      const isAllOddRowCellsSelected = selectedOddRowCells.length === 4;\n      if (isAllOddRowCellsSelected) {\n        this.changeCell(CellTypes.ROW_CELL);\n      }\n    });\n  }\n}\n\nexport const s2Options = {\n  debug: true,\n  width: 600,\n  height: 400,\n  showSeriesNumber: false,\n  showDefaultHeaderActionIcon: false,\n  interaction: {\n    enableCopy: true,\n    // 防止 mac 触摸板横向滚动触发浏览器返回, 和移动端下拉刷新\n    overscrollBehavior: 'none',\n    brushSelection: {\n      data: true,\n      col: true,\n      row: true,\n    },\n    hoverFocus: false,\n    hoverHighlight: false,\n    customInteractions: [\n      {\n        key: 'CustomInteraction',\n        interaction: CustomInteraction,\n      },\n    ],\n  },\n  tooltip: {\n    showTooltip: false,\n  },\n  hierarchyType: 'grid',\n  style: {\n    rowCfg: {\n      width: 100,\n    },\n    cellCfg: {\n      width: 50,\n      height: 30,\n    },\n  },\n  cornerCell: (...args) => new CustomCornerCell(...args),\n};\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={dataCfg}\n        options={s2Options}\n        themeCfg={{ theme: Theme }}\n        header={{\n          description: (\n            <>\n              <h4>\n                <span>单元格的文字都消失了, 想办法让文字全部显示出来.</span>\n                <a\n                  href=\"https://codesandbox.io/s/brave-pine-kki1xp?file=/src/index.tsx\"\n                  target=\"__blank\"\n                >\n                  查看代码\n                </a>\n              </h4>\n              <ul>\n                <li>\n                  <Tag>\n                    列头可以 \"调整\" 成三个尺码: s (6px) M (66px) L (666px)\n                  </Tag>\n                </li>\n                <li>\n                  <Tag>列头10个单元格可以 \"圈\" 在一起</Tag>\n                </li>\n                <li>\n                  <Tag>行头多选, 让它显示斑马纹</Tag>\n                </li>\n                <li>\n                  <Tag>有一个数值单元格喜欢待在角落 ↑ ↓ ← →</Tag>\n                </li>\n                <li>\n                  搞不定, 试试看看\n                  <a\n                    href=\"https://s2.antv.antgroup.com/manual/advanced/interaction/basic\"\n                    target=\"__blank\"\n                  >\n                    基础交互\n                  </a>\n                  章节或试试 <Tag>长按一键三连</Tag>\n                </li>\n              </ul>\n            </>\n          ),\n        }}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"消失的文字 (交互小游戏)",en:"Lost text"},filename:"lost-text.tsx",isNew:!1}],icon:"",id:"art",title:{en:"Art Work",zh:"💡灵光乍现"},childrenKey:"demos",order:6},{demos:[{id:"basic",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/qOOrO1WEZr/41e23d54-9a21-4ef3-9609-aa46ca871d83.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { compact } from 'lodash';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nconst disableColor = '#d3d7d4';\nconst colors = [\n  '#62BF7F',\n  '#8ECB7D',\n  '#A1D17F',\n  '#C9DC81',\n  '#FBDD80',\n  '#FBB17B',\n  '#FA8672',\n  '#FB6A6D',\n];\n\nfunction getRange(data) {\n  const values = data.map((d) => d.value);\n  const compactValue = compact(values);\n  return {\n    min: Math.min(...compactValue),\n    max: Math.max(...compactValue),\n  };\n}\n\nfunction getIndex(fieldValue, rawData) {\n  const { min, max } = getRange(rawData);\n  const step = Math.floor((max - min) / (colors.length - 1));\n  return Math.floor((fieldValue - min) / step);\n}\n\nfunction getDataConfig(rawData) {\n  return {\n    fields: {\n      rows: ['size', 'name'],\n      columns: ['time'],\n      values: ['value'],\n    },\n    meta: [\n      {\n        field: 'size',\n        name: '数据规模',\n      },\n      {\n        field: 'name',\n        name: '框架名称',\n      },\n      {\n        field: 'time',\n        name: '实验次数',\n      },\n      {\n        field: 'value',\n        name: '渲染时间',\n      },\n    ],\n    data: rawData,\n  };\n}\n\nfunction getOptions(rawData) {\n  return {\n    width: 600,\n    height: 200,\n    interaction: {\n      selectedCellsSpotlight: false,\n      hoverHighlight: false,\n    },\n    conditions: {\n      background: [\n        {\n          field: 'value',\n          mapping(fieldValue) {\n            const index = getIndex(fieldValue, rawData);\n            return {\n              fill: fieldValue ? colors[index] : disableColor,\n            };\n          },\n        },\n      ],\n    },\n  };\n}\n\nfetch('https://assets.antv.antgroup.com/s2/compare.json')\n  .then((res) => res.json())\n  .then((data) => {\n    ReactDOM.render(\n      <div>\n        <h3>1000 数据规模表格渲染时间对比</h3>\n        <SheetComponent\n          dataCfg={getDataConfig(data['1000'])}\n          options={getOptions(data['1000'])}\n          sheetType=\"pivot\"\n        />\n        <h3>10,000 数据规模表格渲染时间对比</h3>\n        <SheetComponent\n          dataCfg={getDataConfig(data['10000'])}\n          options={getOptions(data['10000'])}\n          sheetType=\"pivot\"\n        />\n        <h3>1,000,000 数据规模表格渲染时间对比</h3>\n        <SheetComponent\n          dataCfg={getDataConfig(data['1000000'])}\n          options={getOptions(data['1000000'])}\n          sheetType=\"pivot\"\n        />\n      </div>,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"性能对比表",en:"Performance Compare"},filename:"basic.tsx",isNew:!1},{id:"pivot",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/aQQMy0LpzT/scroll-pivot.gif",source:"import { PivotSheet } from '@antv/s2';\n\nconst s2Options = {\n  width: 600,\n  height: 480,\n};\n\nexport function generateRawData(row, col) {\n  const res = [];\n  const rowKeys = Object.keys(row);\n  const colKeys = Object.keys(col);\n\n  for (let i = 0; i < row[rowKeys[0]]; i++) {\n    for (let j = 0; j < row[rowKeys[1]]; j++) {\n      for (let m = 0; m < col[colKeys[0]]; m++) {\n        for (let n = 0; n < col[colKeys[1]]; n++) {\n          res.push({\n            province: `p${i}`,\n            city: `c${j}`,\n            type: `type${m}`,\n            subType: `subType${n}`,\n            number: i * n,\n          });\n        }\n      }\n    }\n  }\n\n  return res;\n}\n\nconst s2DataConfig = {\n  fields: {\n    rows: ['type', 'subType'],\n    columns: ['province', 'city'],\n    values: ['number'],\n  },\n  data: generateRawData(\n    { province: 10, city: 100 },\n    { type: 10, sub_type: 100 },\n  ),\n};\nconst container = document.getElementById('container');\n\nconst s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\ns2.render();\n",title:{zh:"100w条数据性能表现-透视表",en:"Performance Pivot Sheet"},filename:"pivot.tsx",isNew:!1},{id:"table",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/vkrof17e%24O/scroll-table.gif",source:"import { TableSheet } from '@antv/s2';\n\nconst s2Options = {\n  width: 600,\n  height: 480,\n  showSeriesNumber: true,\n};\n\nexport function generateRawData(row, col) {\n  const res = [];\n\n  const rowKeys = Object.keys(row);\n  const colKeys = Object.keys(col);\n\n  for (let i = 0; i < row[rowKeys[0]]; i++) {\n    for (let j = 0; j < row[rowKeys[1]]; j++) {\n      for (let m = 0; m < col[colKeys[0]]; m++) {\n        for (let n = 0; n < col[colKeys[1]]; n++) {\n          res.push({\n            province: `p${i}`,\n            city: `c${j}`,\n            type: `type${m}`,\n            subType: `subType${n}`,\n            number: i * n,\n          });\n        }\n      }\n    }\n  }\n\n  return res;\n}\n\nconst s2DataConfig = {\n  fields: {\n    columns: ['province', 'city', 'type', 'subType', 'number'],\n  },\n  data: generateRawData(\n    { province: 100, city: 10 },\n    { type: 100, sub_type: 10 },\n  ),\n};\n\nconst container = document.getElementById('container');\n\nconst s2 = new TableSheet(container, s2DataConfig, s2Options);\n\ns2.render();\n",title:{zh:"100w条数据性能表现-明细表",en:"Performance Table Sheet"},filename:"table.tsx",isNew:!1}],icon:"",id:"performance-compare",title:{en:"Performance compare",zh:"性能对比表"},childrenKey:"demos",order:6}],childrenKey:"examples"},{id:"basic",title:{zh:"表格形态",en:"Basic Sheets"},icon:"facet",examples:[{demos:[{id:"grid",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/a6zSe1gvvy/f97ed6ec-0a5d-49b7-8492-754611d0aea6.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      // 冻结行头\n      // frozenRowHeader: true\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"平铺模式",en:"Grid mode"},filename:"grid.ts",isNew:!1},{id:"tree",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/VnOOCNzUqk/a68995cb-7e96-452a-a0da-faf4b1f9d59b.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      hierarchyType: 'tree',\n      style: {\n        // 折叠全部\n        // hierarchyCollapse: true,\n\n        // 折叠浙江省下面所有的城市\n        collapsedRows: {\n          'root[&]浙江省': true,\n        },\n      },\n\n      // 冻结行头\n      // frozenRowHeader: true\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"树状模式",en:"Tree mode"},filename:"tree.ts",isNew:!1}],icon:"",id:"pivot",title:{en:"Basic pivot table",zh:"基础透视表"},childrenKey:"demos",order:1},{demos:[{id:"table",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/jWifHNLOsB/08db1064-bb09-4d44-b42b-26aed1766545.png",source:"import { TableSheet } from '@antv/s2';\n\nfetch('https://assets.antv.antgroup.com/s2/basic-table-mode.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        columns: ['province', 'city', 'type', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      showSeriesNumber: true,\n      // seriesNumberText: '自定义序号标题',\n    };\n\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"明细表模式",en:"Table mode"},filename:"table.ts",isNew:!1},{id:"table-column-group",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*DgnhTYveL1AAAAAAAAAAAAAADmJ7AQ/original",source:"import { TableSheet } from '@antv/s2';\n\nfetch('https://assets.antv.antgroup.com/s2/basic-table-mode.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        columns: [\n          {\n            key: 'area',\n            children: ['province', 'city'],\n          },\n          'type',\n          {\n            key: 'money',\n            children: [{ key: 'price' }],\n          },\n        ],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n        {\n          field: 'area',\n          name: '位置',\n        },\n        {\n          field: 'money',\n          name: '金额',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      showSeriesNumber: true,\n    };\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"列分组",en:"Column Group"},filename:"table-column-group.ts",isNew:!1}],icon:"",id:"table",title:{en:"Basic table",zh:"基础明细表"},childrenKey:"demos",order:2}],childrenKey:"examples"},{id:"layout",title:{zh:"布局",en:"Layout"},icon:"other",examples:[{demos:[{id:"adaptive",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/cEkDC%26g%24xj/df31b66d-4a76-4e69-be5a-f467af2d337d.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      style: {\n        // 了解更多: https://s2.antv.antgroup.com/api/general/s2-options#style\n        layoutWidthType: 'adaptive',\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"行列等宽布局 (默认)",en:"Adaptive (Default)"},filename:"adaptive.ts",isNew:!1},{id:"compact",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*NN_lTpAqhQkAAAAAAAAAAAAADmJ7AQ/original",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    // 增加几条长度不一致的 mock 数据\n    dataCfg.data.at(0).number = 11111111;\n    dataCfg.data.at(6).number = 7777;\n    dataCfg.data.at(-1).number = 666666;\n\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      style: {\n        // 了解更多: https://s2.antv.antgroup.com/api/general/s2-options#style\n        layoutWidthType: 'compact',\n      },\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    // 紧凑模式下, 列头宽度为实际内容宽度 (取当前列最大值, 采样每一列前 50 条数据)\n    s2.setTheme({\n      dataCell: {\n        text: {\n          fontSize: 16,\n        },\n      },\n    });\n\n    s2.render();\n  });\n",title:{zh:"紧凑布局",en:"Compact"},filename:"compact.ts",isNew:!1},{id:"colAdaptive",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/cEkDC%26g%24xj/df31b66d-4a76-4e69-be5a-f467af2d337d.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      style: {\n        // 了解更多: https://s2.antv.antgroup.com/api/general/s2-options#style\n        layoutWidthType: 'colAdaptive',\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"列等宽布局",en:"ColAdaptive"},filename:"colAdaptive.ts",isNew:!1}],icon:"",id:"basic",title:{en:"Basic Layout",zh:"默认布局"},childrenKey:"demos",order:0},{demos:[{id:"custom-pivot-size",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/%24sNoM1o7b/8a35f685-f989-4125-aada-046f90b93969.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    // 详情请查看: https://s2.antv.antgroup.com/zh/docs/manual/advanced/custom/cell-size\n    const s2Options = {\n      width: 600,\n      height: 480,\n      hierarchyType: 'grid',\n      style: {\n        cellCfg: {\n          width: 100,\n          height: 90,\n        },\n        rowCfg: {\n          width: 100,\n          heightByField: {\n            'root[&]浙江省[&]杭州市': 30,\n            'root[&]浙江省[&]宁波市': 100,\n          },\n        },\n        colCfg: {\n          widthByFieldValue: {\n            number: 100,\n          },\n        },\n      },\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n    s2.render();\n  });\n",title:{zh:"自定义透视表行列宽高",en:"Custom PivotSheet Size"},filename:"custom-pivot-size.ts",isNew:!1},{id:"custom-table-size",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/oIjIixviI/ccba0c66-c8ba-4285-b0ec-fc776d0a4cdf.png",source:"import { TableSheet } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    // 详情请查看: https://s2.antv.antgroup.com/zh/docs/manual/advanced/custom/cell-size\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        columns: ['type', 'province', 'city', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      style: {\n        // 列头宽度始终和数值单元格一致\n        cellCfg: {\n          width: 200,\n          height: 50,\n        },\n        colCfg: {\n          height: 50,\n        },\n        // 每一行根据指标单独设置\n        rowCfg: {\n          heightByField: {\n            '1': 130,\n            '3': 60,\n            '10': 80,\n            '15': 20,\n          },\n        },\n      },\n    };\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义明细表行列宽高",en:"Custom TableSheet Height"},filename:"custom-table-size.ts",isNew:!1},{id:"custom-row-col-cell-width",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/gzR%26xlnjG/7b23ff29-0789-4420-ad23-e1df96e4489d.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    // 详情请查看: https://s2.antv.antgroup.com/zh/docs/manual/advanced/custom/cell-size\n    const s2Options = {\n      width: 600,\n      height: 480,\n      hierarchyType: 'grid',\n      style: {\n        rowCfg: {\n          // 固定配置: 行头单元格 100px\n          // width: 100,\n          // 动态配置: 叶子节点 300px, 非叶子节点 200px\n          width: (row) => {\n            console.log('row: ', row);\n            return row.isLeaf ? 300 : 200;\n          },\n        },\n        colCfg: {\n          // 固定配置: 每列 100px\n          // width: 100,\n          // 动态配置: 偶数列 100px, 奇数列 200px\n          width: (col) => {\n            console.log('col: ', col);\n            return col.colIndex % 2 === 0 ? 100 : 200;\n          },\n        },\n        cellCfg: {\n          height: 50,\n        },\n      },\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n    s2.render();\n  });\n",title:{zh:"自定义行列单元格宽度",en:"Custom Row/Column Cell Height"},filename:"custom-row-col-cell-width.ts",isNew:!1},{id:"custom-tree-row-width",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/y%26PAejhkm/e9b18b27-a6c9-4c05-b75c-83b25030d0c6.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    // 详情请查看: https://s2.antv.antgroup.com/zh/docs/manual/advanced/custom/cell-size\n    const s2Options = {\n      width: 600,\n      height: 480,\n      hierarchyType: 'tree',\n      style: {\n        treeRowsWidth: 200,\n      },\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n    s2.render();\n  });\n",title:{zh:"自定义树状结构行头宽度",en:"Custom Tree Row Width"},filename:"custom-tree-row-width.ts",isNew:!1},{id:"hide-columns",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/7uLsxYg0N/b85dc985-6a07-40fd-a73e-4f0f17e63b72.png",source:"import { TableSheet } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        columns: ['type', 'province', 'city', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      style: {\n        colCfg: {\n          height: 0,\n        },\n      },\n    };\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"隐藏列头",en:"Hide Columns"},filename:"hide-columns.ts",isNew:!1},{id:"hide-value",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*dmQ5R401jjAAAAAAAAAAAAAADmJ7AQ/original",source:"import { S2DataConfig, S2Options } from '@antv/s2';\nimport { PivotSheet } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig: S2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      style: {\n        colCfg: {\n          // 隐藏数值 (数值挂列头时生效, 即 s2DataConfig.fields.values)\n          hideMeasureColumn: true,\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"数值挂列头时隐藏数值",en:"Hide Value"},filename:"hide-value.ts",isNew:!1},{id:"only-show-row-header",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*pezZTI9lp50AAAAAAAAAAAAADmJ7AQ/original",source:"import { S2DataConfig, S2Options } from '@antv/s2';\nimport { PivotSheet } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json001215413-dev-S09001736318/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig: S2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        values: ['price'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n      ],\n      data,\n    };\n\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      style: {\n        colCfg: {\n          // 当只有行头和数值时, 隐藏数值, 可以让表格只显示行头\n          hideMeasureColumn: true,\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"只显示行头",en:"Only Show Row Header"},filename:"only-show-row-header.ts",isNew:!1}],icon:"",id:"custom",title:{en:"Custom Height & Width",zh:"自定义布局 / 行列宽高"},childrenKey:"demos",order:1},{demos:[{id:"window-adaptation",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/lAWvv3XGU/chuangkouzishiying.gif",source:"import { PivotSheet } from '@antv/s2'\nimport { debounce } from 'lodash'\n\n\nfetch(\n    'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n    .then((res) => res.json())\n    .then((dataCfg) => {\n        const container = document.getElementById('container');\n\n        const s2Options = {\n            width: 600,\n            height: 480,\n        };\n        const s2 = new PivotSheet(container, dataCfg, s2Options);\n        s2.render();\n\n        const debounceRender = debounce((width, height) => {\n            s2.changeSheetSize(width, height)\n            s2.render(false) // 不重新加载数据\n        }, 200)\n\n        new ResizeObserver(([entry] = []) => {\n            const [size] = entry.borderBoxSize || [];\n            debounceRender(size.inlineSize, size.blockSize)\n        }).observe(document.body); // 通过监听 document.body 来实现监听窗口大小变化\n    });\n\n",title:{zh:"窗口自适应",en:"Window adaptation"},filename:"window-adaptation.ts",isNew:!1},{id:"container-adaptation",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/KGzcHFhKw/rongqizishiying.gif",source:"import { PivotSheet } from '@antv/s2'\nimport { debounce } from 'lodash'\n\nfetch(\n    'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n    .then((res) => res.json())\n    .then((dataCfg) => {\n        const container = document.getElementById('container');\n        container.innerHTML = '<div style=\"width: 100%; height: 600px; display: flex; flex-flow: row nowrap; \"> ' +\n            '<p id=\"side\" style=\"flex-basis: 100px; width: 100px\"> 这是一个新的node</p> <div id=\"content\" style=\"width: 600px \"></div> ' +\n            '</div>';\n\n        const content = document.getElementById('content')\n        setTimeout(() => {\n            content.style.width = '300px';\n        }, 1000)\n\n        const s2Options = {\n            width: 600,\n            height: 480,\n        };\n        const s2 = new PivotSheet(content, dataCfg, s2Options);\n\n        s2.render();\n        const debounceRender = debounce((width, height) => {\n            s2.changeSheetSize(width, height)\n            s2.render(false) // 不重新加载数据\n        }, 200)\n\n        const resizeObserver = new ResizeObserver(([entry] = []) => {\n            const [size] = entry.borderBoxSize || [];\n            debounceRender(size.inlineSize, size.blockSize)\n        });\n        resizeObserver.observe(content);\n    });\n\n",title:{zh:"容器自适应",en:"Container adaptation"},filename:"container-adaptation.ts",isNew:!1},{id:"react-adaptive",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/tKAKwgB5r/React%252520zujianzishiying.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={dataCfg}\n        options={s2Options}\n        adaptive={{\n          width: true,\n          height: false,\n          getContainer: () => document.getElementById('container'),\n        }}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"React 组件自适应",en:"React adaptive"},filename:"react-adaptive.tsx",isNew:!1}],icon:"",id:"adaptive",title:{en:"Adaptive Layout",zh:"自适应布局"},childrenKey:"demos",order:2}],childrenKey:"examples"},{id:"theme",title:{zh:"表格主题",en:"Theme"},icon:"skin",examples:[{demos:[{id:"default",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/nDIO0OG8fv/4ff6613f-fad3-4ea6-9473-0161509f692c.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"默认",en:"Default"},filename:"default.ts",isNew:!1},{id:"colorful",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/rgLkfo4MrT/95b7fbc3-8c6e-442c-9c4b-8bf8b3c3da1d.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.setThemeCfg({ name: 'colorful' });\n\n    s2.render();\n  });\n",title:{zh:"多彩蓝",en:"Colorful blue"},filename:"colorful.ts",isNew:!1},{id:"gray",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/4rwGg8Rp3N/cf08d7dd-ab96-446e-ba8d-146de8cb6a64.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.setThemeCfg({ name: 'gray' });\n\n    s2.render();\n  });\n",title:{zh:"简约灰",en:"Simple Gray"},filename:"gray.ts",isNew:!1}],icon:"",id:"default",title:{en:"Theme",zh:"主题"},childrenKey:"demos",order:3},{demos:[{id:"custom-generate-palette",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/571bdIS6Q/CleanShot%2525202022-04-02%252520at%25252011.10.20.gif",source:"import React, { useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { getPalette, generatePalette } from '@antv/s2';\nimport { SheetComponent } from '@antv/s2-react';\nimport { ChromePicker } from 'react-color';\nimport { Button, Popover, Space } from 'antd';\n\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    function App() {\n      const [themeColor, setThemeColor] = useState('#EA1720');\n      const [themeCfg, setThemeCfg] = useState({\n        name: 'colorful',\n      });\n\n      const updatePalette = (newThemeColor) => {\n        // 使用内置的 colorful 色板作为参考色板\n        const palette = getPalette(themeCfg.name);\n        // 使用参考色板 & 主题色值生成新色板\n        const newPalette = generatePalette({\n          ...palette,\n          brandColor: newThemeColor,\n        });\n\n        // 使用新色板设置主题\n        setThemeCfg({\n          name: themeCfg.name,\n          palette: newPalette,\n        });\n      };\n\n      useEffect(() => {\n        updatePalette(themeColor);\n      }, []);\n\n      return (\n        <Space direction=\"vertical\">\n          <Space>\n            <span>当前主题色: {themeColor}</span>\n            <Popover\n              placement=\"bottomRight\"\n              content={\n                <ChromePicker\n                  disableAlpha\n                  color={themeColor}\n                  onChangeComplete={(color) => {\n                    setThemeColor(color.hex);\n                    updatePalette(color.hex);\n                  }}\n                />\n              }\n            >\n              <Button size=\"small\" style={{ marginLeft: 20 }}>\n                主题色调整\n              </Button>\n            </Popover>\n          </Space>\n          <SheetComponent\n            dataCfg={dataCfg}\n            options={s2Options}\n            themeCfg={themeCfg}\n          />\n        </Space>\n      );\n    }\n\n    ReactDOM.render(<App />, document.getElementById('container'));\n  });\n",title:{zh:"主题色自动生成色板",en:"Generate palette"},filename:"custom-generate-palette.tsx",isNew:!1},{id:"custom-palette",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/YxskohI92J/c17971dd-6dd9-4a62-85f8-c69dff908aec.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const s2Palette = {\n      basicColors: [\n        '#FFFFFF',\n        '#F8F5FE',\n        '#EDE1FD',\n        '#873BF4',\n        '#7232CF',\n        '#7232CF',\n        '#7232CF',\n        '#AB76F7',\n        '#FFFFFF',\n        '#DDC7FC',\n        '#9858F5',\n        '#B98EF8',\n        '#873BF4',\n        '#282B33',\n        '#121826',\n      ],\n\n      // ---------- semantic colors ----------\n      semanticColors: {\n        red: '#FF4D4F',\n        green: '#29A294',\n      },\n    };\n\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.setThemeCfg({ palette: s2Palette });\n    s2.render();\n  });\n",title:{zh:"自定义色板",en:"Custom palette"},filename:"custom-palette.ts",isNew:!1},{id:"custom-manual-palette",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/o2XSQLjiC/CleanShot%2525202022-04-02%252520at%25252015.35.37.gif",source:"import React, { useState, useEffect } from 'react';\nimport _ from 'lodash';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport { getPalette } from '@antv/s2';\nimport { SketchPicker } from 'react-color';\nimport { Row, Space, Input, Button, message, Popover, Table } from 'antd';\nimport copy from 'copy-to-clipboard';\n\nimport 'antd/es/table/style/index.css';\nimport 'antd/es/space/style/index.css';\nimport '@antv/s2-react/dist/style.min.css';\n\nconst s2Options = {\n  width: 500,\n  height: 300,\n  conditions: {\n    interval: [\n      {\n        field: 'number',\n        mapping: () => ({}),\n      },\n    ],\n  },\n  interaction: {\n    linkFields: ['city'],\n  },\n};\n\nconst STORE_KEY = 'S2_TEST_PALETTE';\n\n/** 色板颜色说明 */\nconst paletteDesc = [\n  '角头字体、列头字体',\n  '行头背景、数据格背景(斑马纹)',\n  '行头&数据格交互(hover、选中、十字)',\n  '角头背景、列头背景',\n  '列头交互(hover、选中)',\n  '刷选遮罩',\n  '行头 link',\n  'mini bar、resize 交互(参考线等)',\n  '数据格背景(非斑马纹)、整体表底色(建议白色)',\n  '行头边框、数据格边框',\n  '角头边框、列头边框',\n  '竖向大分割线',\n  '横向大分割线',\n  '数据格字体',\n  '行头字体、数据格交互色(hover)',\n];\n\nfunction getInitPalette() {\n  try {\n    return JSON.parse(localStorage.getItem(STORE_KEY) || '');\n  } catch (err) {}\n  return getPalette('colorful');\n}\n\nconst savePalette = _.debounce(function (palette) {\n  localStorage.setItem(STORE_KEY, JSON.stringify(palette));\n  console.log('saved');\n}, 1000);\n\nfunction useDataCfg() {\n  const [dataCfg, setDataCfg] = useState(null);\n\n  useEffect(() => {\n    fetch(\n      'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n    )\n      .then((res) => res.json())\n      .then((res) => setDataCfg(res));\n  }, []);\n\n  return dataCfg;\n}\n\nfunction ColorTable({ palette, onChange }) {\n  const columns = [\n    {\n      title: '#',\n      render(r, v, idx) {\n        return idx + 1;\n      },\n    },\n    {\n      title: '色值',\n      dataIndex: 'color',\n    },\n    {\n      title: '点击调整',\n      dataIndex: 'color',\n      render(val, _, idx) {\n        return (\n          <Popover\n            trigger=\"click\"\n            content={\n              <SketchPicker\n                disableAlpha\n                presetColors={[]}\n                color={val}\n                onChangeComplete={(evt) => {\n                  const nextBasicColors = [...palette.basicColors];\n                  nextBasicColors.splice(idx, 1, evt.hex);\n                  onChange({\n                    ...palette,\n                    basicColors: nextBasicColors,\n                  });\n                }}\n              />\n            }\n          >\n            <Row justify=\"center\">\n              <div\n                style={{\n                  width: 30,\n                  height: 30,\n                  boxShadow: `0 0 8px rgba(0, 0, 0, 0.2)`,\n                  cursor: 'pointer',\n                  backgroundColor: val,\n                }}\n              />\n            </Row>\n          </Popover>\n        );\n      },\n    },\n    {\n      title: '说明',\n      dataIndex: 'desc',\n    },\n  ];\n\n  const dataSource = palette.basicColors.map((color, idx) => ({\n    color,\n    desc: paletteDesc[idx],\n  }));\n\n  return (\n    <Table\n      size=\"small\"\n      rowKey=\"desc\"\n      bordered\n      columns={columns}\n      pagination={false}\n      dataSource={dataSource}\n    />\n  );\n}\n\nfunction App() {\n  const dataCfg = useDataCfg();\n  const [palette, setPalette] = useState(getInitPalette());\n  const [config, setConfig] = useState('');\n\n  useEffect(() => {\n    savePalette(palette);\n  }, [palette]);\n\n  if (!dataCfg) {\n    return null;\n  }\n\n  return (\n    <Space direction=\"vertical\">\n      <SheetComponent\n        dataCfg={dataCfg}\n        options={s2Options}\n        themeCfg={{ palette }}\n      />\n      <Space>\n        <Button\n          size=\"small\"\n          type=\"primary\"\n          onClick={() => {\n            copy(JSON.stringify(palette));\n            message.success('复制成功');\n          }}\n        >\n          复制当前色板配置\n        </Button>\n        <Button\n          size=\"small\"\n          danger\n          onClick={() => {\n            setPalette(getPalette('colorful'));\n          }}\n        >\n          重置为默认色板配置\n        </Button>\n      </Space>\n      <Space>\n        <Input\n          size=\"small\"\n          placeholder=\"粘贴色板 JSON 配置\"\n          onChange={(evt) => setConfig(evt.target.value)}\n          style={{\n            width: 180,\n          }}\n          value={config}\n        />\n        <Button\n          size=\"small\"\n          disabled={!config}\n          onClick={() => {\n            try {\n              const cfgObj = JSON.parse(config);\n              if (!_.isObjectLike(cfgObj)) {\n                message.error('加载错误');\n                return;\n              }\n              setPalette(cfgObj);\n              setConfig('');\n              message.success('加载成功');\n            } catch (err) {\n              message.error('加载错误');\n            }\n          }}\n        >\n          设置色板配置\n        </Button>\n      </Space>\n      <ColorTable palette={palette} onChange={setPalette} />\n    </Space>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById('container'));\n",title:{zh:"自助色板调色",en:"Manual palette"},filename:"custom-manual-palette.tsx",isNew:!1},{id:"custom-schema",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/xEL8hrZJUo/c1a79590-aeaf-484c-98c9-99980ab627ef.png",source:"import { TableSheet } from '@antv/s2';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        columns: ['province', 'city', 'type', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const BORDER_COLOR = 'rgb(39, 44, 65)';\n    const BACK_COLOR = 'rgb(67, 72, 91)';\n    const HEADER_BACK_COLOR = '#353c59';\n    const CELL_ACTIVE_BACK_COLOR = '#434c6c';\n\n    const customTheme = {\n      background: {\n        color: HEADER_BACK_COLOR,\n      },\n      cornerCell: {\n        cell: {\n          horizontalBorderColor: BORDER_COLOR,\n          verticalBorderColor: BORDER_COLOR,\n          padding: {\n            top: 12,\n            right: 8,\n            bottom: 12,\n            left: 8,\n          },\n          backgroundColor: HEADER_BACK_COLOR,\n        },\n        text: {\n          fill: '#fff',\n        },\n        bolderText: {\n          fill: '#fff',\n          opacity: 0.4,\n        },\n      },\n      splitLine: {\n        horizontalBorderColor: BORDER_COLOR,\n        horizontalBorderColorOpacity: 1,\n        horizontalBorderWidth: 2,\n        verticalBorderColor: BORDER_COLOR,\n        verticalBorderColorOpacity: 1,\n        verticalBorderWidth: 2,\n        showRightShadow: true,\n        shadowWidth: 10,\n        shadowColors: {\n          left: 'rgba(0,0,0,0.1)',\n          right: 'rgba(0,0,0,0)',\n        },\n      },\n      colCell: {\n        cell: {\n          horizontalBorderColor: BORDER_COLOR,\n          verticalBorderColor: BORDER_COLOR,\n          verticalBorderWidth: 2,\n          horizontalBorderWidth: 2,\n          padding: {\n            top: 12,\n            right: 8,\n            bottom: 12,\n            left: 8,\n          },\n          backgroundColor: HEADER_BACK_COLOR,\n          interactionState: {\n            hover: {\n              backgroundColor: CELL_ACTIVE_BACK_COLOR,\n              backgroundOpacity: 1,\n            },\n            selected: {\n              backgroundColor: 'rgb(63, 69, 97)',\n            },\n          },\n        },\n        text: {\n          fill: '#fff',\n        },\n        bolderText: {\n          fill: '#fff',\n          opacity: 0.4,\n        },\n      },\n      dataCell: {\n        icon: {\n          size: 14,\n          margin: {\n            left: 10,\n          },\n        },\n        cell: {\n          interactionState: {\n            hover: {\n              backgroundColor: CELL_ACTIVE_BACK_COLOR,\n              backgroundOpacity: 1,\n            },\n            hoverFocus: {\n              backgroundColor: CELL_ACTIVE_BACK_COLOR,\n              backgroundOpacity: 1,\n              borderColor: 'blue',\n            },\n            selected: {\n              backgroundColor: CELL_ACTIVE_BACK_COLOR,\n              backgroundOpacity: 1,\n            },\n            unselected: {\n              backgroundOpacity: 1,\n              opacity: 1,\n            },\n            prepareSelect: {\n              borderColor: CELL_ACTIVE_BACK_COLOR,\n            },\n          },\n          horizontalBorderColor: BORDER_COLOR,\n          verticalBorderColor: BORDER_COLOR,\n          verticalBorderWidth: 2,\n          horizontalBorderWidth: 2,\n          padding: {\n            top: 0,\n            right: 8,\n            bottom: 2,\n            left: 0,\n          },\n          backgroundColorOpacity: 0.9,\n          backgroundColor: BACK_COLOR,\n          crossBackgroundColor: BACK_COLOR,\n        },\n        text: {\n          fill: '#fff',\n        },\n      },\n    };\n\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n\n    s2.setTheme(customTheme);\n\n    s2.render();\n  });\n",title:{zh:"自定义 schema",en:"Custom schema"},filename:"custom-schema.ts",isNew:!1},{id:"custom-transparent-background",screenshot:"https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*4adQSLv95OkAAAAAAAAAAAAAARQnAQ",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const cellTheme = {\n      cell: {\n        backgroundColorOpacity: 0,\n        verticalBorderColorOpacity: 0,\n        horizontalBorderColorOpacity: 0,\n      },\n    };\n\n    // https://s2.antv.antgroup.com/zh/docs/api/general/S2Theme#s2theme\n    const s2Theme = {\n      background: {\n        opacity: 0,\n      },\n      rowCell: cellTheme,\n      colCell: cellTheme,\n      dataCell: cellTheme,\n      cornerCell: cellTheme,\n    };\n\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.setTheme(s2Theme);\n    s2.render();\n  });\n",title:{zh:"透明背景",en:"Transparent background"},filename:"custom-transparent-background.ts",isNew:!1}],icon:"",id:"custom",title:{en:"Custom Theme",zh:"自定义主题"},childrenKey:"demos",order:4}],childrenKey:"examples"},{id:"interaction",title:{zh:"表格交互",en:"Interaction"},icon:"block",examples:[{demos:[{id:"hover",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/l23NpRrPmF/hover.gif",source:"import { PivotSheet, S2Options } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        // 悬停高亮\n        hoverHighlight: true,\n        // 等同于\n        // hoverHighlight: {\n        //   rowHeader = true, // 高亮悬停格子所在行头\n        //   colHeader = true, // 高亮悬停格子所在列头\n        //   currentRow = true, // 高亮悬停格子所在行\n        //   currentCol = true, // 高亮悬停格子所在列\n        // },\n      },\n      tooltip: {\n        showTooltip: true,\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"行列联动高亮",en:"Hover Highlighting"},filename:"hover.ts",isNew:!1},{id:"data-cell-click-selection",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/0lw2grIHZN/click.gif",source:"import { PivotSheet, S2Event, S2Options } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: true,\n        // 高亮选中单元格\n        selectedCellsSpotlight: true,\n        // 多选 (按住 Ctrl/Command), 默认开启\n        multiSelection: true,\n      },\n      tooltip: {\n        showTooltip: true,\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.on(S2Event.GLOBAL_SELECTED, (cells) => {\n      console.log('selected', cells);\n    });\n\n    s2.render();\n  });\n",title:{zh:"数值单元格单选/多选",en:"Data Cell Click Highlighting"},filename:"data-cell-click-selection.ts",isNew:!1},{id:"header-cell-click-selection",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/XYZaL1w%24M/Kapture%2525202022-04-15%252520at%25252011.45.55.gif",source:"import { PivotSheet, S2Event, S2Options } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    // 试试 (按住 Ctrl/Command) 对行列头进行多选\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: true,\n        // 高亮选中单元格\n        selectedCellsSpotlight: true,\n        // 多选 (按住 Ctrl/Command), 默认开启\n        multiSelection: true,\n      },\n      tooltip: {\n        showTooltip: true,\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    // 也可以监听全局的选中事件\n    s2.on(S2Event.GLOBAL_SELECTED, (cells) => {\n      console.log('selected', cells);\n    });\n\n    s2.render();\n  });\n",title:{zh:"行列头单选/多选",en:"Header Cell Highlighting"},filename:"header-cell-click-selection.ts",isNew:!1},{id:"data-cell-range-selection",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/RcIcQc7O2/Kapture%2525202022-04-15%252520at%25252011.52.52.gif",source:"import { PivotSheet, S2Event, S2Options } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    // 试试选中一个单元格, 然后按住 Shift 选中另一个单元格\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        // 高亮选中单元格\n        selectedCellsSpotlight: true,\n        // 区间多选 (按住 Shift), 默认开启\n        rangeSelection: true,\n      },\n      tooltip: {\n        showTooltip: true,\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    // 也可以监听全局的选中事件\n    s2.on(S2Event.GLOBAL_SELECTED, (cells) => {\n      console.log('selected', cells);\n    });\n\n    s2.render();\n  });\n",title:{zh:"区间多选",en:"Range Highlighting"},filename:"data-cell-range-selection.ts",isNew:!1},{id:"brush-selection",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/WBFq3TzTY9/multi-select.gif",source:"import { PivotSheet, S2Event, S2Options } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    // 支持滚动圈选, 试试圈选时鼠标向下\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: true,\n        // 高亮选中单元格\n        selectedCellsSpotlight: true,\n        // 关闭圈选\n        // brushSelection: false,\n      },\n      style: {\n        cellCfg: {\n          height: 100,\n        },\n      },\n      tooltip: {\n        showTooltip: true,\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.on(S2Event.DATA_CELL_BRUSH_SELECTION, (cells) => {\n      console.log('dataCelBrushSelection', cells);\n    });\n\n    s2.render();\n  });\n",title:{zh:"圈选",en:"Brush Selection"},filename:"brush-selection.ts",isNew:!1},{id:"brush-header",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/2wKjHcOGD/quanxuanbiaotougongneng.gif",source:"import { PivotSheet, S2Event, S2Options } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: true,\n        // 设置行头，列头，单元格都可以进行圈选 (行头,列头默认关闭)\n        brushSelection: {\n          data: true,\n          row: true,\n          col: true,\n        },\n        // 圈选功能 + 复制功能开启后，可以通过使用快捷键 `command/ctrl + c` 即可复制选中区域（局部复制）\n        enableCopy: true,\n      },\n      style: {\n        cellCfg: {\n          height: 100,\n        },\n      },\n      tooltip: {\n        showTooltip: true,\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    // 可以监听各自单元格区域的刷选事件\n    s2.on(S2Event.DATA_CELL_BRUSH_SELECTION, (cells) => {\n      console.log('dataCelBrushSelection', cells);\n    });\n    s2.on(S2Event.ROW_CELL_BRUSH_SELECTION, (cells) => {\n      console.log('rowCellBrushSelection', cells);\n    });\n    s2.on(S2Event.COL_CELL_BRUSH_SELECTION, (cells) => {\n      console.log('colCelBrushSelection', cells);\n    });\n\n    // 也可以监听全局的选中事件\n    s2.on(S2Event.GLOBAL_SELECTED, (cells) => {\n      console.log('selected', cells);\n    });\n\n    s2.render();\n  });\n",title:{zh:"行列头圈选",en:"Brush Row and Column Header"},filename:"brush-header.ts",isNew:!1},{id:"resize",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/F6l3SoxBCx/resize.gif",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: true,\n        selectedCellsSpotlight: true, // highlight selection\n      },\n      tooltip: {\n        showTooltip: true,\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"行高列宽调整",en:"Resize Height And Width"},filename:"resize.ts",isNew:!1},{id:"frozen",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/%24a16EsOCR8/frozeb.gif",source:"import { TableSheet } from '@antv/s2';\n\nfetch('https://assets.antv.antgroup.com/s2/basic-table-mode.json')\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n\n    const s2DataConfig = {\n      fields: {\n        columns: ['province', 'city', 'type', 'price'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n      ],\n      data: res,\n    };\n\n    const s2Options = {\n      width: 450,\n      height: 480,\n      showSeriesNumber: true,\n      frozenRowCount: 1, // 行头冻结数量\n      frozenColCount: 1, // 列头冻结数量\n      frozenTrailingRowCount: 1, // 列尾冻结数量\n      frozenTrailingColCount: 1, // 列尾冻结数量\n    };\n\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n    s2.render();\n  });\n",title:{zh:"明细表 - 行列冻结",en:"TableSheet - Frozen Rows And Cols"},filename:"frozen.ts",isNew:!1},{id:"frozen-row-header",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kk0ETbbbnOsAAAAAAAAAAAAADmJ7AQ/original",source:"import { PivotSheet, S2Event, S2Options } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      hierarchyType: 'tree', // 'tree' | 'grid'\n      // 默认开启行头冻结, 关闭后滚动区域为整个表格\n      frozenRowHeader: true,\n      style: {\n        rowCfg: {\n          treeRowsWidth: 400,\n          width: 200,\n        },\n        colCfg: {\n          width: 200,\n        },\n      },\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.on(S2Event.GLOBAL_SCROLL, (e) => {\n      console.log('scroll', e);\n    });\n\n    s2.on(S2Event.ROW_CELL_SCROLL, (e) => {\n      console.log('row cell scroll', e);\n    });\n\n    s2.render();\n  });\n",title:{zh:"透视表 - 行头冻结",en:"PivotSheet - Frozen Row Header"},filename:"frozen-row-header.ts",isNew:!1},{id:"auto-reset-sheet-style",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/Lb0%26u6LtAu/reset.gif",source:"import { TableSheet } from '@antv/s2';\n\nfetch(\n  'https://assets.antv.antgroup.com/s2/basic-table-mode.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        columns: ['province', 'city', 'type', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        autoResetSheetStyle: true, // 在鼠标移出表格区域后，自动 reset hover 高亮状态\n      },\n    };\n\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n    s2.render();\n  });\n",title:{zh:"自动交互状态重置",en:"Disable auto reset sheet style"},filename:"auto-reset-sheet-style.ts",isNew:!1},{id:"hover-after-scroll",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*NbG7SakRzXUAAAAAAAAAAAAADmJ7AQ/original.gif",source:"import { PivotSheet, S2Options } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      style: {\n        cellCfg: {\n          height: 100,\n        },\n      },\n      interaction: {\n        // 悬停高亮\n        hoverHighlight: true,\n        // 滚动后自动触发悬停状态\n        hoverAfterScroll: true,\n      },\n      tooltip: {\n        showTooltip: true,\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"滚动后自动触发悬停状态",en:"Trigger hover after scroll"},filename:"hover-after-scroll.ts",isNew:!1},{id:"state-theme",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*6zM5TpfV7qIAAAAAAAAAAAAADmJ7AQ/original",source:"import { PivotSheet, S2Options } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: true,\n        selectedCellHighlight: true,\n        selectedCellsSpotlight: true,\n        multiSelection: true,\n        selectedCellMove: true,\n        rangeSelection: true,\n        brushSelection: {\n          row: true,\n          col: true,\n          data: true,\n        },\n      },\n      tooltip: {\n        showTooltip: true,\n      },\n      style: {\n        rowCfg: {\n          width: 100,\n        },\n        cellCfg: {\n          width: 120,\n        },\n      },\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.setTheme({\n      // 刷选 (预选中遮罩框)\n      prepareSelectMask: {\n        backgroundColor: '#ccc',\n      },\n      // 宽高调整 (热区, 参考线)\n      resizeArea: {\n        // 热区大小, 背景色\n        size: 4,\n        background: 'rgba(0,0,0, 0.5)',\n        backgroundOpacity: 0,\n\n        // 参考线\n        guideLineColor: 'pink',\n        guideLineDisableColor: 'yellow',\n        guideLineDash: [4, 4],\n      },\n      // 滚动条\n      scrollBar: {\n        trackColor: 'rgba(0,0,0,0.01)',\n        thumbHoverColor: 'rgba(0,0,0,0.25)',\n        thumbColor: 'rgba(0,0,0,0.15)',\n        // 滑块最小宽度\n        thumbHorizontalMinSize: 32,\n        thumbVerticalMinSize: 32,\n        size: 6,\n        hoverSize: 10,\n        lineCap: 'round',\n      },\n      // 数值单元格 (其他单元格同理)\n      dataCell: {\n        cell: {\n          interactionState: {\n            // 悬停聚焦: 关闭悬停单元格时出现的 \"黑色边框\"\n            hoverFocus: {\n              // 边框设置为透明\n              borderColor: 'transparent',\n              // 或者边框透明度设置为 0\n              // borderOpacity: 0\n            },\n            // 十字悬停\n            hover: {\n              backgroundOpacity: 0.2,\n              borderColor: 'transparent',\n              borderOpacity: 1,\n            },\n            // 选中背景色/边框\n            selected: {\n              backgroundColor: 'pink',\n              borderWidth: 3,\n              borderColor: '#dcdcdc',\n              borderOpacity: 1,\n            },\n            // 未选中背景色/边框\n            unselected: {\n              backgroundOpacity: 0.5,\n              textOpacity: 0.1,\n              opacity: 0.1,\n            },\n            // 高亮效果\n            highlight: {\n              textOpacity: 0.2,\n              backgroundColor: '#f63',\n              borderColor: '#f63',\n              borderOpacity: 1,\n            },\n            // 预选 (刷选)\n            prepareSelect: {\n              borderColor: '#396',\n              borderOpacity: 1,\n            },\n          },\n        },\n      },\n    });\n\n    s2.render();\n  });\n",title:{zh:"交互主题配置",en:"Interaction state theme"},filename:"state-theme.ts",isNew:!1}],icon:"",id:"basic",title:{en:"Basic Interaction",zh:"基础交互"},childrenKey:"demos",order:1},{demos:[{id:"row-expand-depth",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/E8BAkGZo%26/2022-08-23%25252010.03.51.gif",source:"import { PivotSheet } from '@antv/s2';\n\nfunction createRadioGroup(s2) {\n  [\n    [0, '展开一级节点（省份）'],\n    [1, '展开二级节点（城市）'],\n    [2, '展开三级节点（类别）'],\n  ].forEach(([value, text]) => {\n    const radio = document.createElement('input');\n\n    radio.type = 'radio';\n    radio.name = 'rowExpandDepth';\n    radio.value = value;\n    radio.checked = value === 0;\n\n    radio.addEventListener('click', (e) => {\n      const value = e.target.value;\n      const updated = !s2.options.interaction.resize[value];\n      radio.checked = updated;\n\n      s2.setOptions({\n        style: {\n          rowExpandDepth: Number(value),\n        },\n      });\n      s2.render(false);\n    });\n\n    const label = document.createElement('label');\n    label.innerText = text;\n    label.htmlFor = 'name';\n\n    document.querySelector('#container > canvas').before(radio);\n    document.querySelector('#container > canvas').before(label);\n  });\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/e254339f-46df-4be0-81b0-a3b1e26b39ff.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      hierarchyType: 'tree',\n      style: {\n        rowExpandDepth: 0, // 展开一级维度的子节点\n      },\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n\n    createRadioGroup(s2);\n  });\n",title:{zh:"行头默认层级展开 - 透视表",en:"Row Depth Expand"},filename:"row-expand-depth.ts",isNew:!1},{id:"pivot-link-jump",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/W0bikxI2pn/link-pivot.gif",source:"import { S2Event, PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        linkFields: ['city', 'number'],\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.on(S2Event.GLOBAL_LINK_FIELD_JUMP, (data) => {\n      console.log(data);\n\n      const { key, record } = data;\n      const value = record[key];\n      const a = document.createElement('a');\n      a.target = '_blank';\n      a.href = `https://antv-s2.gitee.io/zh/docs/manual/introduction?${key}=${value}`;\n      a.click();\n      a.remove();\n    });\n\n    s2.render();\n  });\n",title:{zh:"链接跳转 - 透视表",en:"Link jump"},filename:"pivot-link-jump.ts",isNew:!1},{id:"table-link-jump",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/aygNlbA0fu/link-table.gif",source:"import { S2Event, TableSheet } from '@antv/s2';\n\nfetch(\n  'https://assets.antv.antgroup.com/s2/basic-table-mode.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        columns: ['type', 'province', 'city', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        linkFields: ['type', 'province', 'price'],\n      },\n    };\n\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n\n    s2.on(S2Event.GLOBAL_LINK_FIELD_JUMP, (data) => {\n      console.log(data);\n\n      const { key, record } = data;\n      const value = record[key];\n      const a = document.createElement('a');\n      a.target = '_blank';\n      a.href = `https://antv-s2.gitee.io/zh/docs/manual/introduction?${key}=${value}`;\n      a.click();\n      a.remove();\n    });\n\n    s2.render();\n  });\n",title:{zh:"链接跳转 - 明细表",en:"Link jump"},filename:"table-link-jump.ts",isNew:!1},{id:"custom-tree-link-jump",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*f6e6S4OUSdMAAAAAAAAAAAAADmJ7AQ/original",source:"import { S2Event, PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/custom-tree.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: [],\n        columns: ['type', 'sub_type'],\n        values: [\n          'measure-a',\n          'measure-b',\n          'measure-c',\n          'measure-d',\n          'measure-e',\n          'measure-f',\n        ],\n        customTreeItems: res.customTreeItem,\n        valueInCols: false,\n      },\n      data: res.data,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      hierarchyType: 'customTree',\n      interaction: {\n        linkFields: [\n          'custom-node-1',\n          'custom-node-2',\n          'custom-node-3',\n          'custom-node-4',\n          'custom-node-5',\n          'measure-a',\n          'measure-b',\n          'measure-c',\n          'measure-d',\n          'measure-e',\n          'measure-f',\n        ],\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.on(S2Event.GLOBAL_LINK_FIELD_JUMP, (data) => {\n      console.log(data);\n\n      const { key, record } = data;\n      const value = record[key];\n      const a = document.createElement('a');\n      a.target = '_blank';\n      a.href = `https://antv-s2.gitee.io/zh/docs/manual/introduction?${key}=${value}`;\n      a.click();\n      a.remove();\n    });\n\n    s2.render();\n  });\n",title:{zh:"链接跳转 - 自定义目录树",en:"Link jump"},filename:"custom-tree-link-jump.ts",isNew:!1},{id:"pivot-hide-columns",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/0TMss8KAY/Kapture%2525202022-02-11%252520at%25252017.52.53.gif",source:"import { PivotSheet, S2Event } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        // 透视表默认隐藏需要指定唯一列头id\n        // 可通过 `s2.getColumnNodes()` 获取列头节点查看id\n        hiddenColumnFields: ['root[&]家具[&]沙发[&]number'],\n      },\n      tooltip: {\n        showTooltip: true,\n        operation: {\n          // 开启手动隐藏, 叶子节点有效\n          hiddenColumns: true,\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.on(S2Event.LAYOUT_COLS_EXPANDED, (cell) => {\n      console.log('列头展开', cell);\n    });\n    s2.on(\n      S2Event.LAYOUT_COLS_HIDDEN,\n      (currentHiddenColumnsInfo, hiddenColumnsDetail) => {\n        console.log('列头隐藏', currentHiddenColumnsInfo, hiddenColumnsDetail);\n      },\n    );\n\n    s2.render();\n  });\n",title:{zh:"隐藏列头 - 透视表",en:"Hide pivot sheet columns"},filename:"pivot-hide-columns.ts",isNew:!1},{id:"table-hide-columns",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/nDXb10yy0v/hide.gif",source:"import { TableSheet, S2Event } from '@antv/s2';\n\nfetch(\n  'https://assets.antv.antgroup.com/s2/basic-table-mode.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        columns: ['type', 'province', 'city', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        // 默认隐藏 [省份] 和 [价格]\n        hiddenColumnFields: ['province', 'price'],\n      },\n      tooltip: {\n        showTooltip: true,\n        operation: {\n          // 开启手动隐藏\n          hiddenColumns: true,\n        },\n      },\n    };\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n\n    s2.on(S2Event.LAYOUT_COLS_EXPANDED, (cell) => {\n      console.log('列头展开', cell);\n    });\n    s2.on(\n      S2Event.LAYOUT_COLS_HIDDEN,\n      (currentHiddenColumnsInfo, hiddenColumnsDetail) => {\n        console.log('列头隐藏', currentHiddenColumnsInfo, hiddenColumnsDetail);\n      },\n    );\n\n    s2.render();\n  });\n",title:{zh:"隐藏列头 - 明细表",en:"Hide table sheet columns"},filename:"table-hide-columns.ts",isNew:!1},{id:"scroll-speed-ratio",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/e0z41b3e4/2021-11-16%25252020.11.53.gif",source:"import { TableSheet } from '@antv/s2';\n\nimport insertCss from 'insert-css';\n\nconst defaultScrollSpeedRatio = 1;\n\nfunction createSlider(s2) {\n  const slider = document.createElement('input');\n  slider.type = 'range';\n  slider.max = '5';\n  slider.min = '0';\n  slider.value = `${defaultScrollSpeedRatio}`;\n  slider.step = '0.1';\n  slider.title = `当前滚动速率: ${defaultScrollSpeedRatio}`;\n\n  slider.addEventListener('input', (e) => {\n    const ratio = e.target.value;\n    console.log('ratio: ', ratio);\n\n    s2.setOptions({\n      interaction: {\n        scrollSpeedRatio: {\n          vertical: ratio,\n        },\n      },\n    });\n    slider.title = `当前滚动速率: ${ratio}`;\n  });\n\n  document.querySelector('#container > canvas').before(slider);\n}\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n\n    const s2DataConfig = {\n      fields: {\n        columns: ['province', 'city', 'type', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 300,\n      interaction: {\n        scrollSpeedRatio: {\n          vertical: defaultScrollSpeedRatio,\n          horizontal: defaultScrollSpeedRatio,\n        },\n      },\n    };\n\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n\n    createSlider(s2);\n  });\n\ninsertCss(`\n  input[type='range'] {\n    display: block;\n    width: 300px;\n    background-color: #bdc3c7;\n    margin-left: 120px;\n    margin-bottom: 20px;\n    -webkit-appearance: none;\n    height: 5px;\n    border-radius: 5px;\n    outline: 0;\n  }\n\n  input[type=\"range\"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    background-color: #2C60D3;\n    width: 15px;\n    height: 15px;\n    border-radius: 50%;\n    border: 2px solid white;\n    cursor: pointer;\n    transition: .3s ease-in-out;\n  }​\n\n  input[type=\"range\"]::-webkit-slider-thumb:hover {\n    background-color: white;\n    border: 2px solid #2C60D3;\n  }\n\n  input[type=\"range\"]::-webkit-slider-thumb:active {\n    transform: scale(1.5);\n  }\n\n  input[type='range']::before {\n    content: attr(title);\n    position: absolute;\n    left: 15px;\n    top: 12px;\n  }\n`);\n",title:{zh:"自定义滚动速度",en:"Custom scroll speed"},filename:"scroll-speed-ratio.ts",isNew:!1},{id:"resize-active",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/HEfCpSTRO/2021-12-06%25252011.39.15.gif",source:"import { PivotSheet } from '@antv/s2';\nimport insertCss from 'insert-css';\n\nfunction createRadioGroup(s2) {\n  [\n    ['rowCellVertical', '行头热区'],\n    ['cornerCellHorizontal', '角头热区'],\n    ['colCellHorizontal', '列头水平方向resize热区'],\n    ['colCellVertical', '列头垂直方向resize热区'],\n  ].forEach(([value, text]) => {\n    const radio = document.createElement('input');\n\n    radio.type = 'radio';\n    radio.name = value;\n    radio.value = value;\n    radio.checked = true;\n\n    radio.addEventListener('click', (e) => {\n      const value = e.target.value;\n      const updated = !s2.options.interaction.resize[value];\n      radio.checked = updated;\n\n      s2.setOptions({\n        interaction: {\n          resize: {\n            [value]: updated,\n          },\n        },\n      });\n      s2.render(false);\n    });\n\n    const label = document.createElement('label');\n    label.innerText = text;\n    label.htmlFor = 'name';\n\n    document.querySelector('#container > canvas').before(radio);\n    document.querySelector('#container > canvas').before(label);\n  });\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        resize: {\n          rowCellVertical: true,\n          cornerCellHorizontal: true,\n          colCellHorizontal: true,\n          colCellVertical: true,\n        },\n      },\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n\n    createRadioGroup(s2);\n  });\n\ninsertCss(`\n  input[type='radio'] {\n    margin-bottom: 20px;\n    margin-right: 4px;\n  }\n\n  label{\n    margin-right: 10px\n  }\n`);  ",title:{zh:"自定义行列宽度调整热区",en:"Custom resize area"},filename:"resize-active.ts",isNew:!1},{id:"resize-disable",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/64tnK5%263K/Kapture%2525202022-07-19%252520at%25252015.40.15.gif",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        resize: {\n          disable: (resizeInfo) => {\n            console.log('resizeInfo: ', resizeInfo);\n            // 不允许调小宽度\n            return resizeInfo.resizedWidth <= resizeInfo.width;\n            // 不允许调小高度\n            // return resizeInfo.resizedHeight <= resizeInfo.height;\n          },\n        },\n      },\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义行列宽度调整规则",en:"Custom resize disable"},filename:"resize-disable.ts",isNew:!1},{id:"merge-cell",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/Eq9WwyC2g/merge-cell.gif",source:"import { PivotSheet, S2Event } from '@antv/s2';\nimport insertCss from 'insert-css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const button = document.createElement('button');\n    const dataCellTooltip = () => {\n      button.innerText = '点击合并单元格';\n      button.className = 'merge-cells-button';\n      button.onclick = () => s2.interaction.mergeCells();\n      return button;\n    }; // (按住 Cmd/ Ctrl 多选)\n\n    const mergedCellsTooltip = (mergedCell) => {\n      button.innerText = '取消合并单元格';\n      button.className = 'merge-cells-button';\n      button.onclick = () => s2.interaction.unmergeCell(mergedCell);\n      return button;\n    };\n\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      data: res.data,\n      meta: res.meta,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      selectedCellsSpotlight: true,\n      mergedCellsInfo: [\n        [\n          { colIndex: 1, rowIndex: 6, showText: true },\n          { colIndex: 1, rowIndex: 7 },\n          { colIndex: 2, rowIndex: 6 },\n          { colIndex: 2, rowIndex: 7 },\n          { colIndex: 3, rowIndex: 6 },\n          { colIndex: 3, rowIndex: 7 },\n        ],\n      ],\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.on(S2Event.DATA_CELL_CLICK, (event) => {\n      s2.tooltip.show({\n        position: { x: event.clientX, y: event.clientY },\n        content: dataCellTooltip(),\n      });\n    });\n\n    s2.on(S2Event.MERGED_CELLS_CLICK, (event) => {\n      const cell = s2.getCell(event.target);\n      s2.tooltip.show({\n        position: { x: event.clientX, y: event.clientY },\n        content: mergedCellsTooltip(cell),\n      });\n    });\n\n    s2.render();\n  });\n\ninsertCss(`\n  .merge-cells-button {\n    border: 1px solid transparent;\n    box-shadow: 0 2px #00000004;\n    cursor: pointer;\n    height: 32px;\n    padding: 4px 15px;\n    font-size: 14px;\n    border-radius: 2px;\n    color: #000000d9;\n    border-color: #d9d9d9;\n    background: #fff;\n  }\n  .merge-cells-button:hover {\n    color: #40a9ff;\n    border-color: #40a9ff;\n  }\n  .merge-cells-button:active {\n    color: #096dd9;\n    border-color: #096dd9;\n  }\n  .antv-s2-tooltip-container  {\n    padding: 10px 64px;\n  }\n`);\n",title:{zh:"合并单元格",en:"Merge cell"},filename:"merge-cell.ts",isNew:!1},{id:"scroll-to-cell",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/303GANzFN/Kapture%2525202022-05-30%252520at%25252015.56.54.gif",source:"import { PivotSheet, S2Options, SpreadSheet } from '@antv/s2';\nimport insertCss from 'insert-css';\n\nfunction addScrollRowHeaderButton(s2: SpreadSheet) {\n  const btn = document.createElement('button');\n  btn.className = 'ant-btn ant-btn-default';\n  btn.innerHTML = '滚动行头';\n\n  btn.addEventListener('click', () => {\n    s2.updateScrollOffset({\n      rowHeaderOffsetX: {\n        value: 50,\n        animate: true,\n      },\n    });\n  });\n  document.querySelector('#container > canvas')?.before(btn);\n}\n\nfunction addScrollToCellButton(s2: SpreadSheet) {\n  const btn = document.createElement('button');\n  btn.className = 'ant-btn ant-btn-default';\n  btn.innerHTML = '滚动至成都市';\n\n  btn.addEventListener('click', () => {\n    // 获取行头是成都市对应的单元格\n    const rowNode = s2\n      .getRowNodes()\n      .find(({ id }) => id === 'root[&]四川省[&]成都市');\n\n    s2.updateScrollOffset({\n      offsetY: {\n        value: rowNode?.y,\n        animate: true,\n      },\n    });\n  });\n  document.querySelector('#container > canvas')?.before(btn);\n}\n\nfunction addScrollToTopButton(s2: SpreadSheet) {\n  const btn = document.createElement('button');\n  btn.className = 'ant-btn ant-btn-default';\n  btn.innerHTML = '滚动至顶部';\n\n  btn.addEventListener('click', () => {\n    s2.updateScrollOffset({\n      offsetY: {\n        value: 0,\n        animate: true,\n      },\n    });\n  });\n  document.querySelector('#container > canvas')?.before(btn);\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options: S2Options = {\n      width: 600,\n      height: 480,\n      frozenRowHeader: true,\n      style: {\n        // 让行头区域显示滚动条\n        rowCfg: {\n          width: 200,\n        },\n        // 让表格数值区域显示滚动条\n        cellCfg: {\n          height: 100,\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n\n    addScrollToCellButton(s2);\n    addScrollToTopButton(s2);\n    addScrollRowHeaderButton(s2);\n  });\n\ninsertCss(`\n  #container > canvas {\n    margin-top: 10px;\n  }\n`);\n",title:{zh:"滚动至指定单元格",en:"Scroll to cell"},filename:"scroll-to-cell.ts",isNew:!1},{id:"scroll-loop",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/3q7Rp9HhP/Kapture%2525202022-05-30%252520at%25252015.53.27.gif",source:"import { PivotSheet, S2Event } from '@antv/s2';\nimport insertCss from 'insert-css';\n\n// 每次滚动的距离\nconst STEP = 50;\n\n// 每次滚动间隔时间\nconst MS = 500;\n\n// 计时器\nlet timer;\n\nfunction addScrollButton(s2) {\n  const btn = document.createElement('button');\n  btn.className = 'ant-btn ant-btn-default';\n  btn.innerHTML = '开始滚动';\n\n  const stopBtn = document.createElement('button');\n  stopBtn.className = 'ant-btn ant-btn-default';\n  stopBtn.innerHTML = '停止滚动';\n\n  stopBtn.addEventListener('click', () => {\n    clearInterval(timer);\n  });\n\n  btn.addEventListener('click', () => {\n    // 如果没有纵向滚动条则不需要触发定时器\n    if (!s2.facet.vScrollBar) {\n      return;\n    }\n\n    // 如果需要快速滚动, 可将 setInterval 替换成 requestAnimationFrame\n    timer = setInterval(() => {\n      // 获取当前 Y 轴滚动距离\n      const { scrollY } = s2.facet.getScrollOffset();\n      // 访问 https://s2.antv.antgroup.com/zh/docs/api 查看更多 API\n      // 如果已经滚动到了底部，则回到顶部\n      if (s2.facet.isScrollToBottom(scrollY)) {\n        console.log('滚动到底部');\n        s2.updateScrollOffset({\n          offsetY: {\n            value: 0,\n            animate: false,\n          },\n        });\n        return;\n      }\n      console.log('开始滚动, 当前 scrollY:', scrollY);\n      s2.updateScrollOffset({\n        offsetY: {\n          value: scrollY + STEP,\n          animate: true,\n        },\n      });\n    }, MS);\n  });\n  document.querySelector('#container > canvas').before(btn);\n  btn.after(stopBtn);\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      style: {\n        cellCfg: {\n          // 让表格显示滚动条\n          height: 100,\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    // 记得在表格卸载后 或者 `s2.destroy()` 后清除定时器\n    s2.on(S2Event.LAYOUT_DESTROY, () => {\n      clearInterval(timer);\n    });\n\n    s2.render();\n\n    addScrollButton(s2);\n  });\n\ninsertCss(`\n  #container > canvas {\n    margin-top: 10px;\n  }\n`);\n",title:{zh:"循环滚动",en:"Scroll loop"},filename:"scroll-loop.ts",isNew:!1},{id:"overscroll-behavior",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/JRAt1kb93/Kapture%2525202022-06-06%252520at%25252011.28.43.gif",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      style: {\n        cellCfg: {\n          // 让表格显示滚动条\n          width: 200,\n          height: 100,\n        },\n      },\n      interaction: {\n        // 关闭浏览器默认的滚动边界行为, 同时设置表格不同的滚动边界行为, 可尝试在不同的设备上滚动看效果\n        // 设置为 'none' | 'contain' 时, 表格滚动到顶部/底部时, 不再触发父容器滚动\n        // 可选项: 'none' | 'contain' | 'auto'\n        overscrollBehavior: 'none',\n      },\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"关闭浏览器默认边界滚动行为",en:"Reaching the boundary of a scrolling area"},filename:"overscroll-behavior.ts",isNew:!1},{id:"frozen-pivot-grid",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*ge0_S5iMB-wAAAAAAAAAAAAADmJ7AQ/original",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 300,\n      frozenFirstRow: true,\n      totals: {\n        row: {\n          showGrandTotals: true,\n          reverseLayout: true,\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"透视表 - 平铺模式冻结首行",en:"pivot mode freezes head rows"},filename:"frozen-pivot-grid.ts",isNew:!1},{id:"frozen-pivot-tree",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*ncdCT7NB2I0AAAAAAAAAAAAADmJ7AQ/original",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 300,\n      hierarchyType: 'tree',\n      frozenFirstRow: true,\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"透视表 - 树状模式冻结首行",en:"tree mode freezes head rows"},filename:"frozen-pivot-tree.ts",isNew:!1}],icon:"",id:"advanced",title:{en:"Advanced Interaction",zh:"高级交互"},childrenKey:"demos",order:2},{demos:[{id:"double-click-hide-columns",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/ukpGbSUqFz/double-click.gif",source:"import { TableSheet, BaseEvent, S2Event } from '@antv/s2';\n\nclass HiddenInteraction extends BaseEvent {\n  bindEvents() {\n    // 列头双击\n    this.spreadsheet.on(S2Event.COL_CELL_DOUBLE_CLICK, (event) => {\n      const cell = this.spreadsheet.getCell(event.target);\n      const meta = cell.getMeta();\n      this.spreadsheet.interaction.hideColumns([meta.field]);\n    });\n\n    this.spreadsheet.on(S2Event.LAYOUT_COLS_EXPANDED, (cell) => {\n      console.log('列头展开:', cell);\n    });\n\n    this.spreadsheet.on(\n      S2Event.LAYOUT_COLS_HIDDEN,\n      (currentHiddenColumnsInfo, hiddenColumnsDetail) => {\n        console.log('列头隐藏:', currentHiddenColumnsInfo, hiddenColumnsDetail);\n      },\n    );\n  }\n}\n\nclass ContextMenuInteraction extends BaseEvent {\n  bindEvents() {\n    // 禁止弹出右键菜单\n    this.spreadsheet.on(S2Event.GLOBAL_CONTEXT_MENU, (event) => {\n      event?.preventDefault?.();\n      console.log('右键', event);\n    });\n  }\n}\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        columns: ['type', 'province', 'city', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      tooltip: {\n        showTooltip: true,\n      },\n      interaction: {\n        customInteractions: [\n          {\n            key: 'HiddenInteraction',\n            interaction: HiddenInteraction,\n          },\n          {\n            key: 'ContextMenuInteraction',\n            interaction: ContextMenuInteraction,\n          },\n        ],\n      },\n    };\n\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"双击列头隐藏",en:"Double click hide columns"},filename:"double-click-hide-columns.ts",isNew:!1},{id:"row-col-hover-tooltip",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/c%24ICO1qvb/Kapture%2525202021-12-03%252520at%25252016.30.11.gif",source:"import { PivotSheet, BaseEvent, S2Event } from '@antv/s2';\n\nclass RowColumnHoverTooltipInteraction extends BaseEvent {\n  bindEvents() {\n    // 行头hover\n    this.spreadsheet.on(S2Event.ROW_CELL_HOVER, (event) => {\n      this.showTooltip(event);\n    });\n    // 列头hover\n    this.spreadsheet.on(S2Event.COL_CELL_HOVER, (event) => {\n      this.showTooltip(event);\n    });\n  }\n\n  showTooltip(event) {\n    const cell = this.spreadsheet.getCell(event.target);\n    const meta = cell.getMeta();\n    const content = meta.value;\n\n    this.spreadsheet.tooltip.show({\n      position: {\n        x: event.clientX,\n        y: event.clientY,\n      },\n      content,\n    });\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      tooltip: {\n        showTooltip: true,\n      },\n      interaction: {\n        customInteractions: [\n          {\n            key: 'RowColumnHoverTooltipInteraction',\n            interaction: RowColumnHoverTooltipInteraction,\n          },\n        ],\n      },\n    };\n\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"行列头悬停显示 tooltip",en:"Show tooltip when hover row or column"},filename:"row-col-hover-tooltip.ts",isNew:!1}],icon:"",id:"custom",title:{en:"Custom Interaction",zh:"自定义交互"},childrenKey:"demos",order:3}],childrenKey:"examples"},{id:"analysis",title:{zh:"分析能力",en:"Analysis"},icon:"bulb",examples:[{demos:[{id:"basic",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/S4FZba2BY7/8e25e21c-28d3-4572-8585-f0b7435ab7c8.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/4347c2dd-6554-451b-9d44-15b04e5de657.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      selectedCellsSpotlight: true,\n      hoverHighlight: true,\n      tooltip: {\n        showTooltip: true,\n      },\n      interaction: {\n        enableCopy: true,\n      },\n      // 配置小计总计显示\n      totals: {\n        row: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['province'],\n        },\n        col: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['type'],\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"单度量值",en:"Single Value Totals"},filename:"basic.ts",isNew:!1},{id:"multiple-values",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/3SuoQrkTsR/5657d02f-8e7f-4fbc-8159-7a0e8f772462.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/total-group.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      // 从  @antv/s2 1.53.0-alpha 开始，如果是多度量的场景，我们期望同一个数据里就包含了多个 values 属性，即：\n      // [{province: \"四川\", city: \"成都\", type: \"商品\", price: 100, cost: 80}]\n      // 而不是：\n      // [{province: \"四川\", city: \"成都\", type: \"商品\", price: 100}, {province: \"四川\", city: \"成都\", type: \"商品\", price: 100}]\n      data,\n    };\n\n    \n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      selectedCellsSpotlight: true,\n      hoverHighlight: true,\n      tooltip: {\n        showTooltip: true,\n      },\n      interaction: {\n        enableCopy: true,\n      },\n      // 配置小计总计显示\n      totals: {\n        row: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['province'],\n        },\n        col: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['type'],\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"多度量值",en:"Multiple Value Totals"},filename:"multiple-values.ts",isNew:!1},{id:"dimension-group-row",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*1SDsRpTA_kQAAAAAAAAAAAAADmJ7AQ/original",source:"import { PivotSheet } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/total-group.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city', 'type'],\n        columns: [],\n        values: ['price' ,'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      // 配置行小计总计显示,且按维度分组（列小计总计同理）\n      totals: {\n        row: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['province'],\n          calcTotals: {\n            // 设置总计汇总计算方式为求和\n            aggregation: 'SUM',\n          },\n          calcSubTotals: {\n            // 设置小计汇总计算方式为求和\n            aggregation: 'SUM',\n          },\n          // 总计分组下，city 城市维度会出现分组\n          totalsGroupDimensions: ['city'],\n          // 小计维度下，type 类别维度下会出现分组\n          subTotalsGroupDimensions: ['type'],\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"行总计小计按维度分组",en:"Total Of Rows Grouped By Dimension"},filename:"dimension-group-row.ts",isNew:!1},{id:"dimension-group-col",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*5PTqQpXXCcsAAAAAAAAAAAAADmJ7AQ/original",source:"import { PivotSheet } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/total-group.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: [],\n        columns: ['province', 'city', 'type'],\n        values: ['price' ,'cost'],\n        valueInCols: false,\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      // 配置行小计总计显示,且按维度分组（列小计总计同理）\n      totals: {\n        col: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['province'],\n          calcTotals: {\n            // 设置总计汇总计算方式为求和\n            aggregation: 'SUM',\n          },\n          calcSubTotals: {\n            // 设置小计汇总计算方式为求和\n            aggregation: 'SUM',\n          },\n          // 总计分组下，city 城市维度会出现分组\n          totalsGroupDimensions: ['city'],\n          // 小计维度下，type 类别维度下会出现分组\n          subTotalsGroupDimensions: ['type'],\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"列总计小计按维度分组",en:"Total Of Columns Grouped By Dimension"},filename:"dimension-group-col.ts",isNew:!1},{id:"tree",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/fjQwAfmonL/b697e97f-8bfb-49fe-a123-195ce1aa8a82.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/4347c2dd-6554-451b-9d44-15b04e5de657.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      hierarchyType: 'tree',\n      tooltip: {\n        showTooltip: true,\n      },\n      interaction: {\n        enableCopy: true,\n        selectedCellsSpotlight: true,\n        hoverHighlight: true,\n      },\n      totals: {\n        row: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['province'],\n        },\n        col: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['type'],\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"树状模式",en:"Tree Totals"},filename:"tree.ts",isNew:!1},{id:"calculate",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/S4FZba2BY7/8e25e21c-28d3-4572-8585-f0b7435ab7c8.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json001215413-dev-S09001736318/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      // 配置小计总计显示\n      totals: {\n        row: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['province'],\n          calcTotals: {\n            aggregation: 'SUM',\n          },\n          calcSubTotals: {\n            aggregation: 'SUM',\n          },\n        },\n        col: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['type'],\n          calcTotals: {\n            aggregation: 'SUM',\n          },\n          calcSubTotals: {\n            aggregation: 'SUM',\n          },\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"配置计算汇总值",en:"Calculate Totals"},filename:"calculate.ts",isNew:!1},{id:"custom",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/S4FZba2BY7/8e25e21c-28d3-4572-8585-f0b7435ab7c8.png",source:"import { PivotSheet, EXTRA_FIELD } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n      ],\n      data,\n    };\n\n    const calcFunc = (query, data) => {\n      const sum = data.reduce((pre, next) => {\n        return pre + next[next[EXTRA_FIELD]];\n      }, 0);\n      return sum * 2;\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      // 配置小计总计显示\n      totals: {\n        row: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['province'],\n          calcTotals: {\n            calcFunc,\n          },\n          calcSubTotals: {\n            calcFunc,\n          },\n        },\n        col: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['type'],\n          calcTotals: {\n            calcFunc,\n          },\n          calcSubTotals: {\n            calcFunc,\n          },\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义计算汇总值",en:"Custom Calculate Totals"},filename:"custom.ts",isNew:!1}],icon:"",id:"totals",title:{en:"Totals",zh:"小计总计"},childrenKey:"demos",order:0},{demos:[{id:"table-sort",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/9JQrrIVN8/2021-11-16%25252020.47.11.gif",source:"import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { orderBy } from 'lodash';\nimport { Button } from 'antd';\nimport { SheetComponent } from '@antv/s2-react';\nimport insertCss from 'insert-css';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch('https://assets.antv.antgroup.com/s2/basic-table-mode.json')\n  .then((res) => res.json())\n  .then((res) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const s2DataConfig = {\n      fields: {\n        columns: ['province', 'city', 'type', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data: res,\n      sortParams: [\n        {\n          sortFieldId: 'price',\n          sortMethod: 'DESC',\n        },\n      ],\n    };\n\n    const App = () => {\n      const [dataCfg, setDataCfg] = useState(s2DataConfig);\n      return (\n        <>\n          <Button\n            onClick={() => {\n              setDataCfg({\n                ...dataCfg,\n                sortParams: [\n                  {\n                    sortFieldId: 'price',\n                    sortMethod: 'DESC',\n                  },\n                ],\n              });\n            }}\n          >\n            使用 sortMethod 排序\n          </Button>\n          <Button\n            onClick={() => {\n              setDataCfg({\n                ...dataCfg,\n                sortParams: [\n                  {\n                    sortFieldId: 'price',\n                    sortMethod: 'DESC',\n                    sortFunc: ({ data, sortFieldId, sortMethod }) => {\n                      return orderBy(data, [sortFieldId], [sortMethod]);\n                    },\n                  },\n                ],\n              });\n            }}\n          >\n            使用 sortFunc 自定义排序\n          </Button>\n          <Button\n            onClick={() => {\n              setDataCfg({\n                ...dataCfg,\n                sortParams: [\n                  {\n                    sortFieldId: 'city',\n                    sortBy: ['白山', '长春', '杭州', '舟山'],\n                  },\n                ],\n              });\n            }}\n          >\n            使用 sortBy 显示指定顺序\n          </Button>\n          <Button\n            onClick={() => {\n              setDataCfg({\n                ...dataCfg,\n                sortParams: [\n                  {\n                    sortFieldId: 'price',\n                    sortMethod: 'DESC',\n                    query: {\n                      city: '浙江',\n                    },\n                  },\n                ],\n              });\n            }}\n          >\n            使用 query 缩小排序范围\n          </Button>\n\n          <SheetComponent\n            dataCfg={dataCfg}\n            options={s2Options}\n            sheetType=\"table\"\n          />\n        </>\n      );\n    };\n\n    ReactDOM.render(<App />, document.getElementById('container'));\n  });\n\n// 我们用 insert-css 演示引入自定义样式\n// 推荐将样式添加到自己的样式文件中\n// 若拷贝官方代码，别忘了 npm install insert-css\ninsertCss(`\n.ant-btn {\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n`);\n",title:{zh:"明细表排序",en:"Table Sort"},filename:"table-sort.tsx",isNew:!1},{id:"group-sort",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/ljBJH8o6bT/group-sort.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      showDefaultHeaderActionIcon: true, // 默认打开\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        sheetType=\"pivot\"\n        adaptive={false}\n        dataCfg={s2DataConfig}\n        options={s2Options}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"组内排序",en:"Group Sort"},filename:"group-sort.tsx",isNew:!1},{id:"advanced",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/2TmM6qOU%26V/advance.gif",source:"import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport insertCss from 'insert-css';\nimport 'antd/es/cascader/style/index.css';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const defaultSortParams = [\n      { sortFieldId: 'province', sortMethod: 'DESC' },\n      { sortFieldId: 'type', sortBy: ['纸张', '笔'] },\n      {\n        sortFieldId: 'city',\n        sortByMeasure: 'price',\n        sortMethod: 'DESC',\n      },\n    ];\n\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n      ],\n      data,\n      sortParams: defaultSortParams,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const AdvancedSortDemo = () => {\n      const [dataCfg, setDataCfg] = useState(s2DataConfig);\n      const [sortParams, setSortParams] = React.useState(defaultSortParams);\n\n      return (\n        <div>\n          <SheetComponent\n            sheetType={'pivot'}\n            adaptive={false}\n            dataCfg={dataCfg}\n            options={s2Options}\n            header={{\n              advancedSortCfg: {\n                open: true,\n                sortParams,\n                onSortConfirm: (ruleValues, sortParams) => {\n                  setDataCfg({ ...dataCfg, sortParams });\n                  setSortParams(sortParams);\n                },\n              },\n            }}\n          />\n        </div>\n      );\n    };\n\n    ReactDOM.render(<AdvancedSortDemo />, document.getElementById('container'));\n  });\n\ninsertCss(`\n  .antv-s2-advanced-sort-btn.ant-btn svg path {\n    transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n  }\n  .antv-s2-advanced-sort-btn.ant-btn:hover svg path, .antv-s2-advanced-sort-btn.ant-btn:focus svg path {\n    fill: #873bf4;\n  }\n  .ant-cascader-menu-item {\n    font-size: 12px;\n  }\n  .ant-col {\n    width: 100%;\n  }\n`);\n",title:{zh:"高级排序",en:"Advanced Sort"},filename:"advanced.tsx",isNew:!1},{id:"custom-method",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/jyNQ1WRgiD/7b1170ee-eb8e-477b-9596-a9135c4cab46.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n      sortParams: [\n        { sortFieldId: 'province', sortMethod: 'DESC' },\n        { sortFieldId: 'city', sortMethod: 'ASC' },\n        { sortFieldId: 'type', sortMethod: 'DESC' },\n      ],\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"根据升/降序方法排序",en:"Custom Method Sort"},filename:"custom-method.ts",isNew:!1},{id:"custom-list",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/fAlHqSzqIZ/977d4ac6-0c25-4cbf-85dd-1b9238e961ad.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n      sortParams: [\n        { sortFieldId: 'province', sortBy: ['吉林', '浙江'] },\n        { sortFieldId: 'city', sortBy: ['舟山', '杭州', '白山', '长春'] },\n        { sortFieldId: 'type', sortBy: ['纸张', '笔'] },\n      ],\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"根据维度列表排序",en:"Custom List Sort"},filename:"custom-list.ts",isNew:!1},{id:"custom-measure",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/IR3nwShqY4/8dc07b8a-1526-4078-b63c-23b7b6fddac0.png",source:"import { PivotSheet, EXTRA_FIELD } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n      sortParams: [\n        {\n          // type 依据 浙江-舟山-price 升序 排序\n          sortFieldId: 'type',\n          sortMethod: 'ASC',\n          sortByMeasure: 'price',\n          query: {\n            province: '浙江',\n            city: '舟山',\n            [EXTRA_FIELD]: 'price',\n          },\n        },\n        {\n          // city 依据 纸张-price 降序 排序\n          sortFieldId: 'city',\n          sortMethod: 'DESC',\n          sortByMeasure: 'price',\n          query: {\n            type: '纸张',\n            [EXTRA_FIELD]: 'price',\n          },\n        },\n      ],\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"根据度量值排序",en:"Custom Measure Sort"},filename:"custom-measure.ts",isNew:!1},{id:"custom-totals",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/eEfDYhd%24uz/da5c134b-c892-4ea8-9a01-6bf738212500.png",source:"import { PivotSheet, EXTRA_FIELD, TOTAL_VALUE } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/4347c2dd-6554-451b-9d44-15b04e5de657.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n      ],\n      data,\n      sortParams: [\n        {\n          // province 依据（ province - 小计 ）&（ 总计 - price ）& 升序 排序\n          sortFieldId: 'province',\n          sortMethod: 'ASC',\n          sortByMeasure: TOTAL_VALUE,\n          query: {\n            [EXTRA_FIELD]: 'price',\n          },\n        },\n        {\n          // type 依据 （ type - 小计 ）&（ price ）& 降序 排序\n          sortFieldId: 'type',\n          sortMethod: 'DESC',\n          sortByMeasure: TOTAL_VALUE,\n          query: {\n            province: '浙江',\n            [EXTRA_FIELD]: 'price',\n          },\n        },\n      ],\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      totals: {\n        row: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['province'],\n        },\n        col: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['type'],\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"根据汇总值排序",en:"Custom Totals Sort"},filename:"custom-totals.ts",isNew:!1},{id:"custom-sort-func",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/mkeXSyNZmk/1a50ecd2-1d81-4858-a106-c0c325e45a59.png",source:"import { PivotSheet, EXTRA_FIELD } from '@antv/s2';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n      sortParams: [\n        {\n          // sortFieldId 为维度值时，params.data 为维度值列表\n          sortFieldId: 'province',\n          sortFunc: (params) => {\n            const { data } = params;\n            return data?.sort((a, b) => a?.localeCompare(b));\n          },\n        },\n        {\n          // 支持使用度量值进行自定义计算\n          sortFieldId: 'city',\n          sortByMeasure: 'price',\n          // 当使用 sortByMeasure 时，可以传入 query 定位数值列表\n          // 如下方限定 params.data 为 type=纸张, 数值=price 的数据\n          sortFunc: function (params) {\n            const { data, sortByMeasure, sortFieldId } = params || {};\n            return data\n              ?.sort((a, b) => b[sortByMeasure] - a[sortByMeasure])\n              ?.map((item) => item[sortFieldId]);\n          },\n          query: { type: '纸张', [EXTRA_FIELD]: 'price' },\n        },\n      ],\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"根据自定义方法排序",en:"Custom Function Sort"},filename:"custom-sort-func.ts",isNew:!1}],icon:"",id:"sort",title:{en:"Sort",zh:"表格排序"},childrenKey:"demos",order:1},{demos:[{id:"text",screenshot:"https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*50NlSIHAly0AAAAAAAAAAAAAARQnAQ",source:"import { PivotSheet, EXTRA_FIELD } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      conditions: {\n        text: [\n          // 行头\n          {\n            field: 'city',\n            mapping() {\n              return {\n                // fill 是文本字段标记下唯一必须的字段，用于指定文本颜色\n                fill: '#DB6BCF',\n              };\n            },\n          },\n          // 列头\n          {\n            field: 'sub_type',\n            mapping() {\n              return {\n                fill: '#025DF4',\n              };\n            },\n          },\n          // 单独控制角头\n          {\n            field: 'type',\n            mapping(field) {\n              if (field === '类别') {\n                return {\n                  fill: '#327039',\n                };\n              }\n            },\n          },\n          // 单独配置指标名\n          {\n            field: EXTRA_FIELD,\n            mapping() {\n              return {\n                fill: '#5B8FF9',\n              };\n            },\n          },\n          // 配置数据单元格\n          {\n            field: 'number',\n            mapping() {\n              return {\n                fill: '#2498D1',\n              };\n            },\n          },\n        ],\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"文本标记",en:"Text condition"},filename:"text.ts",isNew:!1},{id:"background",screenshot:"https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*izglQq5QCBAAAAAAAAAAAAAAARQnAQ",source:"import { PivotSheet, EXTRA_FIELD } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      conditions: {\n        background: [\n          // 行头\n          {\n            field: 'city',\n            mapping() {\n              return {\n                // fill 是背景字段下唯一必须的字段，用于指定文本颜色\n                fill: '#DECFEA',\n              };\n            },\n          },\n          // 列头\n          {\n            field: 'sub_type',\n            mapping() {\n              return {\n                fill: '#BBDEDE',\n              };\n            },\n          },\n          // 单独控制角头\n          {\n            field: 'type',\n            mapping(field) {\n              if (field === '类别') {\n                return {\n                  fill: '#FCEBB9',\n                };\n              }\n            },\n          },\n          // 单独配置指标名\n          {\n            field: EXTRA_FIELD,\n            mapping() {\n              return {\n                fill: '#5B8FF9',\n              };\n            },\n          },\n          // 配置数据单元格\n          {\n            field: 'number',\n            mapping() {\n              return {\n                fill: '#CDDDFD',\n              };\n            },\n          },\n        ],\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"背景标记",en:"Background condition"},filename:"background.ts",isNew:!1},{id:"icon",screenshot:"https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*fSJ4RIhCddAAAAAAAAAAAAAAARQnAQ",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      conditions: {\n        icon: [\n          // 行头\n          {\n            field: 'city',\n            mapping() {\n              return {\n                // icon 用于指定图标条件格式所使用的 icon 类型\n                icon: 'Trend',\n                fill: '#DB6BCF',\n              };\n            },\n          },\n          // 列头\n          {\n            field: 'sub_type',\n            mapping(fieldValue) {\n              if (fieldValue !== '子类别') {\n                return {\n                  icon: 'CellDown',\n                  fill: '#025DF4',\n                };\n              }\n            },\n          },\n          // 配置数据单元格\n          {\n            field: 'number',\n            position: 'left',\n            mapping() {\n              return {\n                icon: 'CellUp',\n                fill: '#2498D1',\n              };\n            },\n          },\n        ],\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"图标标记",en:"Icon condition"},filename:"icon.ts",isNew:!1},{id:"interval",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/ReYpm%24KcI2/b923ab47-cd74-48fe-aae2-1412091d4a31.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      conditions: {\n        interval: [\n          {\n            field: 'number',\n            mapping(value) {\n              return {\n                fill: '#80BFFF',\n                // 自定义柱状图范围\n                isCompare: true,\n                maxValue: 8000,\n                minValue: 300,\n                fieldValue: value > 7900 ? 10 : value,\n              };\n            },\n          },\n        ],\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"柱状图标记",en:"Interval condition"},filename:"interval.ts",isNew:!1},{id:"table-text",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/jdTsPFc09l/4795d9f3-f55b-4575-99de-829e0e3ab3db.png",source:"import { TableSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/986d48ce-cfdf-475d-980c-553762770928.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        columns: ['province', 'city', 'type', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      conditions: {\n        text: [\n          {\n            field: 'price',\n            mapping(fieldValue, data) {\n              return {\n                fill: '#30BF78',\n              };\n            },\n          },\n          {\n            field: new RegExp('co*'),\n            mapping(fieldValue, data) {\n              return {\n                fill: '#F4664A',\n              };\n            },\n          },\n        ],\n      },\n    };\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"明细表文本标记",en:"Table text condition"},filename:"table-text.ts",isNew:!1},{id:"multi-background",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/lB3TIYL5Lk/624493b6-4d29-429a-a2f7-028d84e128e1.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      conditions: {\n        text: [\n          {\n            field: 'number',\n            mapping(fieldValue) {\n              if (fieldValue >= 7000) {\n                return {\n                  fill: '#fff',\n                };\n              }\n            },\n          },\n        ],\n        background: [\n          {\n            field: 'number',\n            mapping(fieldValue) {\n              if (fieldValue <= 1397) {\n                return {\n                  fill: '#B8E1FF',\n                };\n              } else if (fieldValue <= 2797) {\n                return {\n                  fill: '#9AC5FF',\n                };\n              } else if (fieldValue <= 4191) {\n                return {\n                  fill: '#7DAAFF',\n                };\n              } else if (fieldValue <= 5588) {\n                return {\n                  fill: '#5B8FF9',\n                };\n              } else if (fieldValue <= 6985) {\n                return {\n                  fill: '#3D76DD',\n                };\n              }\n              return {\n                fill: '#085EC0',\n              };\n            },\n          },\n        ],\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"色块图",en:"Color block diagram"},filename:"multi-background.ts",isNew:!1},{id:"gradient-interval",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/y1IafbmC7W/c79f8906-ca2e-4bbd-b384-e663bde759e4.png",source:"import { PivotSheet } from '@antv/s2';\n\n// 可借助 tinygradient 完成功能更全面的颜色过渡\nfunction getGradient(rate, startColor, endColor) {\n  function toGgb(color) {\n    color = color.slice(1);\n    const r = parseInt(color.substring(0, 2), 16);\n    const g = parseInt(color.substring(2, 4), 16);\n    const b = parseInt(color.substring(4, 6), 16);\n    return [r, g, b];\n  }\n  const start = toGgb(startColor);\n  const end = toGgb(endColor);\n  const r = start[0] + (end[0] - start[0]) * rate;\n  const g = start[1] + (end[1] - start[1]) * rate;\n  const b = start[2] + (end[2] - start[2]) * rate;\n  return `rgb(${r},${g},${b})`;\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      conditions: {\n        interval: [\n          {\n            field: 'number',\n            mapping(fieldValue) {\n              const maxValue = 7789;\n              const minValue = 352;\n              const rage = (fieldValue - minValue) / (maxValue - minValue);\n\n              const color = getGradient(rage, '#95F0FF', '#3A9DBF');\n              return {\n                fill: `l(0) 0:#95F0FF 1:${color}`,\n                isCompare: true,\n                maxValue,\n              };\n            },\n          },\n        ],\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"渐变柱状图",en:"Interval gradient"},filename:"gradient-interval.ts",isNew:!1},{id:"multi-conditions",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/6FFtlY%240T/792a0865-b01d-4674-a3ef-98da6c5be285.png",source:"import { PivotSheet } from '@antv/s2';\n\n// 可借助 tinygradient 完成功能更全面的颜色过渡\nfunction getGradient(rate, startColor, endColor) {\n  function toGgb(color) {\n    color = color.slice(1);\n    const r = parseInt(color.substring(0, 2), 16);\n    const g = parseInt(color.substring(2, 4), 16);\n    const b = parseInt(color.substring(4, 6), 16);\n    return [r, g, b];\n  }\n  const start = toGgb(startColor);\n  const end = toGgb(endColor);\n  const r = start[0] + (end[0] - start[0]) * rate;\n  const g = start[1] + (end[1] - start[1]) * rate;\n  const b = start[2] + (end[2] - start[2]) * rate;\n  return `rgb(${r},${g},${b})`;\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = dataCfg;\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      conditions: {\n        text: [\n          {\n            field: 'number',\n            mapping() {\n              return {\n                fill: '#142C61',\n              };\n            },\n          },\n        ],\n        icon: [\n          {\n            field: 'number',\n            position: 'right',\n            mapping() {\n              return {\n                icon: 'Trend',\n                fill: '#142C61',\n              };\n            },\n          },\n        ],\n        background: [\n          {\n            field: 'number',\n            mapping() {\n              return {\n                fill: '#E0E9FD',\n              };\n            },\n          },\n        ],\n        interval: [\n          {\n            field: 'number',\n            mapping(fieldValue) {\n              const maxValue = 7789;\n              const minValue = 0;\n              const rage = (fieldValue - minValue) / (maxValue - minValue);\n\n              const color = getGradient(rage, '#5083F5', '#F7B46F');\n              return {\n                fill: `l(0) 0:#5083F5 1:${color}`,\n                isCompare: true,\n                maxValue,\n              };\n            },\n          },\n        ],\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n    s2.setThemeCfg({ name: 'colorful' });\n    s2.render();\n  });\n",title:{zh:"混合字段标记",en:"Multi-conditions"},filename:"multi-conditions.ts",isNew:!1},{id:"bidirectional-interval",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/oUICMHjOA/7fd723cb-fc2a-45a5-a0ab-a2840127a48a.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/4e49b398-5121-4f00-9607-4854aedd5a21.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      conditions: {\n        interval: [\n          {\n            field: 'delta',\n            mapping(value) {\n              return {\n                fill: value >= 0 ? '#80BFFF' : '#F4664A',\n              };\n            },\n          },\n        ],\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"双向柱状图",en:"Bidirectional interval"},filename:"bidirectional-interval.ts",isNew:!1},{id:"intelligent-background",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/oUICMHjOA/7fd723cb-fc2a-45a5-a0ab-a2840127a48a.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      conditions: {\n        background: [\n          {\n            field: 'number',\n            mapping() {\n              return {\n                // fill 是背景字段下唯一必须的字段，用于指定文本颜色\n                fill: '#000',\n                intelligentReverseTextColor: true,\n              };\n            },\n          },\n        ],\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"开启文字智能反色",en:"Intelligent background"},filename:"intelligent-background.ts",isNew:!1}],icon:"",id:"conditions",title:{en:"Conditions",zh:"字段标记"},childrenKey:"demos",order:2},{demos:[{id:"get-cell-data",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/S4FZba2BY7/8e25e21c-28d3-4572-8585-f0b7435ab7c8.png",source:"import { PivotSheet, EXTRA_FIELD } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/4347c2dd-6554-451b-9d44-15b04e5de657.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      selectedCellsSpotlight: true,\n      hoverHighlight: true,\n      tooltip: {\n        showTooltip: true,\n      },\n      interaction: {\n        enableCopy: true,\n      },\n      // 配置小计总计显示\n      totals: {\n        row: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['province'],\n        },\n        col: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['type'],\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n    s2.render();\n\n    // 获取明细单元格\n    const cellData = s2.dataSet.getCellData({\n      query: {\n        province: '浙江',\n        city: '杭州',\n        type: '笔',\n        [EXTRA_FIELD]: 'price',\n      },\n    });\n\n    console.log('单个数据', cellData);\n\n    // 获取小计数据\n    const subTotalData = s2.dataSet.getCellData({\n      query: {\n        province: '浙江',\n        type: '笔',\n        [EXTRA_FIELD]: 'price',\n      },\n      isTotals: true,\n    });\n\n    console.log('小计数据', subTotalData);\n  });\n",title:{zh:"获取单个单元格数据",en:"Get Single Cell Data"},filename:"get-cell-data.ts",isNew:!1},{id:"get-multi-data",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/S4FZba2BY7/8e25e21c-28d3-4572-8585-f0b7435ab7c8.png",source:"import { PivotSheet, EXTRA_FIELD, QueryDataType } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/4347c2dd-6554-451b-9d44-15b04e5de657.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n      ],\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      selectedCellsSpotlight: true,\n      hoverHighlight: true,\n      tooltip: {\n        showTooltip: true,\n      },\n      interaction: {\n        enableCopy: true,\n      },\n      // 配置小计总计显示\n      totals: {\n        row: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['province'],\n        },\n        col: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          reverseLayout: true,\n          reverseSubLayout: true,\n          subTotalsDimensions: ['type'],\n        },\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n    s2.render();\n\n    // 获取所有浙江下的数据\n    const all = s2.dataSet.getMultiData(\n      {\n        province: '浙江',\n        [EXTRA_FIELD]: 'price',\n      },\n      {\n        queryType: QueryDataType.All,\n      },\n    );\n\n    console.log('所有数据', all);\n\n    // 获取所有浙江下的明细数据\n    const detail = s2.dataSet.getMultiData(\n      {\n        province: '浙江',\n        [EXTRA_FIELD]: 'price',\n      },\n      {\n        queryType: QueryDataType.DetailOnly,\n      },\n    );\n\n    console.log('所有明细数据', detail);\n  });\n",title:{zh:"获取多个单元格数据",en:"Get Multi Cell Data"},filename:"get-multi-data.ts",isNew:!1}],icon:"",id:"get-data",title:{en:"Get Cell Data",zh:"获取单元格数据"},childrenKey:"demos",order:3}],childrenKey:"examples"},{id:"react-component",title:{zh:"React 组件",en:"React Component"},icon:"build",examples:[{demos:[{id:"pivot",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/6h9nmPdj9b/e4163ac4-2d17-4efd-8556-d5e32fd15b25.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      pagination: {\n        // API: https://ant.design/components/pagination-cn/#API\n        pageSize: 4,\n        current: 1,\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent dataCfg={dataCfg} options={s2Options} showPagination />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"透视表分页",en:"PivotSheet pagination"},filename:"pivot.tsx",isNew:!1},{id:"table",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/MK67LrYwRh/5e972478-06e4-40fc-bcbe-21c05fd144e5.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch('https://assets.antv.antgroup.com/s2/basic-table-mode.json')\n  .then((res) => res.json())\n  .then((res) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      pagination: {\n        pageSize: 5,\n        current: 2,\n      },\n    };\n\n    const s2DataConfig = {\n      fields: {\n        columns: ['province', 'city', 'type', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data: res,\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={s2DataConfig}\n        options={s2Options}\n        sheetType=\"table\"\n        showPagination={{\n          onChange: (current, pageSize) => {\n            console.log(current, pageSize);\n          },\n          onShowSizeChange: (current, pageSize) => {\n            console.log(current, pageSize);\n          },\n        }}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"明细表分页",en:"TableSheet pagination"},filename:"table.tsx",isNew:!1}],icon:"",id:"pagination",title:{en:"Pagination",zh:"分页组件"},childrenKey:"demos",order:0},{demos:[{id:"pivot",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/J%246aXMmj26/da7d9c24-2958-4d4c-a38f-4ff0dcb22891.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    ReactDOM.render(\n      <SheetComponent dataCfg={dataCfg} options={s2Options} />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"透视表组件",en:"PivotSheet component"},filename:"pivot.tsx",isNew:!1},{id:"table",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/jWifHNLOsB/08db1064-bb09-4d44-b42b-26aed1766545.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://assets.antv.antgroup.com/s2/basic-table-mode.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const s2DataConfig = {\n      fields: {\n        columns: ['province', 'city', 'type', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data: res,\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={s2DataConfig}\n        options={s2Options}\n        sheetType=\"table\"\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"明细表组件",en:"TableSheet component"},filename:"table.tsx",isNew:!1},{id:"editable",screenshot:"https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*9RoBT5FIJG0AAAAAAAAAAAAAARQnAQ",source:"import { SheetComponent } from '@antv/s2-react';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nfetch('https://assets.antv.antgroup.com/s2/basic-table-mode.json')\n  .then((res) => res.json())\n  .then((res) => {\n    const s2DataConfig = {\n      fields: {\n        columns: ['province', 'city', 'type', 'price', 'cost'],\n      },\n      meta: [\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '商品类别',\n        },\n        {\n          field: 'price',\n          name: '价格',\n        },\n        {\n          field: 'cost',\n          name: '成本',\n        },\n      ],\n      data: res,\n    };\n\n    const s2Options = {\n      width: 480,\n      height: 480,\n      showSeriesNumber: true,\n      frozenRowCount: 1, // 行头冻结数量\n      frozenColCount: 1, // 列头冻结数量\n      frozenTrailingRowCount: 1, // 列尾冻结数量\n      frozenTrailingColCount: 1, // 列尾冻结数量\n    };\n\n    const onDataCellEditEnd = (meta) => {\n      console.log('onDataCellEditEnd', meta);\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={s2DataConfig}\n        options={s2Options}\n        sheetType=\"editable\"\n        onDataCellEditEnd={onDataCellEditEnd}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"编辑表",en:"Editable Sheet"},filename:"editable.tsx",isNew:!1},{id:"strategy",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/detasbG55j/5f1c0072-0761-463c-ac44-2fe7b300d041.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent, SheetComponentOptions } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/3c2009ce-8c2a-451d-b29a-619a796c7903.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options: SheetComponentOptions = {\n      width: 600,\n      height: 480,\n      cornerText: '指标层级',\n      hierarchyType: 'customTree',\n      conditions: {\n        text: [\n          {\n            field: 'number',\n            mapping: (value, cellInfo) => {\n              const { meta, colIndex } = cellInfo;\n              if (colIndex === 0 || !value || !meta?.fieldValue) {\n                return {\n                  fill: '#000',\n                };\n              }\n              return {\n                fill: value > 0 ? '#FF4D4F' : '#29A294',\n              };\n            },\n          },\n        ],\n      },\n      style: {\n        cellCfg: {\n          valuesCfg: {\n            // 非必填: 指定原始字段, 用于 导出和 tooltip 展示\n            originalValueField: 'originalValues',\n            // 非必填: 是否显示原始值\n            showOriginalValue: true,\n          },\n        },\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={dataCfg}\n        options={s2Options}\n        sheetType=\"strategy\"\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"趋势分析表组件",en:"StrategySheet component"},filename:"strategy.tsx",isNew:!1},{id:"strategy-mini-chart",screenshot:"https://gw.alipayobjects.com/mdn/rms_56cbb2/afts/img/A*lLfATbGywcEAAAAAAAAAAAAAARQnAQ",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent, SheetComponentOptions } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\n/**\n * 该示例为 React 版本的趋势分析表\n * 如何在普通图表中使用, 请查看: https://s2.antv.antgroup.com/zh/examples/custom/custom-cell#mini-chart\n */\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/b942d973-7364-4fad-a10a-369426a61376.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options: SheetComponentOptions = {\n      width: 1000,\n      height: 480,\n      cornerText: '指标层级',\n      hierarchyType: 'customTree',\n      conditions: {\n        text: [\n          {\n            field: 'number',\n            mapping: (value, cellInfo) => {\n              const { meta, colIndex } = cellInfo;\n              if (colIndex === 0 || !value || !meta?.fieldValue) {\n                return {\n                  fill: '#000',\n                };\n              }\n              return {\n                fill: value > 0 ? '#FF4D4F' : '#29A294',\n              };\n            },\n          },\n        ],\n      },\n      style: {\n        cellCfg: {\n          valuesCfg: {\n            originalValueField: 'originalValues',\n          },\n        },\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={dataCfg}\n        options={s2Options}\n        sheetType=\"strategy\"\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"mini 图表组件",en:"StrategySheet with mini chart"},filename:"strategy-mini-chart.tsx",isNew:!1}],icon:"",id:"sheet",title:{en:"Sheet Component",zh:"表格组件"},childrenKey:"demos",order:0},{demos:[{id:"default",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/dI0e27cdHW/header.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport insertCss from 'insert-css';\nimport { Button } from 'antd';\nimport {\n  SheetComponent,\n  SheetComponentOptions,\n  SheetComponentsProps,\n} from '@antv/s2-react';\nimport { S2DataConfig, SortParams } from '@antv/s2';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const s2Options: SheetComponentOptions = {\n      width: 600,\n      height: 480,\n      interaction: {\n        enableCopy: true,\n      },\n    };\n\n    const s2DataConfig: S2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n\n    const SheetHeader = () => {\n      const [dataCfg, setDataCfg] = React.useState<S2DataConfig>(s2DataConfig);\n      const [sortParams, setSortParams] = React.useState<SortParams>([]);\n      const header: SheetComponentsProps['header'] = {\n        title: '表头标题',\n        description: '表头描述',\n        exportCfg: { open: true },\n        advancedSortCfg: {\n          open: true,\n          sortParams,\n          onSortConfirm: (ruleValues, sortParams) => {\n            setDataCfg({ ...dataCfg, sortParams });\n            setSortParams(sortParams);\n          },\n        },\n        switcherCfg: { open: true },\n        extra: (\n          <Button size={'small'} style={{ verticalAlign: 'top' }}>\n            自定义按钮\n          </Button>\n        ),\n      };\n\n      return (\n        <SheetComponent\n          dataCfg={dataCfg}\n          options={s2Options}\n          header={header}\n          adaptive={false}\n        />\n      );\n    };\n\n    ReactDOM.render(<SheetHeader />, document.getElementById('container'));\n  });\n\ninsertCss(`\n  .s2-header {\n    margin:0px !important;\n  }\n`);\n",title:{zh:"表头组件",en:"Header component"},filename:"default.tsx",isNew:!1}],icon:"",id:"header",title:{en:"Header Component",zh:"表头组件"},childrenKey:"demos",order:1},{demos:[{id:"basic-panel",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/3DoOlPsFYh/drill.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { DrillDown } from '@antv/s2-react';\n\nconst disabledFields = ['name'];\nconst clearButtonText = '清除';\n\nconst dataSet = [\n  {\n    name: '性别',\n    value: 'sex',\n    type: 'text',\n  },\n  {\n    name: '姓名',\n    value: 'name',\n    type: 'text',\n  },\n  {\n    name: '城市',\n    value: 'city',\n    type: 'location',\n  },\n  {\n    name: '日期',\n    value: 'date',\n    type: 'date',\n  },\n];\n\nReactDOM.render(\n  <DrillDown\n    disabledFields={disabledFields}\n    clearButtonText={clearButtonText}\n    dataSet={dataSet}\n  />,\n  document.getElementById('container'),\n);\n",title:{zh:"维度下钻组件",en:"DrillDown component"},filename:"basic-panel.tsx",isNew:!1},{id:"for-pivot",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/i%240oG9GFEV/xiazuan.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      hierarchyType: 'tree',\n    };\n\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n\n    const sex = ['男', '女'];\n\n    const PartDrillDown = {\n      drillConfig: {\n        dataSet: [\n          {\n            name: '客户性别',\n            value: 'sex',\n            type: 'text',\n          },\n        ],\n      },\n\n      fetchData: (meta, drillFields) =>\n        new Promise((resolve) => {\n          const dataSet = meta.spreadsheet.dataSet;\n          const field = drillFields[0];\n          const rowDatas = dataSet.getMultiData(meta.query);\n          const drillDownData = [];\n          rowDatas.forEach((data) => {\n            const { city, number, province, sub_type: subType, type } = data;\n            const number0 = Math.ceil(Math.random() * (number - 50)) + 50;\n            const number1 = number - number0;\n            const dataItem0 = {\n              city,\n              number: number0,\n              province,\n              sub_type: subType,\n              type,\n              [field]: sex[0],\n            };\n            drillDownData.push(dataItem0);\n            const dataItem1 = {\n              city,\n              number: number1,\n              province,\n              sub_type: subType,\n              type,\n              [field]: sex[1],\n            };\n\n            drillDownData.push(dataItem1);\n          });\n\n          resolve({\n            drillField: field,\n            drillData: drillDownData,\n          });\n        }),\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={s2DataConfig}\n        options={s2Options}\n        partDrillDown={PartDrillDown}\n        adaptive={false}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"透视表维度下钻组件",en:"DrillDown in pivot sheet"},filename:"for-pivot.tsx",isNew:!1}],icon:"",id:"drill-down",title:{en:"DrillDwon",zh:"下钻组件"},childrenKey:"demos",order:2},{demos:[{id:"basic",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/UuEx0wndW7/efa70cc6-5106-4d81-9957-25c99b4fad32.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      tooltip: {\n        showTooltip: true,\n        row: {\n          showTooltip: false,\n        },\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        sheetType=\"pivot\"\n        adaptive={false}\n        dataCfg={dataCfg}\n        options={s2Options}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"基本展示",en:"Basic Show"},filename:"basic.tsx",isNew:!1},{id:"operation",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/HRIacdrQje/4455252e-bed7-4265-8fee-90ed85a6ae11.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      tooltip: {\n        operation: {\n          trend: true,\n        },\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        sheetType=\"pivot\"\n        adaptive={false}\n        dataCfg={dataCfg}\n        options={s2Options}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"操作项",en:"Operation"},filename:"operation.tsx",isNew:!1},{id:"custom-operation",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/le1o4zCn9/d5fd21d4-95bb-448e-9c10-92a1dd4495ae.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      tooltip: {\n        operation: {\n          menus: [\n            {\n              key: 'custom-a',\n              text: '操作1',\n              icon: 'Trend',\n              onClick: (cell) => {\n                console.log('操作1点击', cell);\n              },\n              children: [\n                {\n                  key: 'custom-a-a',\n                  text: '操作 1-1',\n                  icon: 'Trend',\n                  onClick: () => {\n                    console.log('操作 1-1 点击');\n                  },\n                },\n              ],\n            },\n            {\n              key: 'custom-b',\n              text: '操作2',\n              icon: 'EyeOutlined',\n              onClick: () => {\n                console.log('操作2点击');\n              },\n            },\n            {\n              key: 'custom-c',\n              text: '操作3',\n              icon: 'EyeOutlined',\n              visible: false,\n              onClick: () => {\n                console.log('操作3点击');\n              },\n            },\n            {\n              key: 'custom-c',\n              text: '操作4',\n              icon: 'EyeOutlined',\n              visible: (cell) => {\n                // 叶子节点才显示\n                const meta = cell.getMeta();\n                return meta.isLeaf;\n              },\n              onClick: () => {\n                console.log('操作4点击');\n              },\n            },\n          ],\n        },\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        sheetType=\"pivot\"\n        adaptive={false}\n        dataCfg={dataCfg}\n        options={s2Options}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"自定义操作项",en:"Custom Operation"},filename:"custom-operation.tsx",isNew:!1},{id:"custom-content",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/j1fkyyIDdh/939fb3ed-b1c7-48a4-a329-bd1d64ddcb9c.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Button } from 'antd';\nimport { SheetComponent } from '@antv/s2-react';\nimport insertCss from 'insert-css';\nimport '@antv/s2-react/dist/style.min.css';\n\nconst CustomTooltip = <div className=\"tooltip-custom-component\">content</div>;\n\nconst RowTooltip = ({ title }) => (\n  <div className=\"tooltip-custom-component\">{title}</div>\n);\n\nconst ColTooltip = () => {\n  const [open, setOpen] = React.useState(false);\n\n  return (\n    <div className=\"tooltip-custom-component\">\n      <Button\n        onClick={() => {\n          setOpen(!open);\n        }}\n      >\n        切换\n      </Button>\n      <span style={{ marginLeft: 4 }}>\n        {open ? 'colTooltip1' : 'colTooltip2'}\n      </span>\n    </div>\n  );\n};\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      tooltip: {\n        content: CustomTooltip,\n        row: {\n          content: (cell, defaultTooltipShowOptions) => {\n            console.log('当前单元格：', cell);\n            console.log('默认 tooltip 详细信息：', defaultTooltipShowOptions);\n\n            const meta = cell.getMeta();\n\n            return <RowTooltip title={meta.label} />;\n          },\n        },\n        col: {\n          content: <ColTooltip />,\n        },\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        sheetType=\"pivot\"\n        adaptive={false}\n        dataCfg={dataCfg}\n        options={s2Options}\n      />,\n      document.getElementById('container'),\n    );\n  });\n\ninsertCss(`\n  .tooltip-custom-component {\n    padding: 12px;\n    height: 50px;\n  }\n`);\n",title:{zh:"自定义 Tooltip 内容",en:"Custom Tooltip Content"},filename:"custom-content.tsx",isNew:!1},{id:"custom-tooltip",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/j1fkyyIDdh/939fb3ed-b1c7-48a4-a329-bd1d64ddcb9c.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BaseTooltip } from '@antv/s2';\nimport { SheetComponent } from '@antv/s2-react';\nimport insertCss from 'insert-css';\nimport '@antv/s2-react/dist/style.min.css';\n\nconst MyCustomTooltipContent = () => (\n  <div className=\"tooltip-custom-component\">我是自定义 tooltip 内容</div>\n);\n\nclass CustomTooltip extends BaseTooltip {\n  constructor(spreadsheet) {\n    super(spreadsheet);\n  }\n\n  renderContent() {\n    ReactDOM.render(<MyCustomTooltipContent />, this.container);\n  }\n\n  show(options) {\n    super.show(options);\n    console.log('options: ', options);\n  }\n\n  destroy() {\n    console.log('tooltip destroy');\n\n    super.destroy();\n    if (this.container) {\n      ReactDOM.unmountComponentAtNode(this.container);\n    }\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      tooltip: {\n        showTooltip: true,\n        renderTooltip: (spreadsheet) => new CustomTooltip(spreadsheet),\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        sheetType=\"pivot\"\n        adaptive={false}\n        dataCfg={dataCfg}\n        options={s2Options}\n      />,\n      document.getElementById('container'),\n    );\n  });\n\ninsertCss(`\n  .tooltip-custom-component {\n    padding: 12px;\n    height: 50px;\n  }\n`);\n",title:{zh:"自定义 Tooltip",en:"Custom Tooltip"},filename:"custom-tooltip.tsx",isNew:!1},{id:"custom-show-tooltip",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/sSx1H%24pJOs/6305fe29-5640-4d4d-b1ef-577cc6a32eb3.png",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport insertCss from 'insert-css';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={dataCfg}\n        options={s2Options}\n        onMounted={(instance) => {\n          instance.showTooltip = (tooltipOptions) => {\n            const { position, data = {}, options } = tooltipOptions;\n            const name = `${data.name} - 测试`; // 只有单元格中文案被省略才显示\n            const infos = '按住 Shift 多选或框选，查看多个数据点';\n            const tips = '说明：这是个说明';\n            const customSummaries = (data.summaries || []).map((item) => {\n              return { ...item, name: `${item.name} - 测试` };\n            });\n            const { cols = [], rows = [] } = data.headInfo || {};\n            const customCols = cols.map((item) => {\n              return { ...item, value: `${item.value} - 测试` };\n            });\n            const customDetails = (data.details || []).map((item) => {\n              return {\n                name: `${item.name} - 测试`,\n                value: `${item.value} - w`,\n              };\n            });\n            const customOperator = {\n              onClick: ({ key }) => {\n                console.log('任意菜单项点击', key);\n              },\n              menus: [\n                {\n                  id: 'trend',\n                  icon: 'trend',\n                  text: '趋势',\n                  onClick: () => {\n                    console.log('当前菜单项点击');\n                  },\n                },\n              ],\n            };\n            const customOptions = {\n              ...tooltipOptions,\n              position: { x: position.x + 1, y: position.y + 1 },\n              data: {\n                ...data,\n                name: data.name ? name : '',\n                infos,\n                tips,\n                summaries: customSummaries,\n                headInfo: { rows, cols: customCols },\n                details: customDetails,\n              },\n              options: {\n                ...options,\n                operator: customOperator,\n              },\n            };\n            instance.tooltip.show(customOptions);\n          };\n        }}\n      />,\n      document.getElementById('container'),\n    );\n  });\n\ninsertCss(`\n  .tooltip-custom-component {\n    padding: 12px;\n    height: 50px;\n  }\n`);\n",title:{zh:"重写展示方法",en:"Custom Show Tooltip"},filename:"custom-show-tooltip.tsx",isNew:!1},{id:"custom-click-show-tooltip",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/kpvnavJgo0/tooltip.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nconst CustomColCellTooltip = () => <div>col cell</div>;\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      tooltip: {\n        showTooltip: true,\n      },\n    };\n\n    const onColCellClick = ({ viewMeta, event }) => {\n      if (!viewMeta) {\n        return;\n      }\n      const { spreadsheet, id } = viewMeta;\n\n      // 点击列头的 [家具] 试试\n      if (id === 'root[&]家具') {\n        const position = {\n          x: event.clientX,\n          y: event.clientY,\n        };\n\n        // 查看更多配置项: https://s2.antv.antgroup.com/api/basic-class/base-tooltip#tooltipshowoptions\n        spreadsheet.showTooltip({\n          position,\n          content: <CustomColCellTooltip />,\n          options: {\n            operator: {\n              menus: [\n                {\n                  key: 'custom-a',\n                  text: '操作1',\n                  icon: 'Trend',\n                  onClick: (cell) => {\n                    console.log('操作1点击', cell);\n                  },\n                  children: [\n                    {\n                      key: 'custom-a-a',\n                      text: '操作 1-1',\n                      icon: 'Trend',\n                      onClick: (cell) => {\n                        console.log('操作 1-1 点击', cell);\n                      },\n                    },\n                  ],\n                },\n              ],\n            },\n          },\n        });\n      }\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        sheetType=\"pivot\"\n        adaptive={false}\n        dataCfg={dataCfg}\n        options={s2Options}\n        onColCellClick={onColCellClick}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"自定义点击显示 Tooltip",en:"Custom Click Show Tooltip"},filename:"custom-click-show-tooltip.tsx",isNew:!1},{id:"custom-hover-show-tooltip",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/c%24ICO1qvb/Kapture%2525202021-12-03%252520at%25252016.30.11.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      tooltip: {\n        showTooltip: true,\n      },\n      interaction: {\n        // 禁用默认的悬停聚焦效果, 防止出现默认的 tooltip (hover 在数值单元格 800ms 后, 会显示 tooltip)\n        hoverFocus: false,\n      },\n    };\n\n    const CustomColCellTooltip = () => <div>col cell tooltip</div>;\n    const CustomRowCellTooltip = () => <div>row cell tooltip</div>;\n    const CustomDataCellTooltip = () => <div>data cell tooltip</div>;\n\n    const onColCellHover = ({ event, viewMeta }) => {\n      // 查看更多配置项: https://s2.antv.antgroup.com/api/basic-class/base-tooltip#tooltipshowoptions\n      viewMeta.spreadsheet.tooltip.show({\n        position: {\n          x: event.clientX,\n          y: event.clientY,\n        },\n        content: <CustomColCellTooltip />,\n        // 自定义操作项\n        options: {\n          operator: {\n            menus: [\n              {\n                key: 'custom-a',\n                text: '操作1',\n                icon: 'Trend',\n                onClick: (cell) => {\n                  console.log('操作1点击', cell);\n                },\n                children: [\n                  {\n                    key: 'custom-a-a',\n                    text: '操作 1-1',\n                    icon: 'Trend',\n                    onClick: (cell) => {\n                      console.log('操作 1-1 点击', cell);\n                    },\n                  },\n                ],\n              },\n            ],\n          },\n        },\n      });\n    };\n\n    const onRowCellHover = ({ event, viewMeta }) => {\n      viewMeta.spreadsheet.tooltip.show({\n        position: {\n          x: event.clientX,\n          y: event.clientY,\n        },\n        content: <CustomRowCellTooltip />,\n      });\n    };\n\n    const onDataCellHover = ({ event, viewMeta }) => {\n      viewMeta.spreadsheet.tooltip.show({\n        position: {\n          x: event.clientX,\n          y: event.clientY,\n        },\n        content: <CustomDataCellTooltip />,\n      });\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        sheetType=\"pivot\"\n        adaptive={false}\n        dataCfg={dataCfg}\n        options={s2Options}\n        onColCellHover={onColCellHover}\n        onRowCellHover={onRowCellHover}\n        onDataCellHover={onDataCellHover}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"自定义悬停显示 Tooltip",en:"Custom Hover Show Tooltip"},filename:"custom-hover-show-tooltip.tsx",isNew:!1},{id:"custom-description",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/Z8%24cg%24so%24/Kapture%2525202022-07-07%252520at%25252017.28.31.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch('https://render.alipay.com/p/yuyan/180020010001215413/s2/basic.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const dataCfg = {\n      meta: [\n        {\n          field: 'price',\n          name: '价格',\n          description: '价格说明。。',\n        },\n        {\n          field: 'province',\n          name: '省份',\n          description: '省份说明。。',\n        },\n        {\n          field: 'city',\n          name: '城市',\n          description: '城市说明。。',\n        },\n        {\n          field: 'type',\n          name: '类别',\n          description: '类别说明。。',\n        },\n      ],\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type'],\n        values: ['price'],\n        valueInCols: true,\n      },\n      data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      tooltip: {\n        showTooltip: true,\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        sheetType=\"pivot\"\n        dataCfg={dataCfg}\n        options={s2Options}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"Tooltip 中显示字段描述",en:"Custom Field Description"},filename:"custom-description.tsx",isNew:!1}],icon:"",id:"tooltip",title:{en:"Tooltip Component",zh:"Tooltip 组件"},childrenKey:"demos",order:2},{demos:[{id:"export",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/LuLsxJzuq/2021-11-16%25252022.15.51.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        enableCopy: true,\n      },\n    };\n\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n\n    ReactDOM.render(\n      <SheetComponent\n        dataCfg={s2DataConfig}\n        options={s2Options}\n        header={{\n          exportCfg: {\n            open: true,\n          },\n        }}\n        adaptive={false}\n      />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"导出组件",en:"Export component"},filename:"export.tsx",isNew:!1}],icon:"",id:"export",title:{en:"Export",zh:"导出组件"},childrenKey:"demos",order:3},{demos:[{id:"pure-switcher",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/tiVXaKTKB/2021-11-16%25252022.18.52.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Switcher } from '@antv/s2-react';\n\nconst switcherFields = {\n  rows: {\n    items: [{ id: 'province' }, { id: 'city' }],\n    allowEmpty: false,\n  },\n  columns: {\n    items: [{ id: 'type' }],\n  },\n  values: {\n    selectable: true,\n    items: [{ id: 'price' }, { id: 'cost' }],\n  },\n};\n\nconst onSubmit = (result) => {\n  console.log('result:', result);\n};\n\nReactDOM.render(\n  <Switcher {...switcherFields} onSubmit={onSubmit} />,\n  document.getElementById('container'),\n);\n",title:{zh:"维度切换组件",en:"Switcher component"},filename:"pure-switcher.tsx",isNew:!1},{id:"pivot-header",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/aBR%26EXlQb/2021-12-02%25252015.19.58.gif",source:"import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport insertCss from 'insert-css';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/total-group.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const fields = {\n      rows: ['province', 'city'],\n      columns: ['type'],\n      values: ['price', 'cost'],\n    };\n\n    const SwitcherDemo = () => {\n      return (\n        <div>\n          <SheetComponent\n            sheetType={'pivot'}\n            adaptive={false}\n            dataCfg={{ data, fields }}\n            options={s2Options}\n            header={{ switcherCfg: { open: true } }}\n          />\n        </div>\n      );\n    };\n\n    ReactDOM.render(<SwitcherDemo />, document.getElementById('container'));\n  });\n\ninsertCss(`\n  .antv-s2-switcher-item.checkable-item {\n    align-items: center;\n  }\n`);\n",title:{zh:"维度切换头部组件",en:"Switcher header component"},filename:"pivot-header.tsx",isNew:!1},{id:"pivot",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/WaJLe8CSf/2021-11-16%25252022.19.04.gif",source:"import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent, Switcher } from '@antv/s2-react';\nimport insertCss from 'insert-css';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/total-group.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const defaultFields = {\n      rows: ['province', 'city'],\n      columns: ['type'],\n      values: ['price', 'cost'],\n    };\n\n    const defaultSwitcherFields = {\n      rows: {\n        items: [{ id: 'province' }, { id: 'city' }],\n      },\n      columns: {\n        items: [{ id: 'type' }],\n      },\n      values: {\n        selectable: true,\n        items: [{ id: 'price' }, { id: 'cost' }],\n      },\n    };\n\n    // 生成 switcher 所需要的 fields 结构\n    function generateSwitcherFields(updatedResult) {\n      return {\n        rows: { items: updatedResult.rows.items },\n        columns: { items: updatedResult.columns.items },\n        values: {\n          selectable: true,\n          items: updatedResult.values.items,\n        },\n      };\n    }\n\n    // 生成 dataCfg fields 结构\n    function generateFields(updatedResult) {\n      return {\n        rows: updatedResult.rows.items.map((i) => i.id),\n        columns: updatedResult.columns.items.map((i) => i.id),\n        values: updatedResult.values.items\n          .filter(\n            (i) =>\n              !updatedResult.values.hideItems.find((hide) => hide.id === i.id),\n          )\n          .map((i) => i.id),\n      };\n    }\n\n    const SwitcherDemo = () => {\n      const [fields, setFields] = useState(defaultFields);\n      const [switcherFields, setSwitcherFields] = useState(\n        defaultSwitcherFields,\n      );\n\n      const onSubmit = (result) => {\n        console.log('result:', result);\n        setFields(generateFields(result));\n        setSwitcherFields(generateSwitcherFields(result));\n      };\n\n      return (\n        <div>\n          <Switcher {...switcherFields} onSubmit={onSubmit} />\n          <SheetComponent\n            sheetType={'pivot'}\n            adaptive={false}\n            dataCfg={{ data, fields }}\n            options={s2Options}\n          />\n        </div>\n      );\n    };\n\n    ReactDOM.render(<SwitcherDemo />, document.getElementById('container'));\n  });\n\ninsertCss(`\n  .antv-s2-switcher-item.checkable-item {\n    align-items: center;\n  }\n`);\n",title:{zh:"透视表维度切换",en:"Switcher in pivot sheet"},filename:"pivot.tsx",isNew:!1},{id:"pivot-with-children",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/EMriYgmG5/2021-11-16%25252022.20.42.gif",source:"import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent, Switcher } from '@antv/s2-react';\nimport insertCss from 'insert-css';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/pivot-switcher-with-chidlren.json',\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const defaultFields = {\n      rows: ['province', 'city'],\n      columns: ['type'],\n      values: ['price', 'price-ac', 'price-rc', 'cost', 'cost-ac', 'cost-rc'],\n    };\n\n    const defaultSwitcherFields = {\n      rows: {\n        items: [{ id: 'province' }, { id: 'city' }],\n      },\n      columns: {\n        items: [{ id: 'type' }],\n      },\n      values: {\n        expandable: true,\n        selectable: true,\n        items: [\n          { id: 'price', children: [{ id: 'price-ac' }, { id: 'price-rc' }] },\n          { id: 'cost', children: [{ id: 'cost-ac' }, { id: 'cost-rc' }] },\n        ],\n      },\n    };\n\n    // 生成 switcher 所需要的 fields 结构\n    function generateSwitcherFields(updatedResult) {\n      const values = updatedResult.values.items.reduce((result, item) => {\n        if (defaultSwitcherFields.values.items.find((i) => i.id === item.id)) {\n          result.push(item);\n        } else {\n          const parent = result[result.length - 1];\n          parent.children = parent.children ? parent.children : [];\n          parent.children.push(item);\n        }\n        return result;\n      }, []);\n\n      return {\n        rows: { items: updatedResult.rows.items },\n        columns: { items: updatedResult.columns.items },\n        values: {\n          selectable: true,\n          expandable: true,\n          items: values,\n        },\n      };\n    }\n\n    // 生成 dataCfg fields 结构\n    function generateFields(updatedResult) {\n      return {\n        rows: updatedResult.rows.items.map((i) => i.id),\n        columns: updatedResult.columns.items.map((i) => i.id),\n        values: updatedResult.values.items\n          .filter(\n            (i) =>\n              !updatedResult.values.hideItems.find((hide) => hide.id === i.id),\n          )\n          .map((i) => i.id),\n      };\n    }\n\n    const SwitcherDemo = () => {\n      const [fields, setFields] = useState(defaultFields);\n      const [switcherFields, setSwitcherFields] = useState(\n        defaultSwitcherFields,\n      );\n\n      const onSubmit = (result) => {\n        setFields(generateFields(result));\n        setSwitcherFields(generateSwitcherFields(result));\n      };\n\n      return (\n        <div>\n          <Switcher\n            {...switcherFields}\n            // 是否允许指标在行列维度之间相互切换\n            allowExchangeHeader={true}\n            onSubmit={onSubmit}\n          />\n          <SheetComponent\n            sheetType={'pivot'}\n            adaptive={false}\n            dataCfg={{ data, fields }}\n            options={s2Options}\n          />\n        </div>\n      );\n    };\n\n    ReactDOM.render(<SwitcherDemo />, document.getElementById('container'));\n  });\n\ninsertCss(`\n  .antv-s2-switcher-item.checkable-item {\n    align-items: center;\n  }\n`);\n",title:{zh:"透视表子维度切换",en:"Switcher with children in pivot sheet"},filename:"pivot-with-children.tsx",isNew:!1},{id:"table",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/%24Z5M%26Kfq9%26/switcher.gif",source:"import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent, Switcher } from '@antv/s2-react';\nimport insertCss from 'insert-css';\nimport '@antv/s2-react/dist/style.min.css';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    // 明细表只需要 columns 字段\n    const defaultFields = {\n      columns: ['province', 'city', 'type', 'sub_type', 'number'],\n    };\n\n    const defaultSwitcherFields = {\n      columns: {\n        selectable: true,\n        items: [\n          { id: 'province' },\n          { id: 'city' },\n          { id: 'type' },\n          { id: 'sub_type' },\n          { id: 'number' },\n        ],\n      },\n    };\n\n    // 生成 switcher 所需要的 fields 结构\n    function generateSwitcherFields(updatedResult) {\n      return {\n        columns: {\n          selectable: true,\n          items: updatedResult.columns.items,\n        },\n      };\n    }\n\n    // 生成 dataCfg fields 结构\n    function generateFields(updatedResult) {\n      return {\n        columns: updatedResult.columns.items.map((i) => i.id),\n      };\n    }\n\n    const SwitcherDemo = () => {\n      const [fields, setFields] = useState(defaultFields);\n      const [hiddenColumnFields, setHiddenColumnFields] = useState([]);\n      const [switcherFields, setSwitcherFields] = useState(\n        defaultSwitcherFields,\n      );\n\n      const onSubmit = (result) => {\n        setFields(generateFields(result));\n        setSwitcherFields(generateSwitcherFields(result));\n        setHiddenColumnFields(result.columns.hideItems.map((i) => i.id));\n      };\n\n      return (\n        <div>\n          <Switcher sheetType=\"table\" {...switcherFields} onSubmit={onSubmit} />\n          <SheetComponent\n            sheetType=\"table\"\n            adaptive={false}\n            dataCfg={{ ...dataCfg, fields }}\n            options={{ ...s2Options, interaction: { hiddenColumnFields } }}\n          />\n        </div>\n      );\n    };\n\n    ReactDOM.render(<SwitcherDemo />, document.getElementById('container'));\n  });\n\ninsertCss(`\n  .antv-s2-switcher-item.checkable-item {\n    align-items: center;\n  }\n`);\n",title:{zh:"明细表维度切换",en:"Switcher in table sheet"},filename:"table.tsx",isNew:!1}],icon:"",id:"switcher",title:{en:"Switcher",zh:"维度切换组件"},childrenKey:"demos",order:4}],childrenKey:"examples"},{id:"custom",title:{zh:"自定义",en:"Custom Hooks"},icon:"edit",examples:[{demos:[{id:"custom-layout-arrange",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/iw1AQBleoJ/634d1162-b4a4-472c-9bf5-76eca25c6b50.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      data: res.data,\n      meta: [\n        {\n          field: 'number',\n          name: '数量',\n        },\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '类别',\n        },\n        {\n          field: 'sub_type',\n          name: '子类别',\n        },\n      ],\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      layoutArrange: (s2, parent, field, fieldValues) => {\n        console.log(fieldValues);\n        if (field === 'city' && parent.label === '浙江省') {\n          // layoutArrange 可手动设置行、列顺序，适用于局部调整，非规则调整。\n          // 手动设置浙江省内部市的顺序，比如指定「宁波市」在第一位。\n          const keyIndex = fieldValues.indexOf('宁波市');\n          fieldValues.splice(keyIndex, 1);\n          fieldValues.unshift('宁波市');\n        }\n        return fieldValues;\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义行列顺序",en:"Custom Layout Arrange"},filename:"custom-layout-arrange.ts",isNew:!1},{id:"custom-coordinate",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/VGuJd4OP2J/a21c6e22-05c0-4da1-860d-75be53afc43b.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      data: res.data,\n      meta: [\n        {\n          field: 'number',\n          name: '数量',\n        },\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '类别',\n        },\n        {\n          field: 'sub_type',\n          name: '子类别',\n        },\n      ],\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      layoutCoordinate: (facetCfg, rowNode, colNode) => {\n        // layoutCoordinate 用于改变行列叶子结点的尺寸（长、宽）和坐标（x、y）\n        // 改变「宁波市」节点高度\n        console.log(rowNode);\n        console.log(colNode);\n        if (rowNode?.label === '宁波市') {\n          rowNode.height = 100;\n        }\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义行列坐标",en:"Custom Coordinate"},filename:"custom-coordinate.ts",isNew:!1},{id:"custom-data-position",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/SeGpS6Mf3p/c8b32cff-49bd-49f0-a2e8-03c5a769fa4c.png",source:"import { PivotSheet, VALUE_FIELD, EXTRA_FIELD } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      data: res.data,\n      meta: [\n        {\n          field: 'number',\n          name: '数量',\n        },\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '类别',\n        },\n        {\n          field: 'sub_type',\n          name: '子类别',\n        },\n      ],\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      layoutDataPosition: (s2, getCellData) => {\n        // layoutDataPosition 动态改变数据的定位，确定修订某个或者某些格子的值\n        // 下面以更改「浙江省-宁波市-家具-桌子」的单元格数据为例\n        const getCellMeta = (rowIndex, colIndex) => {\n          const viewMeta = getCellData(rowIndex, colIndex);\n          if (rowIndex === 2 && colIndex === 0) {\n            return {\n              ...viewMeta,\n              data: {\n                province: '浙江省',\n                city: '宁波市',\n                type: '家具',\n                sub_type: '桌子',\n                number: 999,\n                [EXTRA_FIELD]: 'number',\n                [VALUE_FIELD]: 999,\n              },\n              fieldValue: 999,\n            };\n          }\n          return viewMeta;\n        };\n        return getCellMeta;\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义数据位置",en:"Custom Layout Data Position"},filename:"custom-data-position.ts",isNew:!1},{id:"custom-layout-hierarchy",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/s33%26UjDslN/fed91224-4700-455a-b50f-8adc5cad8abd.png",source:"import { PivotSheet, Node, generateId } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      data: [\n        ...res.data,\n        ...[\n          {\n            province: '浙江省',\n            city: '宁波A',\n            type: '家具',\n            sub_type: '桌子',\n            number: 1001,\n          },\n          {\n            province: '浙江省',\n            city: '宁波A',\n            type: '家具',\n            sub_type: '沙发',\n            number: 1002,\n          },\n          {\n            province: '浙江省',\n            city: '宁波A',\n            type: '办公用品',\n            sub_type: '笔',\n            number: 1003,\n          },\n          {\n            province: '浙江省',\n            city: '宁波A',\n            type: '办公用品',\n            sub_type: '纸张',\n            number: 1004,\n          },\n        ],\n      ],\n      meta: [\n        {\n          field: 'number',\n          name: '数量',\n        },\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '类别',\n        },\n        {\n          field: 'sub_type',\n          name: '子类别',\n        },\n      ],\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      layoutHierarchy: (s2, node) => {\n        // layoutHierarchy 用于手动控制行列结构的增加、删除的特殊场景。\n        // 以 「宁波市」为例，删除其节点，增加宁波A和宁波B节点。\n        const { field, label } = node;\n        if (field === 'city' && label === '宁波市') {\n          const preLabel = '宁波A';\n          const nextLabel = '宁波B';\n\n          const parentNode = node.parent;\n          const preUniqueId = generateId(parentNode.id, preLabel);\n          const nextUniqueId = generateId(parentNode.id, nextLabel);\n          const preNode = new Node({\n            ...node,\n            ...node.config,\n            id: preUniqueId,\n            label: preLabel,\n            value: preLabel,\n            query: { ...parentNode.query, [node.key]: preLabel },\n          });\n\n          const nextNode = new Node({\n            ...node,\n            ...node.config,\n            id: nextUniqueId,\n            label: nextLabel,\n            value: nextLabel,\n            query: { ...parentNode.query, [node.key]: nextLabel },\n          });\n\n          return {\n            push: [nextNode],\n            unshift: [preNode],\n            delete: true,\n          };\n        }\n        return null;\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义层级结构",en:"Custom Layout Hierarchy"},filename:"custom-layout-hierarchy.ts",isNew:!1},{id:"custom-value-order",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Ofk_QYa4eE0AAAAAAAAAAAAADmJ7AQ/fmt.avif",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n        valueInCols: true,\n        // 自定义指标属性层级顺序, 即 fields.values 的顺序 (从 0 开始)\n        customValueOrder: 1,\n      },\n      data: res.data,\n      meta: [\n        {\n          field: 'number',\n          name: '数量',\n        },\n        {\n          field: 'province',\n          name: '省份',\n        },\n        {\n          field: 'city',\n          name: '城市',\n        },\n        {\n          field: 'type',\n          name: '类别',\n        },\n        {\n          field: 'sub_type',\n          name: '子类别',\n        },\n      ],\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n    };\n\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义指标维度层级顺序",en:"Custom Value Order"},filename:"custom-value-order.ts",isNew:!1}],icon:"",id:"custom-layout",title:{en:"Custom Layout",zh:"自定义布局"},childrenKey:"demos",order:1},{demos:[{id:"custom-svg-icon",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/%24KQ3JqKkrA/67f074b6-739b-4a61-a5c5-b18488a65797.png",source:'import { PivotSheet, Node } from \'@antv/s2\';\n\nfetch(\n  \'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json\',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById(\'container\');\n    const s2DataConfig = {\n      fields: {\n        rows: [\'province\', \'city\'],\n        columns: [\'type\', \'sub_type\'],\n        values: [\'number\'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      customSVGIcons: [\n        {\n          name: \'customKingIcon\',\n          // svg 为 url 地址或字符串\n          // svg: `<?xml version="1.0" encoding="UTF-8"?><svg t="1634603945212" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="558" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M605.61 884.79h-24.26c-21.34 0-38.66 17.32-38.66 38.66 0 21.34 17.32 38.66 38.66 38.66h24.26c21.34 0 38.66-17.32 38.66-38.66 0-21.35-17.32-38.66-38.66-38.66z" fill="#040000" p-id="559"></path><path d="M950.47 419.76c-22.17-15.48-51.17-16.01-73.92-1.33L715.7 522.53 573.09 223.42c-10.95-22.98-33.55-37.43-58.97-37.75h-0.85c-25.09 0-47.67 13.84-59.05 36.29L302.25 521.82 154.9 419.61c-22-15.18-50.71-15.73-73.27-1.46-22.53 14.32-34.23 40.57-29.8 66.9l70.9 421.76c5.33 32.04 32.82 55.3 65.31 55.3h272.43c21.34 0 38.66-17.32 38.66-38.66 0-21.34-17.32-38.66-38.66-38.66H197.44l-64.99-386.62 136.17 94.46a66.14 66.14 0 0 0 54.01 9.79 66.097 66.097 0 0 0 42.81-34.28l147.54-291.11 138.35 290.2c8.21 17.19 23.41 30.03 41.76 35.19 18.37 5.24 38 2.21 53.99-8.1l148.62-96.17-87.74 386.65h-60.1c-21.34 0-38.66 17.32-38.66 38.66 0 21.34 17.32 38.66 38.66 38.66h68.96c31.16 0 57.71-21.22 64.58-51.57l95.72-421.86c5.97-26.39-4.47-53.42-26.65-68.93zM514.74 151.68c28.08 0 50.85-22.76 50.85-50.85s-22.77-50.85-50.85-50.85c-28.09 0-50.85 22.76-50.85 50.85s22.77 50.85 50.85 50.85zM973.15 277.37c-28.08 0-50.85 22.77-50.85 50.85 0 28.09 22.76 50.85 50.85 50.85 28.08 0 50.85-22.76 50.85-50.85 0-28.08-22.77-50.85-50.85-50.85zM101.69 328.22c0-28.08-22.76-50.85-50.85-50.85S0 300.14 0 328.22c0 28.09 22.76 50.85 50.85 50.85s50.84-22.77 50.84-50.85z" fill="#040000" p-id="560"></path></svg>`,\n          svg: \'https://gw.alipayobjects.com/zos/bmw-prod/f44eb1f5-7cea-45df-875e-76e825a6e0ab.svg\',\n        },\n      ],\n      // 使用刚定义的 icon\n      headerActionIcons: [\n        {\n          iconNames: [\'customKingIcon\'],\n          belongsCell: \'rowCell\',\n        },\n      ],\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    // 使用\n    s2.render();\n  });\n',title:{zh:"自定义SVG图标",en:"custom svg icon"},filename:"custom-svg-icon.ts",isNew:!1},{id:"custom-header-action-icon",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/pBAAuAlwEB/custom.gif",source:"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { SheetComponent } from '@antv/s2-react';\nimport '@antv/s2-react/dist/style.min.css';\n\nconst CornerTooltip = <div>CornerTooltip</div>;\n\nconst RowTooltip = <div>RowTooltip</div>;\n\nconst ColTooltip = <div>ColTooltip</div>;\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const s2Options = {\n      width: 600,\n      height: 480,\n      customSVGIcons: [\n        {\n          name: 'Filter',\n          svg: 'https://gw.alipayobjects.com/zos/antfincdn/gu1Fsz3fw0/filter%26sort_filter.svg',\n        },\n      ],\n      showDefaultHeaderActionIcon: false,\n      headerActionIcons: [\n        {\n          iconNames: ['SortDown'],\n          belongsCell: 'colCell',\n          displayCondition: (meta) => meta.level > 0,\n          action: (props) => {\n            const { meta, event } = props;\n            console.log(meta);\n            meta.spreadsheet.handleGroupSort(event, meta);\n          },\n        },\n        {\n          iconNames: ['Filter'],\n          belongsCell: 'colCell',\n          displayCondition: (meta) => meta.id === 'root[&]家具',\n          action: (props) => {\n            const { meta, event } = props;\n            meta.spreadsheet.tooltip.show({\n              position: { x: event.clientX, y: event.clientY },\n              content: ColTooltip,\n            });\n          },\n        },\n        {\n          iconNames: ['SortUp'],\n          belongsCell: 'cornerCell',\n          action: (props) => {\n            const { meta, event } = props;\n            meta.spreadsheet.tooltip.show({\n              position: { x: event.clientX, y: event.clientY },\n              content: CornerTooltip,\n            });\n          },\n        },\n        {\n          iconNames: ['DrillDownIcon'],\n          belongsCell: 'rowCell',\n          action: (props) => {\n            const { meta, event } = props;\n            meta.spreadsheet.tooltip.show({\n              position: { x: event.clientX, y: event.clientY },\n              content: RowTooltip,\n            });\n          },\n        },\n      ],\n      style: {\n        colCfg: {\n          hideMeasureColumn: true,\n        },\n      },\n    };\n\n    ReactDOM.render(\n      <SheetComponent dataCfg={dataCfg} options={s2Options} />,\n      document.getElementById('container'),\n    );\n  });\n",title:{zh:"自定义行列头操作图标",en:"Custom header action icons"},filename:"custom-header-action-icon.tsx",isNew:!1},{id:"custom-data-cell-icon",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/5a0Ad8vz3/2689a04f-7965-4e30-be6f-9aaefc007482.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/2a5dbbc8-d0a7-4d02-b7c9-34f6ca63cff6.json',\n)\n  .then((res) => res.json())\n  .then((dataCfg) => {\n    const container = document.getElementById('container');\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      // 自定义icon\n      customSVGIcons: [\n        {\n          name: 'Filter',\n          svg: 'https://gw.alipayobjects.com/zos/antfincdn/gu1Fsz3fw0/filter%26sort_filter.svg',\n        },\n      ],\n      conditions: {\n        icon: [\n          {\n            field: 'number',\n            mapping(fieldValue, data) {\n              return {\n                // icon 用于指定图标条件格式所使用的 icon 类型\n                icon: 'Filter',\n                fill: '#30BF78',\n              };\n            },\n          },\n          {\n            field: 'cost',\n            position: 'left',\n            mapping(fieldValue, data) {\n              return {\n                icon: 'CellDown',\n                fill: '#F4664A',\n              };\n            },\n          },\n        ],\n      },\n    };\n    const s2 = new PivotSheet(container, dataCfg, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义单元格图标",en:"Custom data cell icons"},filename:"custom-data-cell-icon.tsx",isNew:!1}],icon:"",id:"custom-icon",title:{en:"custom-icon",zh:"自定义图标"},childrenKey:"demos",order:6},{demos:[{id:"custom-tree",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/tSqlcOkaF/ee66a55f-32ea-4b33-8275-30b92439e00b.png",source:"import { PivotSheet } from '@antv/s2';\n\nfetch(\n  'https://render.alipay.com/p/yuyan/180020010001215413/s2/custom-tree.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: [],\n        columns: ['type', 'sub_type'],\n        values: [\n          'measure-a',\n          'measure-b',\n          'measure-c',\n          'measure-d',\n          'measure-e',\n          'measure-f',\n        ],\n        customTreeItems: res.customTreeItem,\n        valueInCols: false,\n      },\n      data: res.data,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      hierarchyType: 'customTree',\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n    s2.render();\n  });\n",title:{zh:"自定义目录树",en:"custom tree"},filename:"custom-tree.ts",isNew:!1}],icon:"",id:"custom-tree",title:{en:"custom tree",zh:"自定义目录树"},childrenKey:"demos",order:7},{demos:[{id:"data-cell",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/v3rnigo9e%24/6862c027-eb75-49e4-88e4-40b9855202a1.png",source:"import { DataCell, PivotSheet } from '@antv/s2';\n\n/**\n * 自定义 DataCell，给数值单元格添加背景图\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/data-cell.ts\n */\nclass CustomDataCell extends DataCell {\n  // 重写绘制背景方法, 添加一个背景图片\n  drawBackgroundShape() {\n    this.backgroundShape = this.addShape('image', {\n      attrs: {\n        ...this.getCellArea(),\n        img: 'https://gw.alipayobjects.com/zos/antfincdn/og1XQOMyyj/1e3a8de1-3b42-405d-9f82-f92cb1c10413.png',\n      },\n    });\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container')!;\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false, // 关闭 hover 十字高亮, 为了视觉效果，可不设置\n      },\n      dataCell: (viewMeta) => {\n        return new CustomDataCell(viewMeta, viewMeta?.spreadsheet);\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义数据单元格",en:"custom data cell"},filename:"data-cell.ts",isNew:!1},{id:"row-cell",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/OIp1I47w2P/c7f38d27-4025-4f05-abed-1d5b47b98145.png",source:"import { PivotSheet, RowCell } from '@antv/s2';\n\n/**\n * 自定义 RowCell，给行头添加背景图\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/row-cell.ts\n */\nclass CustomRowCell extends RowCell {\n  // 覆盖背景绘制，可覆盖或者增加绘制方法\n  drawBackgroundShape() {\n    this.backgroundShape = this.addShape('image', {\n      attrs: {\n        ...this.getCellArea(),\n        img: 'https://gw.alipayobjects.com/zos/antfincdn/og1XQOMyyj/1e3a8de1-3b42-405d-9f82-f92cb1c10413.png',\n      },\n    });\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      rowCell: (node, s2, headConfig) => {\n        return new CustomRowCell(node, s2, headConfig);\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    // 使用\n    s2.render();\n  });\n",title:{zh:"自定义行头单元格",en:"custom row cell"},filename:"row-cell.ts",isNew:!1},{id:"col-cell",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/8gdiktjp8c/3e2453cb-f218-4435-9a24-2f0758bdad62.png",source:"import { PivotSheet, ColCell } from '@antv/s2';\n\n/**\n * 自定义 ColCell，给列头添加背景图\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/col-cell.ts\n */\nclass CustomColCell extends ColCell {\n  // 覆盖背景绘制，可覆盖或者增加绘制方法\n  drawBackgroundShape() {\n    this.backgroundShape = this.addShape('image', {\n      attrs: {\n        ...this.getCellArea(),\n        img: 'https://gw.alipayobjects.com/zos/antfincdn/og1XQOMyyj/1e3a8de1-3b42-405d-9f82-f92cb1c10413.png',\n      },\n    });\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      colCell: (node, s2, headConfig) => {\n        return new CustomColCell(node, s2, headConfig);\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    // 使用\n    s2.render();\n  });\n",title:{zh:"自定义列头单元格",en:"custom col cell"},filename:"col-cell.ts",isNew:!1},{id:"corner-cell",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/0FL74ArooA/df0a2454-476c-4999-885f-e2a49c740334.png",source:"import { PivotSheet, CornerCell } from '@antv/s2';\n\n/**\n * 自定义 CornerCell，给角头添加背景图\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/corner-cell.ts\n */\nclass CustomCornerCell extends CornerCell {\n  drawBackgroundShape() {\n    this.addShape('image', {\n      attrs: {\n        ...this.getCellArea(),\n        img: 'https://gw.alipayobjects.com/zos/antfincdn/og1XQOMyyj/1e3a8de1-3b42-405d-9f82-f92cb1c10413.png',\n      },\n    });\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      cornerCell: (node, s2, headConfig) => {\n        return new CustomCornerCell(node, s2, headConfig);\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    // 使用\n    s2.render();\n  });\n",title:{zh:"自定义角头单元格",en:"custom corner cell"},filename:"corner-cell.ts",isNew:!1},{id:"corner-header",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/KH6us7hvnV/a0860c18-3d00-48f9-8483-1b29de6cb149.png",source:"import { PivotSheet } from '@antv/s2';\nimport { Group } from '@antv/g-canvas';\nimport { get } from 'lodash';\n\n/**\n * 自定义整个角头, 添加文字和背景色\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/facet/header/corner.ts\n */\nclass CustomCornerHeader extends Group {\n  node;\n\n  backgroundShape;\n\n  textShape;\n\n  constructor(node) {\n    super({});\n    this.node = node;\n    this.initCornerHeader();\n  }\n\n  initCornerHeader() {\n    this.initBg();\n    this.initText();\n  }\n\n  initBg() {\n    this.backgroundShape = this.addShape('image', {\n      attrs: {\n        x: 0,\n        y: 0,\n        width: get(this.node, 'headerConfig.width'),\n        height: get(this.node, 'headerConfig.height'),\n        img: 'https://gw.alipayobjects.com/zos/antfincdn/og1XQOMyyj/1e3a8de1-3b42-405d-9f82-f92cb1c10413.png',\n      },\n    });\n    this.node.add(this.backgroundShape);\n  }\n\n  initText() {\n    this.textShape = this.addShape('text', {\n      zIndex: 100,\n      attrs: {\n        x: 50,\n        y: 70,\n        text: 'corner in S2',\n        fontFamily: 'PingFang SC',\n        fontSize: 20,\n        fill: 'black',\n        stroke: 'black',\n      },\n    });\n    this.node.add(this.textShape);\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      cornerHeader: (node, s2, headConfig) => {\n        return new CustomCornerHeader(node);\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义角头",en:"custom corner header"},filename:"corner-header.ts",isNew:!1},{id:"totals-cell",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/W22O8FkKz/8ab7d837-4d91-49c1-81a5-66d6de619206.png",source:"import { PivotSheet, RowCell, renderRect } from '@antv/s2';\n\n/**\n * 继承 RowCell, 单独修改行小计/行总计的背景色和文字颜色 (继承 ColCell, 列小计/列总计 同理)\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/row-cell.ts\n */\nclass CustomTotalsRowCell extends RowCell {\n  // 背景色\n  drawBackgroundShape() {\n    // 总计\n    if (this.meta.isGrandTotals) {\n      this.backgroundShape = renderRect(this, {\n        ...this.getCellArea(),\n        fill: '#f63',\n        fillOpacity: 0.9,\n      });\n      return;\n    }\n\n    // 小计\n    if (this.meta.isSubTotals) {\n      this.backgroundShape = renderRect(this, {\n        ...this.getCellArea(),\n        fill: '#06a',\n        fillOpacity: 0.9,\n      });\n      return;\n    }\n\n    return super.drawBackgroundShape();\n  }\n\n  // 文字\n  getTextStyle() {\n    const originTextStyle = super.getTextStyle();\n\n    // 总计\n    if (this.meta.isGrandTotals) {\n      return {\n        ...originTextStyle,\n        fill: '#fff',\n        fontWeight: 800,\n        fontSize: 16,\n      };\n    }\n\n    // 小计\n    if (this.meta.isSubTotals) {\n      return {\n        ...originTextStyle,\n        fill: '#fff',\n        fontWeight: 800,\n        fontSize: 12,\n      };\n    }\n\n    return super.getTextStyle();\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      totals: {\n        row: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          subTotalsDimensions: ['province'],\n        },\n        col: {\n          showGrandTotals: true,\n          showSubTotals: true,\n          subTotalsDimensions: ['type'],\n        },\n      },\n      rowCell: (node, s2, headConfig) => {\n        return new CustomTotalsRowCell(node, s2, headConfig);\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义小计/总计单元格",en:"custom totals cell"},filename:"totals-cell.ts",isNew:!1},{id:"custom-specified-cell",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*GSh4R6qdC5IAAAAAAAAAAAAADmJ7AQ/original",source:"/* eslint-disable max-classes-per-file */\nimport { PivotSheet, DataCell, ColCell, CornerCell, RowCell } from '@antv/s2';\n\n/**\n * 自定义 DataCell，通过复写基类方法, 给特定单元格设置背景色, 文字大小, 颜色等...\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/data-cell.ts\n */\nclass CustomDataCell extends DataCell {\n  getBackgroundColor() {\n    // 特定数据\n    if (this.meta.fieldValue >= 6000) {\n      return {\n        backgroundColor: 'red',\n        backgroundColorOpacity: 0.2,\n      };\n    }\n\n    return super.getBackgroundColor();\n  }\n\n  getTextStyle() {\n    const defaultTextStyle = super.getTextStyle();\n\n    // 指定列\n    if (this.meta.rowIndex % 2 === 0) {\n      return {\n        ...defaultTextStyle,\n        fontSize: 16,\n        fill: '#396',\n        textAlign: 'left',\n      };\n    }\n\n    // 指定数据\n    if (this.meta.fieldValue >= 600) {\n      return {\n        ...defaultTextStyle,\n        fontSize: 14,\n        fontWeight: 700,\n        fill: '#f63',\n        textAlign: 'center',\n      };\n    }\n\n    // 指定单元格\n    if (\n      this.meta.id === 'root[&]四川省[&]乐山市-root[&]办公用品[&]纸张[&]number'\n    ) {\n      return {\n        ...defaultTextStyle,\n        fontSize: 12,\n        fontWeight: 200,\n        fill: '#dcdcdc',\n        opacity: 0.9,\n        textAlign: 'right',\n      };\n    }\n\n    // 使用默认处理\n    return super.getTextStyle();\n  }\n}\n\n/**\n * 自定义 ColCell, 通过复写基类方法, 给特定单元格设置文字大小, 颜色等...\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/col-cell.ts\n */\nclass CustomColCell extends ColCell {\n  getTextStyle() {\n    const defaultTextStyle = super.getTextStyle();\n\n    // 指定列\n    if (this.meta.colIndex % 2 === 0) {\n      return {\n        ...defaultTextStyle,\n        fontSize: 16,\n        fill: '#396',\n        textAlign: 'left',\n      };\n    }\n\n    // 指定层级\n    if (this.meta.level >= 1) {\n      return {\n        ...defaultTextStyle,\n        fill: 'pink',\n        textAlign: 'center',\n      };\n    }\n\n    // 指定文本\n    if (this.meta.label === '办公用品') {\n      return {\n        ...defaultTextStyle,\n        fontSize: 22,\n        textAlign: 'right',\n      };\n    }\n\n    // 使用默认处理\n    return super.getTextStyle();\n  }\n}\n\n/**\n * 自定义 CornerCell, 通过复写基类方法, 给特定单元格设置文字大小, 颜色等...\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/corner-cell.ts\n */\nclass CustomCornerCell extends CornerCell {\n  getBackgroundColor() {\n    // 特定数据\n    if (this.meta.field === 'province') {\n      return {\n        backgroundColor: 'red',\n        backgroundColorOpacity: 0.2,\n      };\n    }\n\n    return super.getBackgroundColor();\n  }\n\n  getTextStyle() {\n    const defaultTextStyle = super.getTextStyle();\n\n    if (this.meta.field === 'type') {\n      return {\n        ...defaultTextStyle,\n        fill: '#06a',\n        fontSize: 20,\n        fontWeight: 200,\n      };\n    }\n\n    return super.getTextStyle();\n  }\n}\n\n/**\n * 自定义 RowCell, 通过复写基类方法, 给特定单元格设置文字大小, 颜色等...\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/row-cell.ts\n */\nclass CustomRowCell extends RowCell {\n  getBackgroundColor() {\n    // 特定数据\n    if (this.meta.field === 'province') {\n      return {\n        backgroundColor: 'red',\n        backgroundColorOpacity: 0.2,\n      };\n    }\n\n    return super.getBackgroundColor();\n  }\n\n  getTextStyle() {\n    const defaultTextStyle = super.getTextStyle();\n\n    if (this.meta.field === 'type') {\n      return {\n        ...defaultTextStyle,\n        fill: '#06a',\n        fontSize: 20,\n        fontWeight: 200,\n      };\n    }\n\n    if (this.meta.rowIndex >= 1) {\n      return {\n        ...defaultTextStyle,\n        fill: '#dcdcdc',\n        fontSize: 20,\n        fontWeight: 700,\n      };\n    }\n\n    return super.getTextStyle();\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      cornerCell: (node, spreadsheet, headerConfig) => {\n        return new CustomCornerCell(node, spreadsheet, headerConfig);\n      },\n      colCell: (node, spreadsheet, headerConfig) => {\n        return new CustomColCell(node, spreadsheet, headerConfig);\n      },\n      rowCell: (node, spreadsheet, headerConfig) => {\n        return new CustomRowCell(node, spreadsheet, headerConfig);\n      },\n      dataCell: (viewMeta) => {\n        return new CustomDataCell(viewMeta, viewMeta?.spreadsheet);\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义特定单元格",en:"custom specified cell"},filename:"custom-specified-cell.ts",isNew:!1},{id:"custom-merged-cell",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*B7mTTZYFjv8AAAAAAAAAAAAADmJ7AQ/original",source:"import { PivotSheet, MergedCell } from '@antv/s2';\n\n/**\n * 自定义 MergedCell，改变背景色\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/merged-cell.ts\n */\nclass CustomMergedCell extends MergedCell {\n  // 覆盖背景绘制，可覆盖或者增加绘制方法\n  drawBackgroundShape() {\n    super.drawBackgroundShape();\n    this.backgroundShape.attr('fill', 'red');\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      interaction: {\n        hoverHighlight: false,\n      },\n      mergedCellsInfo: [\n        [\n          { colIndex: 1, rowIndex: 1, showText: true }, // 此单元格的 meta 信息将作为合并单元的 meta 信息\n          { colIndex: 1, rowIndex: 2 },\n          { colIndex: 2, rowIndex: 1 },\n          { colIndex: 2, rowIndex: 2 },\n        ],\n      ],\n      mergedCell: (spreadsheet, cells, meta) =>\n        new CustomMergedCell(spreadsheet, cells, meta),\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    // 使用\n    s2.render();\n  });\n",title:{zh:"自定义合并单元格",en:"custom merged cell"},filename:"custom-merged-cell.ts",isNew:!1},{id:"custom-table-cell",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*-uLETb4gK9AAAAAAAAAAAAAADmJ7AQ/original",source:"/* eslint-disable max-classes-per-file */\nimport { TableColCell, TableDataCell, TableSheet } from '@antv/s2';\n\n/**\n * 自定义 DataCell，通过复写基类方法, 给特定单元格设置背景色, 文字大小, 颜色等...\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/table-data-cell.ts\n */\nclass CustomDataCell extends TableDataCell {\n  getBackgroundColor() {\n    // 特定数据\n    if (this.meta.fieldValue >= 6000) {\n      return {\n        backgroundColor: 'red',\n        backgroundColorOpacity: 0.2,\n      };\n    }\n\n    return super.getBackgroundColor();\n  }\n\n  getTextStyle() {\n    const defaultTextStyle = super.getTextStyle();\n    // 序号\n\n    if (this.meta.colIndex === 0) {\n      return {\n        ...defaultTextStyle,\n        fontWeight: 600,\n        textAlign: 'center',\n      };\n    }\n\n    // 指定列\n    if (this.meta.rowIndex % 2 === 0 && this.meta.colIndex > 0) {\n      return {\n        ...defaultTextStyle,\n        fontSize: 16,\n        fill: '#396',\n        textAlign: 'left',\n      };\n    }\n\n    // 指定数据\n    if (this.meta.fieldValue >= 600 || this.meta.fieldValue === '沙发') {\n      return {\n        ...defaultTextStyle,\n        fontSize: 14,\n        fontWeight: 700,\n        fill: '#f63',\n        textAlign: 'center',\n      };\n    }\n\n    // 指定单元格\n    if (this.meta.id === '7-root[&]省份') {\n      return {\n        ...defaultTextStyle,\n        fontSize: 12,\n        fontWeight: 200,\n        fill: '#dcdcdc',\n        opacity: 0.9,\n        textAlign: 'right',\n      };\n    }\n\n    // 使用默认处理\n    return super.getTextStyle();\n  }\n}\n\n/**\n * 自定义 ColCell, 通过复写基类方法, 给特定单元格设置文字大小, 颜色等...\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/table-col-cell.ts\n */\nclass CustomColCell extends TableColCell {\n  getTextStyle() {\n    const defaultTextStyle = super.getTextStyle();\n\n    // 指定列\n    if (this.meta.colIndex % 2 === 0) {\n      return {\n        ...defaultTextStyle,\n        fontSize: 16,\n        fill: '#396',\n        textAlign: 'left',\n      };\n    }\n\n    // 指定层级\n    if (this.meta.level >= 0) {\n      return {\n        ...defaultTextStyle,\n        fill: 'pink',\n        textAlign: 'center',\n      };\n    }\n\n    // 指定文本\n    if (this.meta.label === '子类别') {\n      return {\n        ...defaultTextStyle,\n        fontSize: 22,\n        textAlign: 'right',\n      };\n    }\n\n    // 使用默认处理\n    return super.getTextStyle();\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        columns: ['province', 'city', 'type', 'sub_type', 'number'],\n      },\n      meta: res.meta,\n      data: res.data,\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      showSeriesNumber: true,\n      colCell: (node, spreadsheet, headerConfig) => {\n        return new CustomColCell(node, spreadsheet, headerConfig);\n      },\n      dataCell: (viewMeta) => {\n        return new CustomDataCell(viewMeta, viewMeta?.spreadsheet);\n      },\n    };\n    const s2 = new TableSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义明细表单元格",en:"custom table cell"},filename:"custom-table-cell.ts",isNew:!1},{id:"mini-chart",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*apnIT4KXP3YAAAAAAAAAAAAADmJ7AQ/original",source:"import { PivotSheet, DataCell, drawObjectText } from '@antv/s2';\nimport { isArray, isObject } from 'lodash';\n\n/**\n * 自定义 DataCell，使用 drawObjectText 绘制简易的 mini 图\n * 查看更多方法 https://github.com/antvis/S2/blob/master/packages/s2-core/src/cell/data-cell.ts\n */\nclass CustomDataCell extends DataCell {\n  // 当数值为对象时，完全接管绘制, 使用内置的 `drawObjectText` 根据不同的数据结构 (见下方) 绘制不同的图形\n  drawTextShape() {\n    const { fieldValue } = this.getMeta();\n\n    if (isObject(fieldValue) || isArray(fieldValue)) {\n      drawObjectText(this);\n      return;\n    }\n\n    super.drawTextShape();\n  }\n}\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container')!;\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: [\n        // 用于绘制 mini 图的数据, 数据结构请查阅: https://s2.antv.antgroup.com/manual/basic/analysis/strategy#%E9%85%8D%E7%BD%AE-mini-%E5%9B%BE\n        {\n          province: '海南省',\n          city: '三亚市',\n          type: '家具',\n          sub_type: '桌子',\n          number: {\n            // 折线图\n            values: {\n              type: 'line',\n              data: [\n                {\n                  year: '2017',\n                  value: -368,\n                },\n                {\n                  year: '2018',\n                  value: 368,\n                },\n                {\n                  year: '2019',\n                  value: 368,\n                },\n                {\n                  year: '2020',\n                  value: 368,\n                },\n                {\n                  year: '2021',\n                  value: 268,\n                },\n                {\n                  year: '2022',\n                  value: 168,\n                },\n              ],\n              encode: { x: 'year', y: 'value' },\n            },\n          },\n        },\n        {\n          province: '海南省',\n          city: '三亚市',\n          type: '家具',\n          sub_type: '沙发',\n          number: {\n            // 柱状图\n            values: {\n              type: 'bar',\n              data: [\n                {\n                  year: '2017',\n                  value: -368,\n                },\n                {\n                  year: '2018',\n                  value: 328,\n                },\n                {\n                  year: '2019',\n                  value: 38,\n                },\n                {\n                  year: '2020',\n                  value: 168,\n                },\n                {\n                  year: '2021',\n                  value: 268,\n                },\n                {\n                  year: '2022',\n                  value: 368,\n                },\n              ],\n              encode: { x: 'year', y: 'value' },\n            },\n          },\n        },\n        {\n          province: '海南省',\n          city: '三亚市',\n          type: '办公用品',\n          sub_type: '笔',\n          number: {\n            // 多列文本\n            values: [\n              [3877, -4324, '42%'],\n              [3877, 4324, '-42%'],\n            ],\n          },\n        },\n        {\n          province: '海南省',\n          city: '三亚市',\n          type: '办公用品',\n          sub_type: '纸张',\n          number: {\n            // 子弹图\n            values: {\n              measure: 0.3,\n              target: 0.76,\n            },\n          },\n        },\n        ...res.data,\n      ],\n    };\n\n    const s2Options = {\n      width: 1000,\n      height: 680,\n      style: {\n        cellCfg: {\n          height: 40,\n        },\n      },\n      conditions: {\n        text: [\n          {\n            field: 'number',\n            mapping: (value, cellInfo) => {\n              const { meta, colIndex } = cellInfo || {};\n              if (colIndex === 0 || !value || !meta?.fieldValue) {\n                return {\n                  fill: '#000',\n                };\n              }\n              return {\n                fill: value > 0 ? '#FF4D4F' : '#29A294',\n              };\n            },\n          },\n        ],\n      },\n      dataCell: (viewMeta) => {\n        return new CustomDataCell(viewMeta, viewMeta?.spreadsheet);\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义 mini 图",en:"custom mini chart"},filename:"mini-chart.ts",isNew:!1},{id:"data-cell-placeholder",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*B-VMT7kCWL0AAAAAAAAAAAAADmJ7AQ/original",source:"import { PivotSheet, CornerCell } from '@antv/s2';\n\nfetch(\n  'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n)\n  .then((res) => res.json())\n  .then((res) => {\n    const container = document.getElementById('container');\n    const s2DataConfig = {\n      fields: {\n        rows: ['province', 'city'],\n        columns: ['type', 'sub_type'],\n        values: ['number'],\n      },\n      meta: res.meta,\n      data: res.data.map((item, i) => {\n        return {\n          ...item,\n          number: i < 5 ? item.number : null,\n        };\n      }),\n    };\n    const s2Options = {\n      width: 600,\n      height: 480,\n      // 默认 \"-\"\n      // placeholder: '',\n      placeholder: (cell) => {\n        // 或者根据当前单元格动态设置\n        console.log('cell: ', cell);\n        if (cell.cellType === 'dataCell') {\n          return '*****';\n        }\n\n        // 返回 null, 使用默认值 (\"-\")\n        return null;\n      },\n    };\n    const s2 = new PivotSheet(container, s2DataConfig, s2Options);\n\n    s2.render();\n  });\n",title:{zh:"自定义空数据单元格占位符",en:"custom cell placeholder"},filename:"data-cell-placeholder.ts",isNew:!1}],icon:"",id:"custom-cell",title:{en:"custom cell",zh:"自定义单元格"},childrenKey:"demos",order:8},{demos:[{id:"custom-order",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/oOiZ02mZJ/zidingyipaixu.gif",source:"import React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { SheetComponent } from \"@antv/s2-react\";\n\nconst SortMethodType = {\n    asc: 'asc',\n    desc: 'desc',\n    none: 'none',\n    custom: 'custom'\n}\n\nconst MENUS = [\n    { key: SortMethodType.none, text: '不排序' },\n    { key: SortMethodType.asc, text: '升序', icon: 'GroupAsc' },\n    { key: SortMethodType.desc, text: '降序', icon: 'GroupDesc' },\n    { key: SortMethodType.custom, text: '自定义排序', icon: 'Trend' },\n];\nconst s2DataConfig = {\n    fields: {\n        rows: [ 'province', 'city' ],\n        columns: [ 'type', 'sub_type' ],\n        values: [ 'number' ],\n    },\n    meta: undefined,\n    data: undefined\n};\n\nconst s2Options = {\n    width: 600,\n    height: 480,\n    // 关闭默认icon\n    showDefaultHeaderActionIcon: false,\n    // 自定义 icon\n    customSVGIcons: [\n        {\n            name: 'customKingIcon',\n            svg: 'https://gw.alipayobjects.com/zos/bmw-prod/f44eb1f5-7cea-45df-875e-76e825a6e0ab.svg',\n        },\n    ],\n    tooltip: {\n        showTooltip: true,\n    },\n};\n\nconst useDataCfg = () => {\n    const [ res, setRes ] = useState({ meta: undefined, data: undefined });\n    const [ dataCfg, setDataCfg ] = useState(s2DataConfig);\n\n    useEffect(() => {\n        fetch(\n            'https://gw.alipayobjects.com/os/bmw-prod/cd9814d0-6dfa-42a6-8455-5a6bd0ff93ca.json',\n        )\n            .then((res) => res.json())\n            .then((res) => setRes(res));\n    }, []);\n\n    useEffect(() => {\n        setDataCfg({\n            ...s2DataConfig,\n            meta: res.meta,\n            data: res.data,\n        });\n    }, [ res ])\n\n    return dataCfg;\n}\n\nconst App = () => {\n    const dataCfg = useDataCfg();\n    const [ sortParams, setSortParams ] = useState([]);\n\n    // 设置自定义 `icon` 的展示条件\n    const headerActionIcons = [\n        {\n            // 选择icon,可以是 S2 自带的，也可以是自定义的 icon\n            iconNames: [ 'customKingIcon' ],\n            // 通过 belongsCell + displayCondition 设置 icon 的展示位置\n            belongsCell: 'colCell',\n            displayCondition: (meta) => meta.level === 2,\n            // icon 点击之后的执行函数\n            action: (props) => {\n                const { meta, event } = props;\n                const operator = {\n                    onClick: ({ key }) => {\n                        handleSortCallback(meta, key);\n                        meta.spreadsheet.hideTooltip();\n                    },\n                    menus: MENUS,\n                };\n                // 自定义 tooltip 配置，展示 toolTip\n                meta.spreadsheet.showTooltipWithInfo(event, [], {\n                    operator,\n                    showSingleTips: true,\n                    onlyMenu: true,\n                });\n            },\n        },\n    ];\n\n    // 执行自定义排序回调\n    const handleSortCallback = (meta, key) => {\n        if (key === SortMethodType.custom) {\n            const sortParams = [\n                { sortFieldId: 'type', sortBy: [ '办公用品', '家具' ] },\n                { sortFieldId: 'city', sortMethod: 'ASC' },\n            ];\n            setSortParams(sortParams)\n            console.log('可以在这里实现你手动排序的交互和逻辑哟', sortParams)\n        } else {\n            // 使用 S2 提供的组内排序方式\n            meta.spreadsheet.groupSortByMethod(key, meta);\n        }\n    }\n\n    return <SheetComponent dataCfg={ { ...dataCfg, sortParams: sortParams } } options={ {...s2Options, headerActionIcons} }/>;\n}\n\n// 使用\nReactDOM.render(\n    <App/>,\n    document.getElementById('container'),\n);\n\n",title:{zh:"自定义排序功能",en:"custom order"},filename:"custom-order.tsx",isNew:!1}],icon:"",id:"custom-order",title:{en:"custom-order",zh:"自定义排序功能"},childrenKey:"demos",order:9}],childrenKey:"examples"}]}},children:n})}},76959:function(n,e,t){t.d(e,{w:function(){return o}});var o=(0,t(62435).createContext)({})}}]);